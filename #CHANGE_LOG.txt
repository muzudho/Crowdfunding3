────────────────────────────────────────
追記 2016-03-03 08:43

/local-settings.php

    解説
        local-settings.php ファイルにはパスワードが含まれているため配布していない。
        http://～略～/index.php にアクセスすると local-settings.php ファイルを作成するための指示が出てくるので
        手順に従ってください。

    実行
        http://～略～/index.php にアクセスして手順に従う。

────────────────────────────────────────
追記 2016-02-27 02:02

/.htaccess    2

    解説
        CORESERVER で動かす場合は、.htaccess を編集すること。
        次の１行をコメントアウトする。

    ×
        Options +FollowSymLinks

    ○
        #Options +FollowSymLinks

────────────────────────────────────────
追記 2016-03-03 08:40

     解説
         GitHub には、翻訳ファイルをコンパイルした .mo ファイルをアップロードしない設定になっている？
         poedit を使うなどして、.mo ファイルを作っておく必要がある。

/locale/ja_JP/LC_MESSAGES/messages.po

    実行
        poedit で開いて保存。(messages.moファイルが作成される)

────────────────────────────────────────
// 追記 2016-03-01 02:18
// 
//     解説
//         MySQLは、バージョン 5.6 から、ストリクト・モード設定が有効になっている。
//         MySQL 5.6 を使う場合、
//         MySQL5.5 以前に書かれたコードは動かなくなることがあることから、
//         ストリクト・モード設定を消して対応する。
//         ローカルＰＣでテストしている場合、ＰＣを再起動するたびに実行しなおすこと。
// 
//     実行
//         SET @@GLOBAL.sql_mode='';
//         SELECT @@GLOBAL.sql_mode;
// 
────────────────────────────────────────
2016-02-22 22:22

    解説
        データベース作成

    実行
        CREATE SCHEMA `localgood703` DEFAULT CHARACTER SET utf8 COLLATE utf8_bin ;

────────────────────────────────────────
2016-02-22 23:54

/controller/admin.php   201-203

    解説
        「Text::」の脱字。

    ×
                    'list' => array('label' => _('Estado del envio automatico'), 'item' => false),
                    'init' => array('label' => _('Iniciando un nuevo boletin'), 'item' => false),
                    'init' => array('label' => _('Viendo listado completo'), 'item' => true)

    ○
                    'list' => array('label' => Text::_('Estado del envio automatico'), 'item' => false),
                    'init' => array('label' => Text::_('Iniciando un nuevo boletin'), 'item' => false),
                    'init' => array('label' => Text::_('Viendo listado completo'), 'item' => true)

────────────────────────────────────────
2016-02-23 00:19

/core/model.php        63-95,108-109

    解説
        ＳＱＬクエリーのテーブル名の頭に「`gt_lg-common`.」というテーブル名修飾を
        付けるフィルターをコメントアウト。

    ×
        /**
         *
         */
        protected function queryFilter($query){

            $_query = $query;

            if (!empty($_query)){

                $ret = preg_match_all('/user([A-Za-z_]*)\./s',$_query, $_match);
                if ($ret > 0){
                    $_matched = array_unique($_match[0]);
                    foreach ( $_matched as $_m ){
                        $_query = preg_replace("/" . preg_quote($_m) ."/", "`gt_lg-common`." . $_m, $_query);
                    }
                }

                $ret = preg_match_all('/(FROM|JOIN|TABLE|INTO|INSERT|UPDATE|DELETE|REPLACE|\()\s+user([A-Za-z_]*)/s', $_query, $_match);
                if ($ret > 0){
                    $_matched = array_unique($_match[0]);
                    foreach ( $_matched as $_m ){
                        $trim_m = preg_replace("/\s+/", " ", $_m);
                        $_e = explode(' ', $trim_m);
                        if (isset($_e[1])  && (strpos($_e[1], 'user') !== false)){
                            $_e[1] = '`gt_lg-common`.' . $_e[1];
                            $_s = implode(' ', $_e);
                            $_query = preg_replace("/" . preg_quote($_m) ."/", $_s, $_query);
                        }
                    }
                }
            }
            return $_query;
        }

    ○
         /**
          *
          */
         protected function queryFilter($query){

             $_query = $query;
// 
//             if (!empty($_query)){
// 
//                 $ret = preg_match_all('/user([A-Za-z_]*)\./s',$_query, $_match);
//                 if ($ret > 0){
//                     $_matched = array_unique($_match[0]);
//                     foreach ( $_matched as $_m ){
//                         $_query = preg_replace("/" . preg_quote($_m) ."/", "`gt_lg-common`." . $_m, $_query);
//                     }
//                 }
// 
//                 $ret = preg_match_all('/(FROM|JOIN|TABLE|INTO|INSERT|UPDATE|DELETE|REPLACE|\()\s+user([A-Za-z_]*)/s', $_query, $_match);
//                 if ($ret > 0){
//                     $_matched = array_unique($_match[0]);
//                     foreach ( $_matched as $_m ){
//                         $trim_m = preg_replace("/\s+/", " ", $_m);
//                         $_e = explode(' ', $trim_m);
//                         if (isset($_e[1])  && (strpos($_e[1], 'user') !== false)){
//                             $_e[1] = '`gt_lg-common`.' . $_e[1];
//                             $_s = implode(' ', $_e);
//                             $_query = preg_replace("/" . preg_quote($_m) ."/", $_s, $_query);
//                         }
//                     }
//                 }
//             }
             return $_query;
         }

────────────────────────────────────────
2016-02-23 00:36

    解説
        ローカルグッド横浜の拠点を入れておくフィールドの追加。

    実行
        ALTER TABLE `user` 
        ADD COLUMN `home` VARCHAR(50) NOT NULL COMMENT '(^q^)Add 2016-02-23' AFTER `node`;

    実行（てきとう）
        UPDATE `user` SET `home`='LOCAL GOOD FUKUOKA' WHERE `id`='root';

────────────────────────────────────────
2016-02-23 01:29

    解説
        ローカルグッド横浜版GOTEOに追加されている、管理者の操作ログを
        記録していくテーブル。

    実行
        CREATE TABLE user_login_log
        (
            user VARCHAR(50) NOT NULL,
            node VARCHAR(50) NOT NULL,
            datetime TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
            token VARCHAR(50) NOT NULL,
            expiration_date TIMESTAMP DEFAULT '0000-00-00 00:00:00' NOT NULL,
            CONSTRAINT `PRIMARY` PRIMARY KEY (user, node)
        );

────────────────────────────────────────
2016-02-23 02:32

/local-settings.php

    解説
        データベース名を指定する項目が追加されていた。

    設定例
        // LocalGood Common Authentication Database
        define('COMMON_AUTH_DB_SCHEMA'        , 'localgood703');    // dbname=...

────────────────────────────────────────
2016-02-23 18:49

    解説
        無かったテーブルを　適当に推測して追加。

    CREATE TABLE `skill` (
      `id` INT NOT NULL AUTO_INCREMENT,
      `name` VARCHAR(50) NULL,
      `description` VARCHAR(50) NULL,
      `parent_skill_id` INT NULL,
      `order` INT NULL,
      PRIMARY KEY (`id`));

    CREATE TABLE `skill_lang` (
      `id` INT NOT NULL AUTO_INCREMENT,
      `name` VARCHAR(50) NULL,
      `lang` VARCHAR(50) NULL,
      `description` VARCHAR(50) NULL,
      PRIMARY KEY (`id`));

    CREATE TABLE `user_skill` (
      `user` VARCHAR(50) NOT NULL,
      `skill` INT NULL,
      PRIMARY KEY (`user`));

    CREATE TABLE `project_skill` (
      `project` VARCHAR(50) NOT NULL,
      `skill` INT NULL,
      PRIMARY KEY (`project`));

────────────────────────────────────────
2016-02-23 20:31

    解説
        データベースに言語「日本語」追加。
        ルートユーザーに「日本語」選択可能可。
        ルートユーザーの lang を「ja」に更新。

    実行
        INSERT INTO `lang` (`id`, `name`, `active`, `short`, `locale`) VALUES ('ja', 'Japanese', '1', 'JPN', 'ja_JP');
        INSERT INTO `user_translang` (`user`, `lang`) VALUES ('root', 'ja');
        UPDATE `user` SET `lang`='ja' WHERE `id`='root';
────────────────────────────────────────────────────────────
2016-02-24 00:04

    解説
        グーグル翻訳をかけたファイル。/db/texts(グーグル翻訳化).sql

    実行
        ★略 /db/texts(グーグル翻訳化).sql を実行すること。

────────────────────────────────────────────────────────────
2016-02-24 15:53

    解説
        /locale/ja_JP/LC_MESSAGES/messages.mo ファイルを作りたい。
        poedit を使って保存する。
        この際、
        /locale/ja_JP/LC_MESSAGES/messages.po にエラーが３件あるので、
        %s の数が合っていない翻訳を修正する。
        管理者でログインしている場合、ログアウトしてログインし直すと　翻訳が再描画される。

    実行
        ★略

────────────────────────────────────────────────────────────
2016-02-24 23:16

/local-settings.php

    解説
        ログに記録される定数を追加。
        「define('LG_NAME'                    , 'LOCAL GOOD FUKUOKA');」の下あたりに。

    追加
        define('LG_PLACE_NAME'              , 'LOCAL GOOD FUKUOKA');    // (^q^)適当に追加☆ user_login_log.node に記録される☆
────────────────────────────────────────────────────────────
2016-02-24 23:54

    解説
        template_lang.name と、
        template_lang.purpose フィールドを使おうとしているソースコードの記述を削除。
        template_lang テーブルに name, purpose フィールドはないので。

/library/template.php 44-45
    ×
                            IFNULL(template_lang.name, template.name) as name,
                            IFNULL(template_lang.purpose, template.purpose) as purpose,

    ○
                            template.name as name,
                            template.purpose as purpose,

/library/template.php 88-89
    ×
                            IFNULL(template_lang.name, template.name) as name,
                            IFNULL(template_lang.purpose, template.purpose) as purpose,

    ○
                            template.name as name,
                            template.purpose as purpose,
────────────────────────────────────────────────────────────
2016-02-25 16:40

    解説
        role テーブルに権限を追加。
        root ユーザーに権限を付与。

    実行
        INSERT INTO `role` (`id`, `name`) VALUES ('project_owner', 'project_owner');
        INSERT INTO `role` (`id`, `name`) VALUES ('localadmin', 'localadmin');
        //INSERT INTO `role` (`id`, `name`) VALUES ('vip', 'vip');
        INSERT INTO `user_role` (`user_id`, `role_id`, `node_id`) VALUES ('root', 'project_owner', '*');
        INSERT INTO `user_role` (`user_id`, `role_id`, `node_id`) VALUES ('root', 'localadmin', '*');
        //INSERT INTO `user_role` (`user_id`, `role_id`, `node_id`) VALUES ('root', 'vip', '*');
────────────────────────────────────────────────────────────
2016-02-25 18:04

    解説
        project テーブルにフィールド追加。
        project_lang テーブルにフィールド追加。
        evaluation テーブルを適当に追加。

    実行
        ALTER TABLE `project` 
        ADD COLUMN `period_1r` INT NOT NULL AFTER `post_country`,
        ADD COLUMN `period_2r` INT NOT NULL AFTER `period_1r`,
        ADD COLUMN `evaluation` VARCHAR(50) NULL AFTER `period_2r`;

        ALTER TABLE `project_lang` 
        ADD COLUMN `evaluation` VARCHAR(50) NULL AFTER `subtitle`;

        CREATE TABLE `evaluation` (
          `id` VARCHAR(50) NOT NULL,
          `name` VARCHAR(50) NULL,
          `description` VARCHAR(50) NULL,
          `url` VARCHAR(50) NULL,
          `lang` VARCHAR(50) NULL,
          `node` VARCHAR(50) NULL,
          `content` VARCHAR(50) NULL,
          `project` VARCHAR(50) NULL,
          PRIMARY KEY (`id`));
────────────────────────────────────────────────────────────
//2016-02-25 23:20
//
//    解説
//        skill テーブルのデータを適当に入れる。
//
//    実行
//        INSERT INTO `skill` (`id`, `name`, `description`, `parent_skill_id`, `order`) VALUES ('1', 'skill0', 'skill zero', '', '1');
//        INSERT INTO `skill` (`id`, `name`, `description`, `parent_skill_id`, `order`) VALUES ('2', 'skill1', 'skill one', '1', '2');
//        INSERT INTO `skill` (`id`, `name`, `description`, `parent_skill_id`, `order`) VALUES ('3', 'skill2', 'skill two', '1', '3');
────────────────────────────────────────────────────────────
// これは要らなくなった。
//
// 2016-02-26 01:38
// 
//     解説
//         新規登録ユーザーに project_owner 権限を与えるテスト。
// 
//     実行
//         INSERT INTO `user_role` (`user_id`, `role_id`, `node_id`) VALUES ('guest2', 'project_owner', '*');
────────────────────────────────────────────────────────────
2016-02-26 02:11

    解説
        /library/aws フォルダーを削除。

    実行
        /library/aws フォルダーを削除。
────────────────────────────────────────────────────────────
// ↓PHP 5.3.0 から dl() の使用は無効だった。
//
// 2016-02-26 19:07
// 
// C:\php\php.ini
// 
//     解説
//         Apacheサーバーと PHP を組み合わせるときは enable_dl を ON に。
//         それ以外のサーバーと PHP の組み合わせのときは
//         セキュリティー上の都合で enable_dl を OFF に。
//         dl は、PHPの動的ロード。
// 
//     ×
//         enable_dl = Off
//     ○
//         enable_dl = On
────────────────────────────────────────────────────────────
// 2016-02-26 20:48 「2016-02-25 18:04」に統合。
// ALTER TABLE `evaluation` 
// ADD COLUMN `project` VARCHAR(50) NULL AFTER `content`;
────────────────────────────────────────────────────────────
2016-02-26 21:20

    解説
        翻訳テーブルの内容を更新。

    実行
        UPDATE `text` SET `text`='あなたは、サイト名のコミュニティと対話するには、必ず<a href=\"/user/login\">サインイン</a>する必要があります。' WHERE `id`='user-login-required' and`lang`='ja';

    問題点
        FIXME: このタグは　エスケープされてしまって、リンクではなく文字列としてそのまま表示されてしまう。

────────────────────────────────────────────────────────────
2016-02-27 02:47

/config.php

    解説
        インデントを整えたり、
        コメントを付加したり、
        次の行（参考Ａを参照）を追加したりした。

    参考Ａ
        define('LG_PLACE_NAME'               , 'LOCAL GOOD FUKUOKA');   // this string record in database. `user_login_log` table, `node` field.

────────────────────────────────────────────────────────────
// 2016-02-28 23:57
// 
//     解説
//         GitHub には、翻訳ファイルをコンパイルした .mo ファイルをアップロードしない設定になっている？
//         poedit を使うなどして、.mo ファイルを作っておく必要がある。
// 
────────────────────────────────────────────────────────────
2016-02-29 03:13

    解説
        Googleアース・ビューを削除します。

/config.php 256-260

    ×
        /****************************************************
        CESIUM
         ****************************************************/
        define('LG_EARTHVIEW'                , 'http://map.yokohama.localgood.jp.il3c.com/');

    ○
        ※削除

/local-settings.php 177-181

    ×
        /****************************************************
        CESIUM
         ****************************************************/
        define('LG_EARTHVIEW'                , 'http://map.yokohama.localgood.jp.il3c.com/');

    ○
        ※削除

/view/header.html.php 93

    ×
        <a class="earth_view" href="<? if(defined('LG_EARTHVIEW')){echo LG_EARTHVIEW;} ?>" target="_blank"><img src="/view/css/header/earth_view_icon.png" alt="Earth View" /></a>

    ○
        ※削除

/view/m/header.html.php 49-51

    ×
                <li>
                    <a class="earth_view" href="<? if(defined('LG_EARTHVIEW')){echo LG_EARTHVIEW;} ?>" target="_blank"><?/*<img src="<?= LOCALGOOD_WP_BASE_URL ?>/images/earth_view_icon.png" alt="Earth View" />*/?>Earth View</a>
                </li>
    ○
        ※削除

/view/css/header/earth_view_icon.png
/view/images/header/earth_view_icon.png
    ○
        ※削除
────────────────────────────────────────────────────────────
//2016-02-29 03:35
//
//    解説
//        データベースも新規に用意。
//        `localgood703` と同等の内容にする。
//        local-settings.php の設定も変えておく。
//
//    ○
//        CREATE SCHEMA `crowdfunding3` DEFAULT CHARACTER SET utf8 COLLATE utf8_bin ;
//
//        ～★略～    ※`localgood703` と同等の内容にする。
//
//        define('GOTEO_DB_SCHEMA'             , 'crowdfunding3');
//
────────────────────────────────────────────────────────────
2016-02-29 03:13

    解説
        「LOCAL GOOD全国版トップページ」リンクを外します。

/config.php 147

    ×
        define('LG_INTEGRATION_URL'          , '----integration site url----');

    ○
        ※削除

/local-settings.php 70

    ×
        define('LG_INTEGRATION_URL'          , '----integration site url----');

    ○
        ※削除

/view/footer.html.php 37

    ×
                <li><a href="<?= LG_INTEGRATION_URL ?>/riyou_kiyaku_menu/">利用規約</a></li>
    ○
                <li><a href="<?= LOCALGOOD_WP_BASE_URL ?>/riyou_kiyaku_menu/">利用規約</a></li>

/view/footer.html.php 43

    ×
                <li class="integration"><a href="<?= LG_INTEGRATION_URL ?>/">LOCAL GOOD全国版トップページ</a></li>
    ○
                ※削除

/view/header.html.php 91

    ×
                <p class="to_integration_site"><a href="<?= LG_INTEGRATION_URL ?>">LOCAL GOOD全国版トップページ</a></p>
    ○
                ※削除

/view/m/footer.html.php 50

    ×
                    <li><a href="<?= LG_INTEGRATION_URL ?>/riyou_kiyaku_menu/">利用規約</a></li>
    ○
                    <li><a href="<?= LOCALGOOD_WP_BASE_URL ?>/riyou_kiyaku_menu/">利用規約</a></li>

/view/m/footer.html.php 56

    ×
                    <li class="integration"><a href="<?= LG_INTEGRATION_URL ?>/">LOCAL GOOD全国版トップページ</a></li>
    ○
        ※削除

/view/m/header.html.php 49

    ×
                    <li><a href="<?= LG_INTEGRATION_URL ?>">LOCAL GOOD全国版トップページ</a></li>
    ○
        ※削除

────────────────────────────────────────────────────────────
2016-02-29 05:07

    解説
        LOCALGOOD_WP_BASE_URL 定数を止め、SITE_URL に統一します。

/config.php 145
    ×
        define('LOCALGOOD_WP_BASE_URL'       , 'http://localhost'); // link url in menu bar
    ○
        ※削除

/controller/project.php 411
    ×
            if(!isset($_SESSION['user']->roles['project_owner']) && !isset($_SESSION['user']->roles['localadmin'])) header("Location:" . LOCALGOOD_WP_BASE_URL . "/challenge");
    ○
            if(!isset($_SESSION['user']->roles['project_owner']) && !isset($_SESSION['user']->roles['localadmin'])) header("Location:" . SITE_URL . "/challenge");

/view/footer.html.php 36-42
    ×
                <li class="about"><a href="<?= LOCALGOOD_WP_BASE_URL ?>/about/"><?= LG_NAME; ?>について</a></li>
                <li><a href="<?= LOCALGOOD_WP_BASE_URL ?>/riyou_kiyaku_menu/">利用規約</a></li>
                <li class="syoutorihikihou"><a href="<?= LOCALGOOD_WP_BASE_URL ?>/syoutorihikihou/">特定商取引法に基づく表記</a></li>
                <li><a href="<?= LOCALGOOD_WP_BASE_URL ?>/user_guide/">ユーザーガイド</a></li>
                <li><a href="<?= LOCALGOOD_WP_BASE_URL ?>/privacypolicy/">プライバシーポリシー</a></li>
                <li><a href="<?= LOCALGOOD_WP_BASE_URL ?>/mailnews/">メルマガ登録</a></li>
                <li><a href="<?= LOCALGOOD_WP_BASE_URL ?>/contact/">お問い合わせ</a></li>
    ○
                <li class="about"><a href="<?= SITE_URL ?>/about/"><?= LG_NAME; ?>について</a></li>
                <li><a href="<?= SITE_URL ?>/riyou_kiyaku_menu/">利用規約</a></li>
                <li class="syoutorihikihou"><a href="<?= SITE_URL ?>/syoutorihikihou/">特定商取引法に基づく表記</a></li>
                <li><a href="<?= SITE_URL ?>/user_guide/">ユーザーガイド</a></li>
                <li><a href="<?= SITE_URL ?>/privacypolicy/">プライバシーポリシー</a></li>
                <li><a href="<?= SITE_URL ?>/mailnews/">メルマガ登録</a></li>
                <li><a href="<?= SITE_URL ?>/contact/">お問い合わせ</a></li>

/view/header.html.php 87
    ×
            <h1><a href="<?= LOCALGOOD_WP_BASE_URL ?>"><img src="/view/css/header/logo.png" alt="LOCAL GOOD YOKOHAMA"/></a></h1>
    ○
            <h1><a href="<?= SITE_URL ?>"><img src="/view/css/header/logo.png" alt="LOCAL GOOD YOKOHAMA"/></a></h1>

/view/header.html.php 96-109
    ×
                <li><a href="<?= LOCALGOOD_WP_BASE_URL ?>">ホーム</a></li>
                <li><a href="<?= LOCALGOOD_WP_BASE_URL ?>/earth_view/">課題を知る</a>
                    <ul class="sub">
                        <li><a href="<?= LOCALGOOD_WP_BASE_URL ?>/submit_subject/">課題を投稿する</a></li>
                        <li><a href="<?= LOCALGOOD_WP_BASE_URL ?>/subject/">課題を見る</a></li>
                    </ul>
                </li>
                <li><a href="<?= LOCALGOOD_WP_BASE_URL ?>/data/">データを見る</a></li>
                <li><a href="<?= LOCALGOOD_WP_BASE_URL ?>/posts_archive/">活動を知る</a></li>

                <li><a href="/user/login/">支援する</a>
                    <ul class="sub">
                        <li><a href="/">プロジェクト</a></li>
                        <li><a href="<?= LOCALGOOD_WP_BASE_URL ?>/skills/">スキルを活かす</a></li>
    ○
                <li><a href="<?= SITE_URL ?>">ホーム</a></li>
                <li><a href="<?= SITE_URL ?>/earth_view/">課題を知る</a>
                    <ul class="sub">
                        <li><a href="<?= SITE_URL ?>/submit_subject/">課題を投稿する</a></li>
                        <li><a href="<?= SITE_URL ?>/subject/">課題を見る</a></li>
                    </ul>
                </li>
                <li><a href="<?= SITE_URL ?>/data/">データを見る</a></li>
                <li><a href="<?= SITE_URL ?>/posts_archive/">活動を知る</a></li>

                <li><a href="/user/login/">支援する</a>
                    <ul class="sub">
                        <li><a href="/">プロジェクト</a></li>
                        <li><a href="<?= SITE_URL ?>/skills/">スキルを活かす</a></li>

/view/email/goteo.html.php 215
    ×
        <p class="crea"><a href="<?php echo LOCALGOOD_WP_BASE_URL . '/user_guide/' ?>"><?php echo Text::get('regular-create'); ?></a></p>*/?>
    ○
        <p class="crea"><a href="<?php echo SITE_URL . '/user_guide/' ?>"><?php echo Text::get('regular-create'); ?></a></p>*/?>

/view/header/menu.html.php 34
    ×
            <li class="create"><a class="button aqua" href="<?php echo LOCALGOOD_WP_BASE_URL ?>/challenge"><?php echo Text::get('regular-create'); ?></a></li>
    ○
            <li class="create"><a class="button aqua" href="<?php echo SITE_URL ?>/challenge"><?php echo Text::get('regular-create'); ?></a></li>

/view/m/footer.html.php 49-55
    ×
                    <li><a href="<?= LOCALGOOD_WP_BASE_URL ?>/about/">LOCAL GOODについて</a></li>
                    <li><a href="<?= LOCALGOOD_WP_BASE_URL ?>/riyou_kiyaku_menu/">利用規約</a></li>
                    <li><a href="<?= LOCALGOOD_WP_BASE_URL ?>/syoutorihikihou/">特定商取引法に基づく表記</a></li>
                    <li><a href="<?= LOCALGOOD_WP_BASE_URL ?>/user_guide/">ユーザーガイド</a></li>
                    <li><a href="<?= LOCALGOOD_WP_BASE_URL ?>/privacypolicy/">プライバシーポリシー</a></li>
                    <li><a href="<?= LOCALGOOD_WP_BASE_URL ?>/mailnews/">メルマガ登録</a></li>
                    <li><a href="<?= LOCALGOOD_WP_BASE_URL ?>/contact/">お問い合わせ</a></li>
    ○
                    <li><a href="<?= SITE_URL ?>/about/">LOCAL GOODについて</a></li>
                    <li><a href="<?= SITE_URL ?>/riyou_kiyaku_menu/">利用規約</a></li>
                    <li><a href="<?= SITE_URL ?>/syoutorihikihou/">特定商取引法に基づく表記</a></li>
                    <li><a href="<?= SITE_URL ?>/user_guide/">ユーザーガイド</a></li>
                    <li><a href="<?= SITE_URL ?>/privacypolicy/">プライバシーポリシー</a></li>
                    <li><a href="<?= SITE_URL ?>/mailnews/">メルマガ登録</a></li>
                    <li><a href="<?= SITE_URL ?>/contact/">お問い合わせ</a></li>

/view/m/header.html.php 29-46
    ×
        <h1><a href="<?= LOCALGOOD_WP_BASE_URL ?>"><img src="/view/css/header/logo.png" alt=""/></a></h1>
        <div class="nav_inner viewport">
            <ul class="nav<?/*flipsnap*/?>">

                <li><a href="<?= LOCALGOOD_WP_BASE_URL ?>/earth_view/">課題を知る</a>
                    <ul class="sub">
                        <li><a href="<?= LOCALGOOD_WP_BASE_URL ?>/submit_subject/">課題を投稿する</a></li>
                        <li><a href="<?= LOCALGOOD_WP_BASE_URL ?>/subject/">課題を見る</a></li>
                    </ul>
                </li>
                <li><a href="<?= LOCALGOOD_WP_BASE_URL ?>/data/">データを見る</a></li>
                <li><a href="<?= LOCALGOOD_WP_BASE_URL ?>/posts_archive/">活動を知る</a></li>

                <li>
                    <a href="/user/login/">支援する</a>
                    <ul class="sub">
                        <li><a href="/">プロジェクト</a></li>
                        <li><a href="<?= LOCALGOOD_WP_BASE_URL ?>/skills/">スキルを活かす</a></li>
    ○
        <h1><a href="<?= SITE_URL ?>"><img src="/view/css/header/logo.png" alt=""/></a></h1>
        <div class="nav_inner viewport">
            <ul class="nav<?/*flipsnap*/?>">

                <li><a href="<?= SITE_URL ?>/earth_view/">課題を知る</a>
                    <ul class="sub">
                        <li><a href="<?= SITE_URL ?>/submit_subject/">課題を投稿する</a></li>
                        <li><a href="<?= SITE_URL ?>/subject/">課題を見る</a></li>
                    </ul>
                </li>
                <li><a href="<?= SITE_URL ?>/data/">データを見る</a></li>
                <li><a href="<?= SITE_URL ?>/posts_archive/">活動を知る</a></li>

                <li>
                    <a href="/user/login/">支援する</a>
                    <ul class="sub">
                        <li><a href="/">プロジェクト</a></li>
                        <li><a href="<?= SITE_URL ?>/skills/">スキルを活かす</a></li>

/local-settings.php 68
    ×
        define('LOCALGOOD_WP_BASE_URL'       , 'http://localhost');
    ○
        ※削除

────────────────────────────────────────────────────────────
2016-02-29 05:39

    解説
        サイト左上の文章を変更。

/view/header.html.php 45
    ×
            <span>横浜の地域課題プラットフォーム</span>
    ○
            <span>クラウド・ファウンディング・サイトを自作する人向けのデモ・サイト</span>

────────────────────────────────────────────────────────────
2016-02-29 06:34

    解説
        キャッチコピーを変更。

/view/header.html.php 89
    ×
                このまち、わたしから未来を創る
    ○
                みんなでプロジェクトを応援する

────────────────────────────────────────────────────────────
2016-02-29 07:36

    解説
        LOG_PATH 定数は使っていないので削除。

/config.php 145
    ×
        define('LOG_PATH'                    , '/var/www/html/localgood/cf.fukuoka.localgood.jp.il3c.com/htdocs/logs/');    ○
        ※削除

/local-settings.php 68
    ×
        define('LOG_PATH'                    , '/var/www/html/localgood/cf.fukuoka.localgood.jp.il3c.com/htdocs/logs/');    ○
        ※削除

────────────────────────────────────────────────────────────
2016-02-29 07:55

    解説
        LG_NAME 定数を削除。

/config.php 145
    ×
        define('LG_NAME'                     , 'LOCAL GOOD FUKUOKA');
    ○
        ※削除

/local-settings.php 68
    ×
        define('LG_NAME'                     , 'LOCAL GOOD FUKUOKA');
    ○
        ※削除

/view/footer.html.php 36
    ×
                <li class="about"><a href="<?= SITE_URL ?>/about/"><?= LG_NAME; ?>について</a></li>
    ○
                <li class="about"><a href="<?= SITE_URL ?>/about/">このサイトについて</a></li>

/view/css/csstidyonline.results.css 2044
    ×
        line-height:16px;
    ○
        ※削除

────────────────────────────────────────────────────────────
// 2016-03-07 19:21 『text2(追加データ).sql』にマージ。
//
//2016-03-01 02:11
//
//    解説
//        purpose, textテーブルに翻訳の追加
//        ユーザー名            …(3〜20文字の半角英数字およびハイフンのみ)
//        メールアドレスを確認  …確認のため、再度メールアドレスの入力をお願いします。
//        パスワード            …(6文字以上の半角英数字)
//        パスワードを認証する  …確認のため、再度パスワードの入力をお願いします。
//
//    実行
//        INSERT INTO `purpose` (`text`, `purpose`, `group`) VALUES ('login-register-userid-field-tips', '(3 a 20 caracteres alfanuméricos y el guión solamente)', 'login');
//        INSERT INTO `purpose` (`text`, `purpose`, `group`) VALUES ('login-register-confirm-field-tips', 'Para la confirmación, gracias a entrar en la dirección de correo electrónico nuevo.', 'login');
//        INSERT INTO `purpose` (`text`, `purpose`, `group`) VALUES ('login-register-password-field-tips', '(Más de 6 caracteres alfanuméricos)', 'login');
//        INSERT INTO `purpose` (`text`, `purpose`, `group`) VALUES ('login-register-confirm_password-field-tips', 'Para la confirmación, gracias a introducir la contraseña de nuevo.', 'login');
//
//        INSERT INTO `text` (`id`, `lang`, `text`) VALUES ('login-register-userid-field-tips', 'ja', '(3〜20文字の半角英数字およびハイフンのみ)');
//        INSERT INTO `text` (`id`, `lang`, `text`) VALUES ('login-register-confirm-field-tips', 'ja', '確認のため、再度メールアドレスの入力をお願いします。');
//        INSERT INTO `text` (`id`, `lang`, `text`) VALUES ('login-register-password-field-tips', 'ja', '(6文字以上の半角英数字)');
//        INSERT INTO `text` (`id`, `lang`, `text`) VALUES ('login-register-confirm_password-field-tips', 'ja', '確認のため、再度パスワードの入力をお願いします。');
//
────────────────────────────────────────────────────────────
// 2016-03-07 19:21 『text2(追加データ).sql』にマージ。
//
//2016-03-01 04:19
//
//    解説
//        カテゴリーの日本語訳
//
//    実行
//        INSERT INTO `category_lang` (`id`, `lang`, `name`, `description`) VALUES ('2', 'ja', 'ソーシャル', '社会変化を促進するプロジェクトは、との問題を解決するか、より良い幸福を達成するために人間関係を強化します。');
//        INSERT INTO `category_lang` (`id`, `lang`, `name`, `description`) VALUES ('6', 'ja', 'コミュニケーション', 'その目的（例えば、市民ジャーナリズム、ドキュメンタリー、ブログ、ラジオ番組のために）、通知非難および/または通信することであるプロジェクト。');
//        INSERT INTO `category_lang` (`id`, `lang`, `name`, `description`) VALUES ('7', 'ja', '技術の', '具体的な問題やニーズを解決するために、ソフトウェア、ハードウェア、ツール、などの技術開発。');
//        INSERT INTO `category_lang` (`id`, `lang`, `name`, `description`) VALUES ('9', 'ja', '商業の', 'ビジネスイニシアチブであり、プロジェクト、および利益を生成することを願っています。');
//        INSERT INTO `category_lang` (`id`, `lang`, `name`, `description`) VALUES ('10', 'ja', '教育の', 'その最も重要な目的の情報や学習プロジェクト。');
//        INSERT INTO `category_lang` (`id`, `lang`, `name`, `description`) VALUES ('11', 'ja', '文化的な', '芸術や文化的な目的を持ったプロジェクト。');
//        INSERT INTO `category_lang` (`id`, `lang`, `name`, `description`) VALUES ('13', 'ja', '生態学的な', '環境、持続可能性、および/または生物多様性のケアに関連しているプロジェクト。');
//        INSERT INTO `category_lang` (`id`, `lang`, `name`, `description`) VALUES ('14', 'ja', '科学的', '研究や調査、回答、解決策、新たな説明を探してプロジェクト。');
//
────────────────────────────────────────────────────────────
// 2016-03-07 19:21 『text2(追加データ).sql』にマージ。
//
//2016-03-01 04:55
//
//    解説
//        スキルの日本語化。
//
//    実行
//        INSERT INTO `purpose` (`text`, `purpose`, `group`) VALUES ('profile-field-skills', 'Por favor, seleccione una habilidad.', 'profile');
////        INSERT INTO `text` (`id`, `lang`, `text`) VALUES ('profile-field-skills', 'ja', 'スキルを選んでください。');
////        INSERT INTO `skill_lang` (`id`, `name`, `lang`, `description`) VALUES ('1', 'スキル１', 'ja', 'スキルの１番');
////        INSERT INTO `skill_lang` (`id`, `name`, `lang`, `description`) VALUES ('2', 'スキル２', 'ja', 'スキルの２番');
////        INSERT INTO `skill_lang` (`id`, `name`, `lang`, `description`) VALUES ('3', 'スキル３', 'ja', 'スキルの３番');
//
────────────────────────────────────────────────────────────
// 2016-03-07 19:21 『text2(追加データ).sql』にマージ。
//
//2016-03-01 05:36
//
//    解説
//        [私のプロフィール] - [環境設定] ページの「はい」「いいえ」の日本語化。
//
//    実行
//        INSERT INTO `purpose` (`text`, `purpose`, `group`) VALUES ('user-preferences-yes', 'sí', 'user');
//        INSERT INTO `purpose` (`text`, `purpose`, `group`) VALUES ('user-preferences-no', 'no', 'user');
//        INSERT INTO `text` (`id`, `lang`, `text`) VALUES ('user-preferences-yes', 'ja', 'はい');
//        INSERT INTO `text` (`id`, `lang`, `text`) VALUES ('user-preferences-no', 'ja', 'いいえ');
//
────────────────────────────────────────────────────────────
// 2016-03-07 19:21 『text2(追加データ).sql』にマージ。
//
//2016-03-01 06:20
//
//    解説
//        公開プロフィール画面の日本語化。
//
//    実行
//        INSERT INTO `purpose` (`text`, `purpose`, `group`) VALUES ('profile-user_detail-header', 'usuario detalles', 'profile');
//        INSERT INTO `purpose` (`text`, `purpose`, `group`) VALUES ('profile-skills-header', 'habilidad', 'profile');
//        INSERT INTO `text` (`id`, `lang`, `text`) VALUES ('profile-user_detail-header', 'ja', 'ユーザー詳細');
//        INSERT INTO `text` (`id`, `lang`, `text`) VALUES ('profile-skills-header', 'ja', 'スキル');
//
────────────────────────────────────────────────────────────
// 2016-03-07 19:21 『text2(追加データ).sql』にマージ。
//
//2016-03-01 06:42
//
//    解説
//        ディスカバー画面の日本語化。
//
//    実行
//        INSERT INTO `purpose` (`text`, `purpose`, `group`) VALUES ('discover-searcher-byskill-header', 'habilidad', 'discover');
//        INSERT INTO `text` (`id`, `lang`, `text`) VALUES ('discover-searcher-byskill-header', 'ja', 'スキル別');
//
────────────────────────────────────────────────────────────
// 2016-03-07 19:21 『text2(追加データ).sql』にマージ。
//
//2016-03-01 07:50
//
//    解説
//        page_node テーブルを翻訳
//
//    実行
//        INSERT INTO `page_node` (`page`, `node`, `lang`, `content`) VALUES ('about', 'goteo', 'ja', '<p>サイト名は、集団の資金調達（寄付金）と分散協調（サービス、インフラなど）のためのソーシャルネットワークです。オープンソースとオープンナレッジを共通の利益に貢献するとしているプロジェクトへの投資のためのプラットフォーム。ソシア、文化、技術的または教育の領域で、自律的、創造的で革新的なプロジェクトの開発のためのコミュニティ、それは社会全体のための新しい機会を作成します。</p><p>&nbsp;</p>');
//        INSERT INTO `page_node` (`page`, `node`, `lang`, `content`) VALUES ('contact', 'goteo', 'ja', '<div class=\"contact-info\" style=\"color: #58595b; width: 360px; font-size: 12px; padding: 5px; line-height: 16px;\"><span class=\"intro-tit\" style=\"font-size: 21px; font-weight: bold; line-height: 24px;\">すぐにあなたが探しているものを見つけるためにこれらのリンクを使用します。</span><ul style=\"margin-left: 0; padding-left: 0;\"><li style=\"color: #38b5b1; margin-left: 0; padding-left: 0; list-style-position: inside; padding-top: 2px; padding-bottom: 2px;\"><a href=\"/faq\" style=\"color: #38b5b1; text-decoration: none;\" target=\"_blank\">FAQ - よくあるご質問</a></li><li style=\"color: #38b5b1; margin-left: 0; padding-left: 0; list-style-position: inside; padding-top: 2px; padding-bottom: 2px;\"><a href=\"/glossary\" style=\"color: #38b5b1; text-decoration: none;\" target=\"_blank\">マイクロファイナンスの用語集</a></li><li style=\"color: #38b5b1; margin-left: 0; padding-left: 0; list-style-position: inside; padding-top: 2px; padding-bottom: 2px;\"><a href=\"/press\" style=\"color: #38b5b1; text-decoration: none;\" target=\"_blank\">プレスキット SiteName</a></li><li style=\"color: #38b5b1; margin-left: 0; padding-left: 0; list-style-position: inside; padding-top: 2px; padding-bottom: 2px;\"><a href=\"/service/workshop\" style=\"color: #38b5b1; text-decoration: none;\" target=\"_blank\">ワークショップ</a></li></ul>SiteName は、集団の資金調達（寄付金）と分散協調（サービス、インフラなど）のためのソーシャルネットワークです。オープンソースとオープンコンテンツを共通の利益に貢献するとしているプロジェクトへの投資のためのプラットフォーム。</div>');
//        INSERT INTO `page_node` (`page`, `node`, `lang`, `content`) VALUES ('howto', 'goteo', 'ja', '<div style=\"width:430px; float:left\"><div style=\"font-size:14px; line-height:19px; padding-right:16px; margin-top:16px;\">SiteName は、オープンソースとオープンナレッジを共通の利益に貢献するとしているプロジェクトへの投資のためのプラットフォームです。無料またはオープンライセンス（例えば、クリエイティブ・コモンズ、またはGPL）によって支配集団リターンの種類を与えるために目的を持って、自律的、創造的で革新的なプロジェクトの開発のためのコミュニティ。<p>それは、あなたが\'のための資金調達を見つけたい活動に関連したDNAのオープン、オープンデータ、知識、デジタルコンテンツおよびその他のリソースを得たプロジェクトです。<br /><br />SiteName を使用すると、サイト名のコミュニティによって協調融資と支援のためのプロジェクトを提案したい場合は、「知っている必要があり、以下の条件および要件に案内されます。あなたは以下の点のいずれかの上の任意のより多くの情報が必要な場合、我々はあなたが読んでお勧めします<a href=\"/faq\">私たちの FAQ</a>。</p></div><p>&nbsp;</p><form action=\"/project/create\" method=\"post\"><input class=\"checkbox\" id=\"create_accept\" name=\"confirm\" type=\"checkbox\" value=\"true\" />&nbsp;<span style=\"font-size:12px;\"><label class=\"unselected\" for=\"create_accept\">私が読んで持って、プロジェクトサイト名を作成するための条件と要件を理解し、受け入れ、処理するよう<a href=\"/legal/privacy\">個人情報保護方針</a> プラットフォーム。</label><br /></span><p><span style=\"font-size:12px;\">&nbsp;</span></p><span style=\"font-size:12px;\"><button class=\"disabled\" disabled=\"disabled\" id=\"create_continue\" name=\"action\" type=\"submit\" value=\"continue\">続けます</button></span></form></div><div style=\"width:430px; float:right; padding-right:16px; margin-top:16px;\"><span style=\"font-size:14px;\">条件</span><p><span style=\"color:#808285; line-height:16px;\">1. 私のプロジェクトは、特定の経済的貢献と引き換えに、個々の報酬を提供する場合、私は私が私が尋ねた最小量を得るプラットフォームと場合には、私の共同金融に確立されたコミットメントを果たしていきます。<br /><br /><strong>2</strong>. また、私はオープンソース財団と法的な契約に準拠して資金調達を求めた瞬間に選ばれたライセンスの下でサイト名プラットフォームに接続約束した集団的リターンを、公開する約束を遵守しなければなりません。<br /><br /><strong>3.</strong> 私は最適なプロジェクトを遂行するために共同出資の最小値を求めなければなりません。最小の協調融資を上げると私は最適な資金調達に到達するまで、私は協調融資の第二ラウンドに着手することができ、定期的に情報が送信されますその上に生産開始、と一致します。 &nbsp;<br /><br /><strong>4</strong>. プロジェクトの目的は、慈善団体、政治の資金調達キャンペーンのまたは任意の他のタイプ、犯罪者や他の人に対して目的としていないのどちらも、製品または既に生産サービスの販売ではありません。</span></p><p>&nbsp;</p><p><span style=\"font-size:14px;\">資格<p><span style=\"color:#808285; line-height:16px;\">&middot; 私は18歳以上です。</span><br /><span style=\"color:#808285; line-height:16px;\">&middot; 私は銀行口座を持っています><div style=\"font-size:11px; color:#808285; float:left; clear:left; margin-top:20px; margin-right:10px; \">あなたは、あなたの個人データの処理のために、あなたの同意を与えます。この目的のために、ポータルの責任が確立しています<a href=\"/legal/privacy\">個人情報保護方針</a>  ここで、あなたは、このフォームを通じて提供されたデータだけでなく、その人の権利を説明する目的を知ることができるようになります。</div>');
//
────────────────────────────────────────────────────────────
// 2016-03-07 19:21 『text2(追加データ).sql』にマージ。
//
//2016-03-01 07:50
//
//    解説
//        page テーブルを翻訳
//
//    実行
//        INSERT INTO `page_lang` (`id`, `lang`, `name`, `description`) VALUES ('about', 'ja', 'アバウト', 'アバウト');
//        INSERT INTO `page_lang` (`id`, `lang`, `name`, `description`) VALUES ('big-error', 'ja', 'BIGエラー', '内部サーバーエラーなど');
//        INSERT INTO `page_lang` (`id`, `lang`, `name`, `description`) VALUES ('contact', 'ja', 'お問い合わせ', 'お問い合わせフォーム');
//        INSERT INTO `page_lang` (`id`, `lang`, `name`, `description`) VALUES ('error', 'ja', '標準エラー', 'URLは、コントローラと一致していません');
//        INSERT INTO `page_lang` (`id`, `lang`, `name`, `description`) VALUES ('howto', 'ja', 'プロジェクトを作成します。', 'どのようにプロジェクトを作成します');
//        INSERT INTO `page_lang` (`id`, `lang`, `name`, `description`) VALUES ('legal', 'ja', '法的', '法的');
//        INSERT INTO `page_lang` (`id`, `lang`, `name`, `description`) VALUES ('maintenance', 'ja', 'メンテナンス', 'メンテナンス');
//        INSERT INTO `page_lang` (`id`, `lang`, `name`, `description`) VALUES ('privacy', 'ja', 'プライバシー', 'プライバシー');
//        INSERT INTO `page_lang` (`id`, `lang`, `name`, `description`) VALUES ('terms', 'ja', '規約と条件', '規約と条件');
//
────────────────────────────────────────────────────────────
// 2016-03-07 19:21 『text2(追加データ).sql』にマージ。
//
//2016-03-01 07:50
//
//    解説
//        page_node テーブルを更新
//
//    実行
//        UPDATE `page_node` SET `name`='プロジェクトを作成します。', `description`='どのようにプロジェクトを作成します' WHERE `page`='howto' and`node`='goteo' and`lang`='ja';
//
────────────────────────────────────────────────────────────// 2016-03-07 19:21 『text2(追加データ).sql』にマージ。
//
2016-03-01 11:15
//
    解説
//        ・データベースの skill, skill_lang テーブルの作り直し、データを入れなおし。
        ・/library/superform/view/element/checkboxescustom.html.php を一から書き直し。
        

    実行
//        CREATE TABLE `skill` (
//          `id` INT NOT NULL,
//          `name` VARCHAR(50) NULL,
//          `description` VARCHAR(50) NULL,
//          `parent_skill_id` INT NULL DEFAULT 0,
//          `order` INT NULL,
//          PRIMARY KEY (`id`));
//
//        CREATE TABLE `skill_lang` (
//          `id` INT NOT NULL,
//          `name` VARCHAR(50) NULL,
//          `lang` VARCHAR(50) NULL,
//          `description` VARCHAR(50) NULL,
//          PRIMARY KEY (`id`));
//
//        INSERT INTO `skill` (`id`, `name`, `description`, `parent_skill_id`, `order`) VALUES ('1', 'A Gyo', 'a gyo', '0', '1');
//        INSERT INTO `skill` (`id`, `name`, `description`, `parent_skill_id`, `order`) VALUES ('2', 'A', 'a', '1', '2');
//        INSERT INTO `skill` (`id`, `name`, `description`, `parent_skill_id`, `order`) VALUES ('3', 'I', 'i', '1', '3');
//        INSERT INTO `skill` (`id`, `name`, `description`, `parent_skill_id`, `order`) VALUES ('4', 'Ka Gyo', 'ka gyo', '0', '4');
//        INSERT INTO `skill` (`id`, `name`, `description`, `parent_skill_id`, `order`) VALUES ('5', 'Ka', 'ka', '4', '5');
//        INSERT INTO `skill` (`id`, `name`, `description`, `parent_skill_id`, `order`) VALUES ('6', 'Ki', 'ki', '4', '6');

//        INSERT INTO `skill_lang` (`id`, `name`, `lang`, `description`) VALUES ('1', 'あ行', 'ja', 'あの行');
//        INSERT INTO `skill_lang` (`id`, `name`, `lang`, `description`) VALUES ('2', 'あ', 'ja', 'あ');
//        INSERT INTO `skill_lang` (`id`, `name`, `lang`, `description`) VALUES ('3', 'い', 'ja', 'い');
//        INSERT INTO `skill_lang` (`id`, `name`, `lang`, `description`) VALUES ('4', 'か行', 'ja', 'か行');
//        INSERT INTO `skill_lang` (`id`, `name`, `lang`, `description`) VALUES ('5', 'か', 'ja', 'か');
//        INSERT INTO `skill_lang` (`id`, `name`, `lang`, `description`) VALUES ('6', 'き', 'ja', 'き');

/library/superform/view/element/checkboxescustom.html.php
    ×
        ※全文削除
    ○
        <?php
        foreach ($this['options'] as $key => $checkbox){
            if(empty($checkbox->category)){
                if($key != 0)
                {
                    // 最初の要素以外は、＜ul＞タグを一旦閉じます。
                    echo '</ul>';
                }

                // 大見出し
                echo '<p>' . $checkbox->label . '</p>';
                // 開始ulタグ
                echo '<ul';
                if(PC_VIEW){
                    echo ' class="heightLineParent"';
                }
                echo '>';

            } else {
                // 小見出し
                echo '<li>' . $checkbox->getInnerHTML() . '</li>';
            }
        }

        // 終了ulタグ
        echo '</ul>';

────────────────────────────────────────────────────────────// 「2016-03-01 11:15」版に変更を統合。
//
//2016-03-03 02:11
//
//    解説
//        skill、skill_lang テーブルの id 列は、文字列型ではなく 数値型が正しい。
//
//    実行
//        ALTER TABLE `skill` 
//        CHANGE COLUMN `id` `id` INT NOT NULL ,
//        CHANGE COLUMN `parent_skill_id` `parent_skill_id` INT NULL DEFAULT 0 ;
//
//        ALTER TABLE `skill_lang` 
//        CHANGE COLUMN `id` `id` INT NOT NULL ;
//
//        INSERT INTO `skill` (`id`, `name`, `description`, `parent_skill_id`, `order`) VALUES ('1', 'A Gyo', 'a gyo', '0', '1');
//        INSERT INTO `skill` (`id`, `name`, `description`, `parent_skill_id`, `order`) VALUES ('2', 'A', 'a', '1', '2');
//        INSERT INTO `skill` (`id`, `name`, `description`, `parent_skill_id`, `order`) VALUES ('3', 'I', 'i', '1', '3');
//        INSERT INTO `skill` (`id`, `name`, `description`, `parent_skill_id`, `order`) VALUES ('4', 'Ka Gyo', 'ka gyo', '0', '4');
//        INSERT INTO `skill` (`id`, `name`, `description`, `parent_skill_id`, `order`) VALUES ('5', 'Ka', 'ka', '4', '5');
//        INSERT INTO `skill` (`id`, `name`, `description`, `parent_skill_id`, `order`) VALUES ('6', 'Ki', 'ki', '4', '6');

//        INSERT INTO `skill_lang` (`id`, `name`, `lang`, `description`) VALUES ('1', 'あ行', 'ja', 'あの行');
//        INSERT INTO `skill_lang` (`id`, `name`, `lang`, `description`) VALUES ('2', 'あ', 'ja', 'あ');
//        INSERT INTO `skill_lang` (`id`, `name`, `lang`, `description`) VALUES ('3', 'い', 'ja', 'い');
//        INSERT INTO `skill_lang` (`id`, `name`, `lang`, `description`) VALUES ('4', 'か行', 'ja', 'か行');
//        INSERT INTO `skill_lang` (`id`, `name`, `lang`, `description`) VALUES ('5', 'か', 'ja', 'か');
//        INSERT INTO `skill_lang` (`id`, `name`, `lang`, `description`) VALUES ('6', 'き', 'ja', 'き');

────────────────────────────────────────────────────────────
2016-03-03 03:59

    解説
        /view/images フォルダーと、その中の画像を全て削除。

/view/images
/view/images/*

    実行
        ★/view/images フォルダーと、その中の画像を全て削除。

────────────────────────────────────────────────────────────
2016-03-03 04:00

    解説
        /view/images フォルダーの中の画像を使っていた箇所を、
        /view/css フォルダーの中の画像を使うように変更。

/view/css/projects/common.css 27-41
    ×
        .widget.project .image .tagmark.green {
            background:url('/view/images/project/tagmark_green.png') 0 0 no-repeat;
        }

        .widget.project .image .tagmark.violet {
            background: url('/view/images/project/tagmark_violet.png') 0 0 no-repeat;
        }

        .widget.project .image .tagmark.red {
            background:url('/view/images/project/tagmark_red.png') 0 0 no-repeat;
        }

        .widget.project .image .tagmark.grey {
            background:url('/view/images/project/tagmark_grey.png') 0 0 no-repeat;
        }

    ○
        .widget.project .image .tagmark.green {
            background:url('/view/css/project/tagmark_green.png') 0 0 no-repeat;
        }

        .widget.project .image .tagmark.violet {
            background: url('/view/css/project/tagmark_violet.png') 0 0 no-repeat;
        }

        .widget.project .image .tagmark.red {
            background:url('/view/css/project/tagmark_red.png') 0 0 no-repeat;
        }

        .widget.project .image .tagmark.grey {
            background:url('/view/css/project/tagmark_grey.png') 0 0 no-repeat;
        }

────────────────────────────────────────────────────────────
2016-03-03 06:58

    解説
        サポートの終わっている PEAR ライブラリを削除していく方針とし、別の書き方に置換。

    実行
        /data フォルダーを作成。

/model/image.php 456-518
    ×
        /**
         * Muestra la imagen en pantalla.
         * @param type int    $width
         * @param type int    $height
         */
        public function display ($width, $height, $crop) {
            require_once PEAR . 'Image/Transform.php';
            $it =& \Image_Transform::factory('GD');
            if (\PEAR::isError($it)) {
                die($it->getMessage() . '<br />' . $it->getDebugInfo());
            }

            $cache = $this->dir_cache . $width."x$height" . ($crop ? "c" : "") . DIRECTORY_SEPARATOR;
            if(!is_dir($cache)) mkdir($cache);

            $cache .= $this->name;
            //comprova si existeix  catxe
            if(!is_file($cache)) {
                $it->load($this->dir_originals . $this->name);

                if($crop) {
                    if ($width > $height) {

                        $f = $height / $width;
                        $new_y = round($it->img_x * $f);
                        //

                        if($new_y < $it->img_y) {
                            $at = round(( $it->img_y - $new_y ) / 2);
                            $it->crop($it->img_x, $new_y, 0, $at);
                            $it->img_y = $new_y;
                        }

                        $it->resized = false;
                        $it->scaleByX($width);

                    } else {

                        $f = $width / $height;
                        $new_x = round($it->img_y * $f);

                        if($new_x < $it->img_x) {
                            $at = round(( $it->img_x - $new_x ) / 2);
                            $it->crop($new_x, $it->img_y, $at, 0);
                            $it->img_x = $new_x;
                        }

                        $it->resized = false;
                        $it->scaleByY($height);

                    }

                }
                else $it->fit($width,$height);

                $it->save($cache);
                chmod($cache, 0777);
            }

            header("Content-type: " . $this->type);
            readfile($cache);
            return true;
        }

    ○
        /**
         * 例えば /data/images といったフォルダーにアップロードされている画像を、
         * /data/cache/128x128 といったフォルダーにコピーして、その画像バイナリを読み込みます。
         *
         * キャッシュがある場合はそれをしようし、なければコピーを作成します。
         * この際、crop の指定があれば 画像をリサイズします。
         *
         * @param type int    $new_width
         * @param type int    $new_height
         * @param type bool $crop
         */
        public function display ($new_width, $new_height, $crop) {

            // アップロードされている画像のパス
            $filename1 = $this->dir_originals . $this->name;

            // キャッシュ・ディレクトリの画像パス
            $filename2 = $this->dir_cache . $new_width."x$new_height" . ($crop ? "c" : "") . DIRECTORY_SEPARATOR;
            if(!is_dir($filename2)) {
                mkdir($filename2);
            }

            $filename2 .= $this->name;
            if(!is_file($filename2)) {// キャッシュに画像がなければ
                
                $b_toCopy = false;
                if($crop) {
                    
                    // 元画像のファイルサイズを取得
                    list($original_width, $original_height) = getimagesize($filename1);

                    // ドット抜き拡張子
                    $file_type = strtolower(end(explode('.', $filename1)));
            
                    $b_toSave = true;
                    if ($file_type === "jpg" || $file_type === "jpeg") {
            
                        $original_image = ImageCreateFromJPEG($filename1); //JPEGファイルを読み込む
                        $new_image = ImageCreateTrueColor($new_width, $new_height); // 画像作成
    
                    } elseif ($file_type === "gif") {
    
                        $original_image = ImageCreateFromGIF($filename1); //GIFファイルを読み込む
                        $new_image = ImageCreateTrueColor($new_width, $new_height); // 画像作成
                    
                        /* ----- 透過問題解決 ------ */
                        $alpha = imagecolortransparent($original_image);  // 元画像から透過色を取得する
                        imagefill($new_image, 0, 0, $alpha);       // その色でキャンバスを塗りつぶす
                        imagecolortransparent($new_image, $alpha); // 塗りつぶした色を透過色として指定する
    
                    } elseif ($file_type === "png") {
                    
                        $original_image = ImageCreateFromPNG($filename1); //PNGファイルを読み込む
                        $new_image = ImageCreateTrueColor($new_width, $new_height); // 画像作成
                    
                        /* ----- 透過問題解決 ------ */
                        imagealphablending($new_image, false);  // アルファブレンディングをoffにする
                        imagesavealpha($new_image, true);       // 完全なアルファチャネル情報を保存するフラグをonにする
                    
                    } else {
                        // 何も当てはまらなかった場合、画像をそのままコピーする処理へ。
                        $b_toSave = false;
                        $b_toCopy = true;

                    }

                    if($b_toSave){
                        // 元画像から再サンプリング
                        ImageCopyResampled($new_image,$original_image,0,0,0,0,$new_width,$new_height,$original_width,$original_height);
            
                        // 画像を保存
                        if ($file_type === "jpg" || $file_type === "jpeg") {
                            ImageJPEG($new_image, $filename2);
                        } elseif ($file_type === "gif") {
                            ImageGIF($new_image, $filename2);
                        } elseif ($file_type === "png") {
                            ImagePNG($new_image, $filename2);
                        }
                        
                        // メモリを開放する
                        imagedestroy($new_image);
                        imagedestroy($original_image);
                    }
                                
                } else {
                    $b_toCopy = true;
                    
                }
                
                if($b_toCopy){
                    if( !copy($filename1, $filename2)){
                        echo "failed to copy $file...\n";
                    }
                }
                
                chmod($filename2, 0777);
            }

            header("Content-type: " . $this->type);
            readfile($filename2);
            return true;
        }

────────────────────────────────────────────────────────────
// 「2016-02-25 16:40」にも反映。
2016-03-03 09:39

    解説
        本家スペイン版GOTEO でも配布していない Goteo\Model\Vip を利用している機能を
        削除する方針。
        ソースコードを読んだところ、2013年頃に書かれている機能で
        vip権限を持っているユーザーには、プロフィール編集画面にVIP用のなんらかの画像の
        追加があるという仕組みのようだ。
        もしかするとパトロンになったユーザーになんらかの画面がでてきたのかもしれないがコメントアウトされている。

    実行
//        DELETE FROM `role` WHERE `id`='vip';
//        DELETE FROM `user_role` WHERE `user_id`='root' and`role_id`='vip';

/controller/dashboard.php 98-100
    ×
            // vip/recomendador tiene una imagen adicional
            $vip = ($option == 'profile' && isset($user->roles['vip'])) ? Model\User\Vip::get($user->id) : null;

    ○
            ※削除

/controller/dashboard.php 109
    ×
                        Dashboard\Profile::process_profile($user, $vip, $errors, $log_action);
    ○
                        Dashboard\Profile::process_profile($user, $errors, $log_action);

/controller/dashboard.php 173-175
    ×
                    if (isset($user->roles['vip'])) {
                        $viewData['vip'] = Model\User\Vip::get($user->id);
                    }
    ○
        ※削除

/controller/dashboard/profile.php 29-38
    ×
        /**
         * Tratamiento de formulario de datos de perfil
         * 
         * @param object $user instancia de Model\User  (por referencia)
         * @param object $vip instancia de Model\User\Vip  (por referencia)
         * @param array $errors  (por referencia)
         * @param string $log_action  (por referencia)
         * @return boolean si se guarda bien
         */
        public static function process_profile (&$user, &$vip, &$errors, &$log_action) {
    ○
        /**
         * Tratamiento de formulario de datos de perfil
         * 
         * @param object $user instancia de Model\User  (por referencia)
         * @param array $errors  (por referencia)
         * @param string $log_action  (por referencia)
         * @return boolean si se guarda bien
         */
        public static function process_profile (&$user, &$errors, &$log_action) {

/controller/dashboard/profile.php 71-83
    ×
            // Tratamiento de la imagen vip mediante el modelo User\Vip
            if ($vip instanceof Model\User\Vip) {
                if (isset($_FILES['avatar_upload']) && $_FILES['avatar_upload']['error'] != UPLOAD_ERR_NO_FILE) {
                    $vip->image = $_FILES['vip_image_upload'];
                    $vip->save($errors);
                }

                // tratar si quitan la imagen vip
                if ($vip->image instanceof Image && !empty($_POST['vip_image-' . $vip->image->id . '-remove'])) {
                    $vip->image->remove();
                    $vip->remove();
                }
            }
    ○
        ※削除

/controller/user.php 496-501
    ×
                // a menos que este perfil sea de un vip, no pueden verlo
                if (!isset($user->roles['vip'])) {
                    $_SESSION['jumpto'] = '/user/profile/' . $id . '/' . $show;
                    Message::Info(Text::get('user-login-required-to_see'));
                    throw new Redirection(SEC_URL."/user/login");
                }
    ○
        ※削除

/model/home.php 46-47
    ×
                             'feed' => Text::_('Actividad reciente'),
        //vipsys                     'patrons' => Text::_('Padrinos')
    ○
                             'feed' => Text::_('Actividad reciente')

/model/home.php 54-55
    ×
        //callsys                     'calls' => Text::_('Convocatorias'),
        //vipsys                     'patrons' => Text::_('Padrinos')
    ○
        //callsys                     'calls' => Text::_('Convocatorias')

/model/home.php 74
    ×
        //vipsys                     'patrons' => '/admin/patron',
    ○
        ※削除

/model/user.php 905-929
    ×
        /*
         * Listado simple de los usuarios Colaboradores
         */
        public static function getVips() {

            $list = array();

            $query = static::query("
                SELECT
                    user.id as id,
                    user.name as name
                FROM    user
                INNER JOIN user_role
                    ON  user_role.user_id = user.id
                    AND user_role.role_id = 'vip'
                ORDER BY user.name ASC
                ");

            foreach ($query->fetchAll(\PDO::FETCH_CLASS) as $item) {
                $list[$item->id] = $item->name;
            }

            return $list;
        }

    ○
        ※削除

/view/admin/users/list.html.php 231
    ×
                    <?php echo $user->vip ? Text::_('VIP') : ''; ?>
    ○
        ※削除

────────────────────────────────────────────────────────────
2016-03-03 10:38

    解説
        空っぽのフォルダーが削除されてしまわないよう、ファイルを１つ入れて置きます。

/.gitignore 4
    ×
        data/
    ○
        data/*
        !.gitkeep

/data/.gitkeep

    実行
        /data フォルダーの下に 空っぽのテキスト・ファイルを作成。
        名前は「.gitkeep」とします。
        Windowsで、名前の無いファイルが作れない場合は、FTPソフトを使ってサーバー側で作ってダウンロードします。

────────────────────────────────────────────────────────────
2016-03-03 11:11

    解説
        PEAR ライブラリは 削除。
        GOTEO に最初から入っている PayPal などのプログラムが全部使えなくなる予定。

/library/pear
    ×
        ※全部
    ○
        ※削除

────────────────────────────────────────────────────────────
2016-03-03 13:24

    解説
        PEAR ライブラリ用の設定も削除。

/index.php 52-54
    ×
        // Include path
        //set_include_path(GOTEO_PATH . PATH_SEPARATOR . '.');
    ○
        ※削除

/config.php 31-37
    ×
        define('PEAR', GOTEO_PATH . 'library' . '/' . 'pear' . '/');
        if (function_exists('ini_set')) {
            ini_set('include_path', ini_get('include_path') . PATH_SEPARATOR . PEAR);
        } else {
            throw new Exception("No puedo a�adir las librer�as PEAR al include_path.");
        }
    ○
        ※削除

────────────────────────────────────────────────────────────
2016-03-03 13:44

    解説
        PayPal のコードから PEARライブラリを使っている部分を削除。

/library/paypal/json.php 864-870
    ×
     * @todo Ultimately, this should just call PEAR::isError()
     */
    function isError($data, $code = null)
    {
        if (class_exists('pear')) {
            return PEAR::isError($data, $code);
        } elseif (is_object($data) && (get_class($data) == 'services_json_error' ||

    ○
     * 
     */
    function isError($data, $code = null)
    {
        if (is_object($data) && (get_class($data) == 'services_json_error' ||

/library/paypal/json.php 877-902
    ×
        if (class_exists('PEAR_Error')) {

            class Services_JSON_Error extends PEAR_Error
            {
                function Services_JSON_Error($message = 'unknown error', $code = null,
                                             $mode = null, $options = null, $userinfo = null)
                {
                    parent::PEAR_Error($message, $code, $mode, $options, $userinfo);
                }
            }

        } else {

            /**
             * @todo Ultimately, this class shall be descended from PEAR_Error
             */
            class Services_JSON_Error
            {
                function Services_JSON_Error($message = 'unknown error', $code = null,
                                             $mode = null, $options = null, $userinfo = null)
                {

                }
            }

        }

    ○
        /**
         * 
         */
        class Services_JSON_Error
        {
            function Services_JSON_Error($message = 'unknown error', $code = null,
                                            $mode = null, $options = null, $userinfo = null)
            {

            }
        }

────────────────────────────────────────────────────────────
2016-03-03 13:51

    解説
        paypal ライブラリの中に、PEAR の名前を冠した定数があるが、
        ここから PEAR の名前を外します。
        例えば PEAR_LOG_～ は、 P_LOG_～ に変えます。

/library/paypal/log.php 431-439
    ×
        /**
         * Returns the string representation of a PEAR_LOG_* integer constant.
         *
         * @param int $priority     A PEAR_LOG_* integer constant.
         *
         * @return string           The string representation of $level.
         *
         * @since   Log 1.0
         */
    ○
        /**
         * Returns the string representation of a P_LOG_* integer constant.
         *
         * @param int $priority     A P_LOG_* integer constant.
         *
         * @return string           The string representation of $level.
         *
         * @since   Log 1.0
         */

/library/paypal/log.php 443-450
    ×
            PEAR_LOG_EMERG   => 'emergency',
            PEAR_LOG_ALERT   => 'alert',
            PEAR_LOG_CRIT    => 'critical',
            PEAR_LOG_ERR     => 'error',
            PEAR_LOG_WARNING => 'warning',
            PEAR_LOG_NOTICE  => 'notice',
            PEAR_LOG_INFO    => 'info',
            PEAR_LOG_DEBUG   => 'debug'
    ○
            P_LOG_EMERG   => 'emergency',
            P_LOG_ALERT   => 'alert',
            P_LOG_CRIT    => 'critical',
            P_LOG_ERR     => 'error',
            P_LOG_WARNING => 'warning',
            P_LOG_NOTICE  => 'notice',
            P_LOG_INFO    => 'info',
            P_LOG_DEBUG   => 'debug'

/library/paypal/log.php 456-482
    ×
        /**
         * Returns the the PEAR_LOG_* integer constant for the given string
         * representation of a priority name.  This function performs a
         * case-insensitive search.
         *
         * @param string $name      String containing a priority name.
         *
         * @return string           The PEAR_LOG_* integer contstant corresponding
         *                          the the specified priority name.
         *
         * @since   Log 1.9.0
         */
        function stringToPriority($name)
        {
            $levels = array(
                'emergency' => PEAR_LOG_EMERG,
                'alert'     => PEAR_LOG_ALERT,
                'critical'  => PEAR_LOG_CRIT,
                'error'     => PEAR_LOG_ERR,
                'warning'   => PEAR_LOG_WARNING,
                'notice'    => PEAR_LOG_NOTICE,
                'info'      => PEAR_LOG_INFO,
                'debug'     => PEAR_LOG_DEBUG
            );

            return $levels[strtolower($name)];
        }

    ○
        /**
         * Returns the the P_LOG_* integer constant for the given string
         * representation of a priority name.  This function performs a
         * case-insensitive search.
         *
         * @param string $name      String containing a priority name.
         *
         * @return string           The P_LOG_* integer contstant corresponding
         *                          the the specified priority name.
         *
         * @since   Log 1.9.0
         */
        function stringToPriority($name)
        {
            $levels = array(
                'emergency' => P_LOG_EMERG,
                'alert'     => P_LOG_ALERT,
                'critical'  => P_LOG_CRIT,
                'error'     => P_LOG_ERR,
                'warning'   => P_LOG_WARNING,
                'notice'    => P_LOG_NOTICE,
                'info'      => P_LOG_INFO,
                'debug'     => P_LOG_DEBUG
            );

            return $levels[strtolower($name)];
        }

/library/paypal/log.php 29-45
    ×
        define('PEAR_LOG_EMERG',    0);     /** System is unusable */
        define('PEAR_LOG_ALERT',    1);     /** Immediate action required */
        define('PEAR_LOG_CRIT',     2);     /** Critical conditions */
        define('PEAR_LOG_ERR',      3);     /** Error conditions */
        define('PEAR_LOG_WARNING',  4);     /** Warning conditions */
        define('PEAR_LOG_NOTICE',   5);     /** Normal but significant */
        define('PEAR_LOG_INFO',     6);     /** Informational */
        define('PEAR_LOG_DEBUG',    7);     /** Debug-level messages */

        define('PEAR_LOG_ALL',      bindec('11111111'));  /** All messages */
        define('PEAR_LOG_NONE',     bindec('00000000'));  /** No message */

        /* Log types for PHP's native error_log() function. */
        define('PEAR_LOG_TYPE_SYSTEM',  0); /** Use PHP's system logger */
        define('PEAR_LOG_TYPE_MAIL',    1); /** Use PHP's mail() function */
        define('PEAR_LOG_TYPE_DEBUG',   2); /** Use PHP's debugging connection */
        define('PEAR_LOG_TYPE_FILE',    3); /** Append to a file */

    ○
        define('P_LOG_EMERG',    0);     /** System is unusable */
        define('P_LOG_ALERT',    1);     /** Immediate action required */
        define('P_LOG_CRIT',     2);     /** Critical conditions */
        define('P_LOG_ERR',      3);     /** Error conditions */
        define('P_LOG_WARNING',  4);     /** Warning conditions */
        define('P_LOG_NOTICE',   5);     /** Normal but significant */
        define('P_LOG_INFO',     6);     /** Informational */
        define('P_LOG_DEBUG',    7);     /** Debug-level messages */

        define('P_LOG_ALL',      bindec('11111111'));  /** All messages */
        define('P_LOG_NONE',     bindec('00000000'));  /** No message */

        /* Log types for PHP's native error_log() function. */
        define('P_LOG_TYPE_SYSTEM',  0); /** Use PHP's system logger */
        define('P_LOG_TYPE_MAIL',    1); /** Use PHP's mail() function */
        define('P_LOG_TYPE_DEBUG',   2); /** Use PHP's debugging connection */
        define('P_LOG_TYPE_FILE',    3); /** Append to a file */

/library/paypal/log.php 88
    ×
        public $_priority = PEAR_LOG_INFO;
    ○
        public $_priority = P_LOG_INFO;

/library/paypal/log.php 95
    ×
        public $_mask = PEAR_LOG_ALL;
    ○
        public $_mask = P_LOG_ALL;

/library/paypal/log.php 132
    ×
                      $level = PEAR_LOG_DEBUG)
    ○
                      $level = P_LOG_DEBUG)

/library/paypal/log.php 193
    ×
                        $level = PEAR_LOG_DEBUG)
    ○
                        $level = P_LOG_DEBUG)

/library/paypal/log.php 245
    ×
     * message at the PEAR_LOG_EMERG log level.
    ○
     * message at the P_LOG_EMERG log level.

/library/paypal/log.php 257
    ×
        return $this->log($message, PEAR_LOG_EMERG);
    ○
        return $this->log($message, P_LOG_EMERG);

/library/paypal/log.php 262
    ×
     * message at the PEAR_LOG_ALERT log level.
    ○
     * message at the P_LOG_ALERT log level.

/library/paypal/log.php 274
    ×
        return $this->log($message, PEAR_LOG_ALERT);
    ○
        return $this->log($message, P_LOG_ALERT);

/library/paypal/log.php 279
    ×
     * message at the PEAR_LOG_CRIT log level.
    ○
     * message at the P_LOG_CRIT log level.

/library/paypal/log.php 291
    ×
        return $this->log($message, PEAR_LOG_CRIT);
    ○
        return $this->log($message, P_LOG_CRIT);

/library/paypal/log.php 296
    ×
     * message at the PEAR_LOG_ERR log level.
    ○
     * message at the P_LOG_ERR log level.

/library/paypal/log.php 308
    ×
        return $this->log($message, PEAR_LOG_ERR);
    ○
        return $this->log($message, P_LOG_ERR);

/library/paypal/log.php 313
    ×
     * message at the PEAR_LOG_WARNING log level.
    ○
     * message at the P_LOG_WARNING log level.

/library/paypal/log.php 325
    ×
        return $this->log($message, PEAR_LOG_WARNING);
    ○
        return $this->log($message, P_LOG_WARNING);

/library/paypal/log.php 330
    ×
     * message at the PEAR_LOG_NOTICE log level.
    ○
     * message at the P_LOG_NOTICE log level.

/library/paypal/log.php 342
    ×
        return $this->log($message, PEAR_LOG_NOTICE);
    ○
        return $this->log($message, P_LOG_NOTICE);

/library/paypal/log.php 347
    ×
     * message at the PEAR_LOG_INFO log level.
    ○
     * message at the P_LOG_INFO log level.

/library/paypal/log.php 359
    ×
        return $this->log($message, PEAR_LOG_INFO);
    ○
        return $this->log($message, P_LOG_INFO);

/library/paypal/log.php 364
    ×
     * message at the PEAR_LOG_DEBUG log level.
    ○
     * message at the P_LOG_DEBUG log level.

/library/paypal/log.php 376
    ×
        return $this->log($message, PEAR_LOG_DEBUG);
    ○
        return $this->log($message, P_LOG_DEBUG);

/library/paypal/Log/composite.php 46
    ×
                           $level = PEAR_LOG_DEBUG)
    ○
                           $level = P_LOG_DEBUG)

/library/paypal/Log/composite.php 102-106
    ×
     *                              Valid values are: PEAR_LOG_EMERG,
     *                              PEAR_LOG_ALERT, PEAR_LOG_CRIT,
     *                              PEAR_LOG_ERR, PEAR_LOG_WARNING,
     *                              PEAR_LOG_NOTICE, PEAR_LOG_INFO, and
     *                              PEAR_LOG_DEBUG.
    ○
     *                              Valid values are: P_LOG_EMERG,
     *                              P_LOG_ALERT , P_LOG_CRIT,
     *                              P_LOG_ERR   , P_LOG_WARNING,
     *                              P_LOG_NOTICE, P_LOG_INFO, and
     *                              P_LOG_DEBUG.

/library/paypal/Log/console.php 80
    ×
                         $level = PEAR_LOG_DEBUG)
    ○
                         $level = P_LOG_DEBUG)

/library/paypal/Log/console.php 160-162
    ×
     *                  values are: PEAR_LOG_EMERG, PEAR_LOG_ALERT,
     *                  PEAR_LOG_CRIT, PEAR_LOG_ERR, PEAR_LOG_WARNING,
     *                  PEAR_LOG_NOTICE, PEAR_LOG_INFO, and PEAR_LOG_DEBUG.
    ○
     *                  values are:   P_LOG_EMERG,     P_LOG_ALERT,
     *                  P_LOG_CRIT  , P_LOG_ERR  ,     P_LOG_WARNING,
     *                  P_LOG_NOTICE, P_LOG_INFO , and P_LOG_DEBUG.

/library/paypal/Log/daemon.php 70
    ×
                        $level = PEAR_LOG_DEBUG)
    ○
                        $level = P_LOG_DEBUG)

/library/paypal/Log/daemon.php 196
    ×
     * Converts a PEAR_LOG_* constant into a syslog LOG_* constant.
    ○
     * Converts a P_LOG_* constant into a syslog LOG_* constant.

/library/paypal/Log/daemon.php 199
    ×
     * constants have unique values.  Instead, the PEAR_LOG_* were introduced
    ○
     * constants have unique values.  Instead, the P_LOG_* were introduced

/library/paypal/Log/daemon.php 203
    ×
     * @param int $priority     PEAR_LOG_* value to convert to LOG_* value.
    ○
     * @param int $priority     P_LOG_* value to convert to LOG_* value.

/library/paypal/Log/daemon.php 212-219
    ×
            PEAR_LOG_EMERG   => LOG_EMERG,
            PEAR_LOG_ALERT   => LOG_ALERT,
            PEAR_LOG_CRIT    => LOG_CRIT,
            PEAR_LOG_ERR     => LOG_ERR,
            PEAR_LOG_WARNING => LOG_WARNING,
            PEAR_LOG_NOTICE  => LOG_NOTICE,
            PEAR_LOG_INFO    => LOG_INFO,
            PEAR_LOG_DEBUG   => LOG_DEBUG
    ○
            P_LOG_EMERG   => LOG_EMERG,
            P_LOG_ALERT   => LOG_ALERT,
            P_LOG_CRIT    => LOG_CRIT,
            P_LOG_ERR     => LOG_ERR,
            P_LOG_WARNING => LOG_WARNING,
            P_LOG_NOTICE  => LOG_NOTICE,
            P_LOG_INFO    => LOG_INFO,
            P_LOG_DEBUG   => LOG_DEBUG

/library/paypal/Log/display.php 55
    ×
                         $level = PEAR_LOG_DEBUG)
    ○
                         $level = P_LOG_DEBUG)

/library/paypal/Log/display.php 84-86
    ×
     *                  values are: PEAR_LOG_EMERG, PEAR_LOG_ALERT,
     *                  PEAR_LOG_CRIT, PEAR_LOG_ERR, PEAR_LOG_WARNING,
     *                  PEAR_LOG_NOTICE, PEAR_LOG_INFO, and PEAR_LOG_DEBUG.
    ○
     *                  values are:   P_LOG_EMERG,     P_LOG_ALERT,
     *                  P_LOG_CRIT  , P_LOG_ERR  ,     P_LOG_WARNING,
     *                  P_LOG_NOTICE, P_LOG_INFO , and P_LOG_DEBUG.

/library/paypal/Log/error_log.php 26
    ×
        public $_type = PEAR_LOG_TYPE_SYSTEM;
    ○
        public $_type = P_LOG_TYPE_SYSTEM;

/library/paypal/Log/error_log.php 37
    ×
     * PEAR_LOG_TYPE_MAIL type is used.
    ○
     * P_LOG_TYPE_MAIL type is used.

/library/paypal/Log/error_log.php 53
    ×
                           $level = PEAR_LOG_DEBUG)
    ○
                           $level = P_LOG_DEBUG)

/library/paypal/Log/error_log.php 74-76
    ×
     *                  values are: PEAR_LOG_EMERG, PEAR_LOG_ALERT,
     *                  PEAR_LOG_CRIT, PEAR_LOG_ERR, PEAR_LOG_WARNING,
     *                  PEAR_LOG_NOTICE, PEAR_LOG_INFO, and PEAR_LOG_DEBUG.
    ○
     *                  values are:   P_LOG_EMERG,     P_LOG_ALERT,
     *                  P_LOG_CRIT  , P_LOG_ERR  ,     P_LOG_WARNING,
     *                  P_LOG_NOTICE, P_LOG_INFO , and P_LOG_DEBUG.

/library/paypal/Log/file.php 111
    ×
                      $level = PEAR_LOG_DEBUG)
    ○
                      $level = P_LOG_DEBUG)

/library/paypal/Log/file.php 274-276
    ×
     *                  values are: PEAR_LOG_EMERG, PEAR_LOG_ALERT,
     *                  PEAR_LOG_CRIT, PEAR_LOG_ERR, PEAR_LOG_WARNING,
     *                  PEAR_LOG_NOTICE, PEAR_LOG_INFO, and PEAR_LOG_DEBUG.
    ○
     *                  values are:   P_LOG_EMERG,     P_LOG_ALERT,
     *                  P_LOG_CRIT  , P_LOG_ERR  ,     P_LOG_WARNING,
     *                  P_LOG_NOTICE, P_LOG_INFO , and P_LOG_DEBUG.

/library/paypal/Log/mail.php 80
    ×
                      $level = PEAR_LOG_DEBUG)
    ○
                      $level = P_LOG_DEBUG)

/library/paypal/Log/mail.php 184-186
    ×
     *                  values are: PEAR_LOG_EMERG, PEAR_LOG_ALERT,
     *                  PEAR_LOG_CRIT, PEAR_LOG_ERR, PEAR_LOG_WARNING,
     *                  PEAR_LOG_NOTICE, PEAR_LOG_INFO, and PEAR_LOG_DEBUG.
    ○
     *                  values are:   P_LOG_EMERG,     P_LOG_ALERT,
     *                  P_LOG_CRIT  , P_LOG_ERR  ,     P_LOG_WARNING,
     *                  P_LOG_NOTICE, P_LOG_INFO , and P_LOG_DEBUG.

/library/paypal/Log/mcal.php 75
    ×
                      $level = PEAR_LOG_DEBUG)
    ○
                      $level = P_LOG_DEBUG)

/library/paypal/Log/mcal.php 125-127
    ×
     *                  values are: PEAR_LOG_EMERG, PEAR_LOG_ALERT,
     *                  PEAR_LOG_CRIT, PEAR_LOG_ERR, PEAR_LOG_WARNING,
     *                  PEAR_LOG_NOTICE, PEAR_LOG_INFO, and PEAR_LOG_DEBUG.
    ○
     *                  values are:   P_LOG_EMERG,     P_LOG_ALERT,
     *                  P_LOG_CRIT  , P_LOG_ERR  ,     P_LOG_WARNING,
     *                  P_LOG_NOTICE, P_LOG_INFO , and P_LOG_DEBUG.

/library/paypal/Log/mdb2.php 116
    ×
                     $level = PEAR_LOG_DEBUG)
    ○
                     $level = P_LOG_DEBUG)

/library/paypal/Log/mdb2.php 166-168
    ×
            if (PEAR::isError($this->_db)) {
                return false;
            }
    ○
            // FIXME:     if (PEAR::isError($this->_db)) {
            //                return false;
            //            }

/library/paypal/Log/mdb2.php 229-231
    ×
     *                  values are: PEAR_LOG_EMERG, PEAR_LOG_ALERT,
     *                  PEAR_LOG_CRIT, PEAR_LOG_ERR, PEAR_LOG_WARNING,
     *                  PEAR_LOG_NOTICE, PEAR_LOG_INFO, and PEAR_LOG_DEBUG.
    ○
     *                  values are:   P_LOG_EMERG,     P_LOG_ALERT,
     *                  P_LOG_CRIT  , P_LOG_ERR  ,     P_LOG_WARNING,
     *                  P_LOG_NOTICE, P_LOG_INFO , and P_LOG_DEBUG.

/library/paypal/Log/mdb2.php 275-297
    ×
        if (PEAR::isError($result)) {
            /* We can only handle MDB2_ERROR_NOSUCHTABLE errors. */
            if ($result->getCode() != MDB2_ERROR_NOSUCHTABLE) {
                return false;
            }

            /* Attempt to create the target table. */
            if (!$this->_createTable()) {
                return false;
            }

            /* Recreate our prepared statement resource. */
            $this->_statement->free();
            if (!$this->_prepareStatement()) {
                return false;
            }

            /* Attempt to re-execute the insertion query. */
            $result = $this->_statement->execute($values);
            if (PEAR::isError($result)) {
                return false;
            }
        }
    ○
        // FIXME: if (PEAR::isError($result)) {
        //            /* We can only handle MDB2_ERROR_NOSUCHTABLE errors. */
        //            if ($result->getCode() != MDB2_ERROR_NOSUCHTABLE) {
        //                return false;
        //            }
        //
        //            /* Attempt to create the target table. */
        //            if (!$this->_createTable()) {
        //                return false;
        //            }
        //
        //            /* Recreate our prepared statement resource. */
        //            $this->_statement->free();
        //            if (!$this->_prepareStatement()) {
        //                return false;
        //            }
        //
        //            /* Attempt to re-execute the insertion query. */
        //            $result = $this->_statement->execute($values);
        //            if (PEAR::isError($result)) {
        //                return false;
        //            }
        //        }

/library/paypal/Log/mdb2.php 323-325
    ×
        if (PEAR::isError($result)) {
            return false;
        }
    ○
        // FIXME: if (PEAR::isError($result)) {
        //            return false;
        //        }

/library/paypal/Log/mdb2.php 332-334
    ×
        if (PEAR::isError($result)) {
            return false;
        }
    ○
        // FIXME: if (PEAR::isError($result)) {
        //            return false;
        //        }

/library/paypal/Log/mdb2.php 356
    ×
        return (PEAR::isError($this->_statement) === false);
    ○
        return false; // FIXME: (PEAR::isError($this->_statement) === false);

/library/paypal/Log/null.php 31
    ×
                      $level = PEAR_LOG_DEBUG)
    ○
                      $level = P_LOG_DEBUG)

/library/paypal/Log/null.php 44-46
    ×
     *                  values are: PEAR_LOG_EMERG, PEAR_LOG_ALERT,
     *                  PEAR_LOG_CRIT, PEAR_LOG_ERR, PEAR_LOG_WARNING,
     *                  PEAR_LOG_NOTICE, PEAR_LOG_INFO, and PEAR_LOG_DEBUG.
    ○
     *                  values are:   P_LOG_EMERG,     P_LOG_ALERT,
     *                  P_LOG_CRIT  , P_LOG_ERR  ,     P_LOG_WARNING,
     *                  P_LOG_NOTICE, P_LOG_INFO , and P_LOG_DEBUG.

/library/paypal/Log/observer.php 33-36
    ×
     * PEAR_LOG_EMERG is the highest priority, so we will only hear messages
     * with an integer priority value less than or equal to ours.  It defaults
     * to PEAR_LOG_INFO, which listens to everything except PEAR_LOG_DEBUG.
    ○
     * P_LOG_EMERG is the highest priority, so we will only hear messages
     * with an integer priority value less than or equal to ours.  It defaults
     * to P_LOG_INFO, which listens to everything except P_LOG_DEBUG.

/library/paypal/Log/observer.php 40
    ×
        public $_priority = PEAR_LOG_INFO;
    ○
        public $_priority = P_LOG_INFO;

/library/paypal/Log/observer.php 50
    ×
        function Log_observer($priority = PEAR_LOG_INFO)
    ○
        function Log_observer($priority = P_LOG_INFO)

/library/paypal/Log/observer.php 70
    ×
        function &factory($type, $priority = PEAR_LOG_INFO, $conf = array())
    ○
        function &factory($type, $priority = P_LOG_INFO, $conf = array())

/library/paypal/Log/sql.php 114
    ×
                     $level = PEAR_LOG_DEBUG)
    ○
                     $level = P_LOG_DEBUG)

/library/paypal/Log/sql.php 226-228
    ×
     *                  values are: PEAR_LOG_EMERG, PEAR_LOG_ALERT,
     *                  PEAR_LOG_CRIT, PEAR_LOG_ERR, PEAR_LOG_WARNING,
     *                  PEAR_LOG_NOTICE, PEAR_LOG_INFO, and PEAR_LOG_DEBUG.
    ○
     *                  values are:   P_LOG_EMERG,     P_LOG_ALERT,
     *                  P_LOG_CRIT  , P_LOG_ERR  ,     P_LOG_WARNING,
     *                  P_LOG_NOTICE, P_LOG_INFO , and P_LOG_DEBUG.

/library/paypal/Log/sqlite.php 74
    ×
    function Log_sqlite($name, $ident = '', &$conf, $level = PEAR_LOG_DEBUG)
    ○
    function Log_sqlite($name, $ident = '', &$conf, $level = P_LOG_DEBUG)

/library/paypal/Log/sqlite.php 154-156
    ×
     *                  values are: PEAR_LOG_EMERG, PEAR_LOG_ALERT,
     *                  PEAR_LOG_CRIT, PEAR_LOG_ERR, PEAR_LOG_WARNING,
     *                  PEAR_LOG_NOTICE, PEAR_LOG_INFO, and PEAR_LOG_DEBUG.
    ○
     *                  values are:   P_LOG_EMERG,     P_LOG_ALERT,
     *                  P_LOG_CRIT  , P_LOG_ERR  ,     P_LOG_WARNING,
     *                  P_LOG_NOTICE, P_LOG_INFO , and P_LOG_DEBUG.

/library/paypal/Log/syslog.php 41
    ×
                        $level = PEAR_LOG_DEBUG)
    ○
                        $level = P_LOG_DEBUG)

/library/paypal/Log/syslog.php 90-92
    ×
     *                  values are: PEAR_LOG_EMERG, PEAR_LOG_ALERT,
     *                  PEAR_LOG_CRIT, PEAR_LOG_ERR, PEAR_LOG_WARNING,
     *                  PEAR_LOG_NOTICE, PEAR_LOG_INFO, and PEAR_LOG_DEBUG.
    ○
     *                  values are:   P_LOG_EMERG,     P_LOG_ALERT,
     *                  P_LOG_CRIT  , P_LOG_ERR  ,     P_LOG_WARNING,
     *                  P_LOG_NOTICE, P_LOG_INFO , and P_LOG_DEBUG.

/library/paypal/Log/syslog.php 126-133
    ×
     * Converts a PEAR_LOG_* constant into a syslog LOG_* constant.
     *
     * This function exists because, under Windows, not all of the LOG_*
     * constants have unique values.  Instead, the PEAR_LOG_* were introduced
     * for global use, with the conversion to the LOG_* constants kept local to
     * to the syslog driver.
     *
     * @param int $priority     PEAR_LOG_* value to convert to LOG_* value.
    ○
     * Converts a P_LOG_* constant into a syslog LOG_* constant.
     *
     * This function exists because, under Windows, not all of the LOG_*
     * constants have unique values.  Instead, the P_LOG_* were introduced
     * for global use, with the conversion to the LOG_* constants kept local to
     * to the syslog driver.
     *
     * @param int $priority     P_LOG_* value to convert to LOG_* value.

/library/paypal/Log/syslog.php 142-149
    ×
            PEAR_LOG_EMERG   => LOG_EMERG,
            PEAR_LOG_ALERT   => LOG_ALERT,
            PEAR_LOG_CRIT    => LOG_CRIT,
            PEAR_LOG_ERR     => LOG_ERR,
            PEAR_LOG_WARNING => LOG_WARNING,
            PEAR_LOG_NOTICE  => LOG_NOTICE,
            PEAR_LOG_INFO    => LOG_INFO,
            PEAR_LOG_DEBUG   => LOG_DEBUG
    ○
            P_LOG_EMERG   => LOG_EMERG,
            P_LOG_ALERT   => LOG_ALERT,
            P_LOG_CRIT    => LOG_CRIT,
            P_LOG_ERR     => LOG_ERR,
            P_LOG_WARNING => LOG_WARNING,
            P_LOG_NOTICE  => LOG_NOTICE,
            P_LOG_INFO    => LOG_INFO,
            P_LOG_DEBUG   => LOG_DEBUG

/library/paypal/Log/win.php 46-53
    ×
                        PEAR_LOG_EMERG   => 'red',
                        PEAR_LOG_ALERT   => 'orange',
                        PEAR_LOG_CRIT    => 'yellow',
                        PEAR_LOG_ERR     => 'green',
                        PEAR_LOG_WARNING => 'blue',
                        PEAR_LOG_NOTICE  => 'indigo',
                        PEAR_LOG_INFO    => 'violet',
                        PEAR_LOG_DEBUG   => 'black'
    ○
                        P_LOG_EMERG   => 'red',
                        P_LOG_ALERT   => 'orange',
                        P_LOG_CRIT    => 'yellow',
                        P_LOG_ERR     => 'green',
                        P_LOG_WARNING => 'blue',
                        P_LOG_NOTICE  => 'indigo',
                        P_LOG_INFO    => 'violet',
                        P_LOG_DEBUG   => 'black'

/library/paypal/Log/win.php 73
    ×
                          $level = PEAR_LOG_DEBUG)
    ○
                          $level = P_LOG_DEBUG)

/library/paypal/Log/win.php 212-214
    ×
     *                  values are: PEAR_LOG_EMERG, PEAR_LOG_ALERT,
     *                  PEAR_LOG_CRIT, PEAR_LOG_ERR, PEAR_LOG_WARNING,
     *                  PEAR_LOG_NOTICE, PEAR_LOG_INFO, and PEAR_LOG_DEBUG.
    ○
     *                  values are:   P_LOG_EMERG,     P_LOG_ALERT,
     *                  P_LOG_CRIT  , P_LOG_ERR  ,     P_LOG_WARNING,
     *                  P_LOG_NOTICE, P_LOG_INFO , and P_LOG_DEBUG.

────────────────────────────────────────────────────────────
// 「2016-02-24 00:04」に統合。
//
//2016-03-03 15:23
//
//    解説
//        グーグル翻訳にかけた際、「%s」が「％s」になっている箇所があったので、置換する。
//
//    実行
//        文字列置換。（48箇所置換）
//        texts テーブルをトランケートして、/db/texts.sql、/db/text(グーグル翻訳化).sql を入れなおす。
────────────────────────────────────────────────────────────
2016-03-03 17:04

    解説
        ・ロゴ画像を変えておいた。
        ・画像素材も追加。

/#画像素材
/view/css/header/logo.pnp
/view/m/css/header/logo.pnp

────────────────────────────────────────────────────────────
2016-03-04 17:14
2016-03-04 17:50

    解説
        新規ユーザー・アカウントの　アクティベーション部分のソースを読んでいる最中。
        コメントの追加。

/controller/user.php

    実行
        ★略

────────────────────────────────────────────────────────────
2016-03-04 18:42

    解説
        PayPal や、
        TPV （VISA や MasterCard で支払う銀行）は削除方針。

/controller/admin/accounts.php 197-224
    ×
                    case 'paypal':
                        $err = array();
                        if (Paypal::cancelPreapproval($invest, $err)) {
                            $errors[] = Text::_('Preaproval paypal cancelado.');
                            $log_text = Text::_("El admin %s ha cancelado aporte y preapproval de %s de %s mediante PayPal (id: %s) al proyecto %s del dia %s");
                        } else {
                            $txt_errors = implode('; ', $err);
                            $errors[] = Text::_('Fallo al cancelar el preapproval en paypal: ') . $txt_errors;
                            $log_text = Text::_("El admin %s ha fallado al cancelar el aporte de %s de %s mediante PayPal (id: %s) al proyecto %s del dia %s. <br />Se han dado los siguientes errores: ") . $txt_errors;
                            if ($invest->cancel()) {
                                $errors[] = Text::_('Aporte cancelado');
                            } else{
                                $errors[] = Text::_('Fallo al cancelar el aporte');
                            }
                        }
                        break;
                    case 'tpv':
                        $err = array();
                        if (Tpv::cancelPreapproval($invest, $err)) {
                            $txt_errors = implode('; ', $err);
                            $errors[] = Text::_('Aporte cancelado correctamente. ') . $txt_errors;
                            $log_text = Text::_("El admin %s ha anulado el cargo tpv de %s de %s mediante TPV (id: %s) al proyecto %s del dia %s");
                        } else {
                            $txt_errors = implode('; ', $err);
                            $errors[] = Text::_('Fallo en la operación. ') . $txt_errors;
                            $log_text = Text::_("El admin %s ha fallado al solicitar la cancelación del cargo tpv de %s de %s mediante TPV (id: %s) al proyecto %s del dia %s. <br />Se han dado los siguientes errores:") . $txt_errors;
                        }
                        break;

    ○
                    // ここに、支払い方法別でキャンセル処理を書いてください。

/controller/admin/accounts.php 379-406
    ×
                    case 'paypal':
                        $err = array();
                        if (Paypal::cancelPreapproval($invest, $err)) {
                            $errors[] = Text::_('Preaproval paypal cancelado.');
                            $log_text = Text::_("El admin %s ha cancelado aporte y preapproval de %s de %s mediante PayPal (id: %s) al proyecto %s del dia %s");
                        } else {
                            $txt_errors = implode('; ', $err);
                            $errors[] = Text::_('Fallo al cancelar el preapproval en paypal: ') . $txt_errors;
                            $log_text = Text::_("El admin %s ha fallado al cancelar el aporte de %s de %s mediante PayPal (id: %s) al proyecto %s del dia %s. <br />Se han dado los siguientes errores:") . $txt_errors;
                            if ($invest->cancel()) {
                                $errors[] = Text::_('Aporte cancelado');
                            } else{
                                $errors[] = Text::_('Fallo al cancelar el aporte');
                            }
                        }
                        break;
                    case 'tpv':
                        $err = array();
                        if (Tpv::cancelPreapproval($invest, $err)) {
                            $txt_errors = implode('; ', $err);
                            $errors[] = Text::_('Aporte cancelado correctamente. ') . $txt_errors;
                            $log_text = Text::_("El admin %s ha anulado el cargo tpv de %s de %s mediante TPV (id: %s) al proyecto %s del dia %s");
                        } else {
                            $txt_errors = implode('; ', $err);
                            $errors[] = Text::_('Fallo en la operación. ') . $txt_errors;
                            $log_text = Text::_("El admin %s ha fallado al solicitar la cancelación del cargo tpv de %s de %s mediante TPV (id: %s) al proyecto %s del dia %s. <br />Se han dado los siguientes errores:") . $txt_errors;
                        }
                        break;

    ○
                    // ここに、支払い方法別でキャンセル処理を書いてください。

/controller/admin/accounts.php 427-479
    ×
                    case 'paypal':
                        // a ver si tiene cuenta paypal
                        $projectAccount = Model\Project\Account::get($invest->project);

                        if (empty($projectAccount->paypal)) {
                            // Erroraco!
                            $errors[] = Text::_('El proyecto no tiene cuenta paypal!!, ponersela en la seccion Contrato del dashboard del autor');
                            $log_text = null;

                            // Evento Feed
                            $log = new Feed();
                            $log->setTarget($project->id);
                            $log->populate('proyecto sin cuenta paypal (admin)', '/admin/projects',
                                \vsprintf('El proyecto %s aun no ha puesto su %s !!!', array(
                                    Feed::item('project', $project->name, $project->id),
                                    Feed::item('relevant', 'cuenta PayPal')
                            )));
                            $log->doAdmin('project');
                            unset($log);

                            break;
                        }

                        $invest->account = $projectAccount->paypal;
                        if (Paypal::pay($invest, $errors)) {
                            $errors[] = Text::_('Cargo paypal correcto');
                            $log_text = Text::_("El admin %s ha ejecutado el cargo a %s por su aporte de %s mediante PayPal (id: %s) al proyecto %s del dia %s");
                            $invest->status = 1;
                            
                            // si era incidencia la desmarcamos
                            if ($invest->issue) {
                                Model\Invest::unsetIssue($invest->id);
                                Model\Invest::setDetail($invest->id, 'issue-solved', 'La incidencia se ha dado por resuelta al ejecutar el aporte manualmente por el admin ' . $_SESSION['user']->name);
                            }
                            
                            
                        } else {
                            $txt_errors = implode('; ', $errors);
                            $errors[] = Text::_('Fallo al ejecutar cargo paypal: ') . $txt_errors . '<strong>POSIBLE INCIDENCIA NO COMUNICADA Y APORTE NO CANCELADO, HAY QUE TRATARLA MANUALMENTE</strong>';
                            $log_text = Text::_("El admin %s ha fallado al ejecutar el cargo a %s por su aporte de %s mediante PayPal (id: %s) al proyecto %s del dia %s. <br />Se han dado los siguientes errores:") . $txt_errors;
                        }
                        break;
                    case 'tpv':
                        if (Tpv::pay($invest, $errors)) {
                            $errors[] = Text::_('Cargo sermepa correcto');
                            $log_text = Text::_("El admin %s ha ejecutado el cargo a %s por su aporte de %s mediante TPV (id: %s) al proyecto %s del dia %s");
                            $invest->status = 1;
                        } else {
                            $txt_errors = implode('; ', $errors);
                            $errors[] = Text::_('Fallo al ejecutar cargo sermepa: ') . $txt_errors;
                            $log_text = Text::_("El admin %s ha fallado al ejecutar el cargo a %s por su aporte de %s mediante TPV (id: %s) al proyecto %s del dia %s <br />Se han dado los siguientes errores:") . $txt_errors;
                        }
                        break;

    ○
                    // ここに、支払い方法別で 支払い処理を書いてください。

/controller/cron.php 458-466
    ×
//                                case 'paypal':
//                                    $err = array();
//                                    if (Paypal::cancelPreapproval($invest, $err, true)) {
//                                        $log_text = Text::_("Se ha cancelado aporte y preapproval de %s de %s mediante PayPal (id: %s) al proyecto %s del dia %s");
//                                    } else {
//                                        $txt_errors = implode('; ', $err);
//                                        $log_text = Text::_("Ha fallado al cancelar el aporte de %s de %s mediante PayPal (id: %s) al proyecto %s del dia %s. <br />Se han dado los siguientes errores:") . $txt_errors;
//                                    }
//                                    break;

    ○
                    // ここに、支払い方法別でキャンセル処理を書いてください。

/controller/cron.php 466-475
    ×
                                case 'tpv':
                                    // se habre la operación en optra ventana
                                    $err = array();
                                    if (Tpv::cancelPreapproval($invest, $err, true)) {
                                        $log_text = Text::_("Se ha anulado el cargo tpv de %s de %s mediante TPV (id: %s) al proyecto %s del dia %s");
                                    } else {
                                        $txt_errors = implode('; ', $err);
                                        $log_text = Text::_("Ha fallado al anular el cargo tpv de %s de %s mediante TPV (id: %s) al proyecto %s del dia %s. <br />Se han dado los siguientes errores: ") . $txt_errors;
                                    }
                                    break;
    ○
        ※削除

/controller/cron.php 515-585
    ×
                                case 'paypal':
                                    if (empty($projectAccount->paypal)) {
                                        if ($debug) echo '<br />El proyecto '.$project->name.' no tiene cuenta paypal.<br />';
                                        Model\Invest::setDetail($invest->id, 'no-paypal-account', 'El proyecto no tiene cuenta paypal en el momento de ejecutar el preapproval. Proceso cron/execute');
                                        break;
                                    }

                                    $invest->account = $projectAccount->paypal;
                                    $err = array();
                                    if (Paypal::pay($invest, $err)) {
                                        $log_text = Text::_("Se ha ejecutado el cargo a %s por su aporte de %s mediante PayPal (id: %s) al proyecto %s del dia %s");
                                        if ($debug) echo ' -> Ok';
                                        Model\Invest::setDetail($invest->id, 'executed', 'Se ha ejecutado el preapproval, ha iniciado el pago encadenado. Proceso cron/execute');
                                        // si era incidencia la desmarcamos
                                        if ($invest->issue) {
                                            Model\Invest::unsetIssue($invest->id);
                                            Model\Invest::setDetail($invest->id, 'issue-solved', 'La incidencia se ha dado por resuelta al ejecutarse correctamente en el proceso automático');
                                        }
                                    } else {
                                        $txt_errors = implode('; ', $err);
                                        echo 'Aporte ' . $invest->id . ': Fallo al ejecutar cargo paypal: ' . $txt_errors . '<br />';
                                        @mail(\GOTEO_FAIL_MAIL,
                                            'Fallo al ejecutar cargo Paypal ' . SITE_URL,
                                            'Aporte ' . $invest->id . ': Fallo al ejecutar cargo paypal: ' . $txt_errors);
                                        if ($debug) echo ' -> ERROR!!';
                                        Model\Invest::setDetail($invest->id, 'execution-failed', 'Fallo al ejecutar el preapproval, no ha iniciado el pago encadenado: ' . $txt_errors . '. Proceso cron/execute');

                                        // Notifiacion de incidencia al usuario
                                        // Obtenemos la plantilla para asunto y contenido
                                        $template = Template::get(37);
                                        // Sustituimos los datos
                                        $subject = str_replace('%PROJECTNAME%', $project->name, $template->title);
                                        $search  = array('%USERNAME%', '%PROJECTNAME%', '%PROJECTURL%', '%AMOUNT%', '%DETAILS%');
                                        $replace = array($userData->name, $project->name, SITE_URL . '/project/' . $project->id, $invest->amount, '');
                                        $content = \str_replace($search, $replace, $template->text);
                                        // iniciamos mail
                                        $mailHandler = new Mail();
                                        $mailHandler->from = GOTEO_CONTACT_MAIL;
                                        $mailHandler->to = $userData->email;
                                        $mailHandler->toName = $userData->name;
                                        $mailHandler->subject = $subject;
                                        $mailHandler->content = $content;
                                        $mailHandler->html = true;
                                        $mailHandler->template = $template->id;
                                        if ($mailHandler->send()) {
                                            Model\Invest::setDetail($invest->id, 'issue-notified', "Se ha notificado la incidencia al usuario");
                                        } else {
                                            Model\Invest::setDetail($invest->id, 'issue-notify-failed', "Ha fallado al enviar el mail de notificacion de la incidencia al usuario");
                                            @mail(\GOTEO_FAIL_MAIL,
                                                'Fallo al enviar email de notificacion de incidencia PayPal' . SITE_URL,
                                                'Fallo al enviar email de notificacion de incidencia PayPal: <pre>' . print_r($mailHandler, 1). '</pre>');
                                        }
                                        
                                    }
                                    break;
                                case 'tpv':
                                    // los cargos con este tpv vienen ejecutados de base
                                    if ($debug) echo ' -> Ok';
                                /*
                                    $err = array();
                                    if (Tpv::pay($invest, $err)) {
                                        echo 'Cargo sermepa correcto';
                                        $log_text = "Se ha ejecutado el cargo a %s por su aporte de %s mediante TPV (id: %s) al proyecto %s del dia %s";
                                    } else {
                                        $txt_errors = implode('; ', $err);
                                        echo 'Fallo al ejecutar cargo sermepa: ' . $txt_errors;
                                        $log_text = "Ha fallado al ejecutar el cargo a %s por su aporte de %s mediante TPV (id: %s) al proyecto %s del dia %s <br />Se han dado los siguientes errores: $txt_errors";
                                    }
                                 *
                                 */
                                    break;
    ○
        ※削除

/controller/invest.php 33-34
    ×
        //Goteo\Library\Paypal,
        //Goteo\Library\Tpv;
    ○
        ※削除

/controller/invest.php 42-43
    ×
                    //'tpv' => 'tpv',
                    //'paypal' => 'paypal'
    ○
        ※削除
    
/view/css/csstidyonline.results.css 8519-8527
    ×
        div.widget.project-invest button.pay-tpv
        {
            background:url(/view/css/button/tpv.gif) no-repeat 0 0 transparent;
            height:35px;
            padding:3px;
            text-indent:2000px;
            width:178px;
        }
    ○
        ※削除

/view/css/csstidyonline.results.css 8528-8532
    ×
        div.widget.project-invest button.pay-tpv:hover,div.widget.project-invest button.pay-paypal:hover
        {
            border:1px solid #20b2b3;
        }
    ○
        ※削除

/view/css/project/widget/invest.css 138-158
    ×
        div.widget.project-invest button.pay-tpv {
            background: url('/view/css/button/tpv.gif') no-repeat 0 0 transparent;
            width: 178px;
            height: 35px;
            text-indent: 2000px;
            padding: 3px;
        }

        div.widget.project-invest button.pay-paypal {
            background: url('/view/css/button/paypal.gif') no-repeat 0 0 transparent;
            width: 145px;
            height: 32px;
            text-indent: 2000px;
            padding: 3px;
        }

        div.widget.project-invest button.pay-tpv:hover,
        div.widget.project-invest button.pay-paypal:hover {
            border: 1px solid #20b2b3;
        }
    ○
        ※削除

/view/admin/accounts/details.html.php 49
    ×
        <?php if ($invest->status < 1 || ($invest->method == 'tpv' && $invest->status < 2) ||($invest->method == 'cash' && $invest->status < 2)) : ?>
    ○
        <?php if ($invest->status < 1 || ($invest->method == 'cash' && $invest->status < 2)) : ?>

/view/admin/invests/details.html.php 39
    ×
        <?php if ($project->status == 3 && ($invest->status < 1 || ($invest->method == 'tpv' && $invest->status < 2) ||($invest->method == 'cash' && $invest->status < 2))) : ?>
    ○
        <?php if ($project->status == 3 && ($invest->status < 1 ||($invest->method == 'cash' && $invest->status < 2))) : ?>

/view/admin/accounts/details.html.php 158-175
    ×
    <?php if ($invest->method == 'paypal') : ?>
        <?php if (!isset($_GET['full'])) : ?>
        <p>
            <a href="/admin/accounts/details/<?php echo $invest->id; ?>/?full=show"><?php echo Text::_("Mostrar detalles técnicos"); ?></a>
        </p>
        <?php endif; ?>

        <?php if (!empty($invest->transaction)) : ?>
        <dl>
            <dt><strong><?php echo Text::_("Detalles de la devolución"); ?>:</strong></dt>
            <dd><?php echo Text::_("Hay que ir al panel de paypal para ver los detalles de una devolución"); ?></dd>
        </dl>
        <?php endif ?>
    <?php elseif ($invest->method == 'tpv') : ?>
        <p><?php echo Text::_("Hay que ir al panel del banco para ver los detalles de los aportes mediante TPV."); ?></p>
    <?php else : ?>
        <p><?php echo Text::_("No hay nada que hacer con los aportes manuales."); ?></p>
    <?php endif ?>

    ○
    <p><?php echo Text::_("No hay nada que hacer con los aportes manuales."); ?></p>

/view/m/css/cssmarge_mobile.css 7793-8713
    ×
        div.widget.project-invest button.pay-tpv {
            background: url('/view/css/button/tpv.gif') no-repeat 0 0 transparent;
            width: 178px;
            height: 35px;
            text-indent: 2000px;
            padding: 3px;
        }

        div.widget.project-invest button.pay-paypal {
            background: url('/view/css/button/paypal.gif') no-repeat 0 0 transparent;
            width: 145px;
            height: 32px;
            text-indent: 2000px;
            padding: 3px;
        }

        div.widget.project-invest button.pay-tpv:hover,
        div.widget.project-invest button.pay-paypal:hover {
            border: 1px solid #20b2b3;
        }
    ○
        削除

/view/admin/invests/report.html.php 93-116
    ×
        <tr>
            <td><?php echo Text::_('PayPal'); ?></td>
            <td style="text-align:right;"><?php echo \amount_format($desglose['paypal']) ?></td>
            <td style="text-align:right;"><?php echo \amount_format($goteo['paypal'], 2) ?></td>
            <td style="text-align:right;"><?php echo \amount_format($proyecto['paypal'], 2) ?></td>
        </tr>
        <tr>
            <td><?php echo Text::_('Tpv'); ?></td>
            <td style="text-align:right;"><?php echo \amount_format($desglose['tpv']) ?></td>
            <td style="text-align:right;"><?php echo \amount_format($goteo['tpv'], 2) ?></td>
            <td style="text-align:right;"><?php echo \amount_format($proyecto['tpv'], 2) ?></td>
        </tr>
        <tr>
            <td><?php echo Text::_('Cash'); ?></td>
            <td style="text-align:right;"><?php echo \amount_format($desglose['cash']) ?></td>
            <td style="text-align:right;"><?php echo \amount_format($goteo['cash'], 2) ?></td>
            <td style="text-align:right;"><?php echo \amount_format($proyecto['cash'], 2) ?></td>
        </tr>
        <tr>
            <td><?php echo Text::_('TOTAL'); ?></td>
            <td style="text-align:right;"><?php echo \amount_format(($desglose['paypal'] + $desglose['tpv'] + $desglose['cash']), 2) ?></td>
            <td style="text-align:right;"><?php echo \amount_format(($goteo['paypal'] + $goteo['tpv'] + $goteo['cash']), 2) ?></td>
            <td style="text-align:right;"><?php echo \amount_format(($proyecto['paypal'] + $proyecto['tpv'] + $proyecto['cash']), 2) ?></td>
        </tr>

    ○
        <tr>
            <td><?php echo Text::_('Cash'); ?></td>
            <td style="text-align:right;"><?php echo \amount_format($desglose['cash']   ) ?></td>
            <td style="text-align:right;"><?php echo \amount_format($goteo   ['cash'], 2) ?></td>
            <td style="text-align:right;"><?php echo \amount_format($proyecto['cash'], 2) ?></td>
        </tr>
        <tr>
            <td><?php echo Text::_('TOTAL'); ?></td>
            <td style="text-align:right;"><?php echo \amount_format($desglose['cash'], 2) ?></td>
            <td style="text-align:right;"><?php echo \amount_format($goteo   ['cash'], 2) ?></td>
            <td style="text-align:right;"><?php echo \amount_format($proyecto['cash'], 2) ?></td>
        </tr>

/view/admin/invests/report.html.php 154-353
    ×
        <?php if (!empty($Data['tpv'])) : ?>
            <h4><?php echo Text::_('TPV'); ?></h4>
            <table>
                <tr>
                    <th></th>
                    <th><?php echo Text::_("1a Ronda"); ?></th>
                    <th><?php echo Text::_("2a Ronda"); ?></th>
                    <th><?php echo Text::_('Total'); ?></th>
                    <th></th>
                </tr>
                <tr>
                    <th><?php echo Text::_('Nº Usuarios'); ?></th>
                    <td style="text-align:right;"><?php echo count($Data['tpv']['first']['users']) ?></td>
                    <td style="text-align:right;"><?php echo count($Data['tpv']['second']['users']) ?></td>
                    <td style="text-align:right;"><?php echo count($Data['tpv']['total']['users']) ?></td>
                    <td></td>
                </tr>
                <tr>
                    <th><?php echo Text::_('Nº Operaciones'); ?></th>
                    <td style="text-align:right;"><?php echo $Data['tpv']['first']['invests'] ?></td>
                    <td style="text-align:right;"><?php echo $Data['tpv']['second']['invests'] ?></td>
                    <td style="text-align:right;"><?php echo $Data['tpv']['total']['invests'] ?></td>
                    <td></td>
                </tr>
                <tr>
                    <th><?php echo Text::_('Importe'); ?></th>
                    <td style="text-align:right;"><?php echo \amount_format($Data['tpv']['first']['amount']) ?></td>
                    <td style="text-align:right;"><?php echo \amount_format($Data['tpv']['second']['amount']) ?></td>
                    <td style="text-align:right;"><?php echo \amount_format($Data['tpv']['total']['amount']) ?></td>
                    <td></td>
                </tr>
                <tr>
                    <?php
                    $Data['tpv']['first']['fee']  = $Data['tpv']['first']['amount']  * 0.008;
                    $Data['tpv']['second']['fee'] = $Data['tpv']['second']['amount'] * 0.008;
                    $Data['tpv']['total']['fee']  = $Data['tpv']['total']['amount']  * 0.008;
                    ?>
                    <th>Comisi&oacute;n</th>
                    <td style="text-align:right;"><?php echo \amount_format($Data['tpv']['first']['fee'], 2) ?></td>
                    <td style="text-align:right;"><?php echo \amount_format($Data['tpv']['second']['fee'], 2) ?></td>
                    <td style="text-align:right;"><?php echo \amount_format($Data['tpv']['total']['fee'], 2) ?></td>
                    <td>banco 0,80&#37; de cada operaci&oacute;n</td>
                </tr>
                <tr>
                    <?php
                    $Data['tpv']['first']['net']  = $Data['tpv']['first']['amount']  - $Data['tpv']['first']['fee'];
                    $Data['tpv']['second']['net'] = $Data['tpv']['second']['amount'] - $Data['tpv']['second']['fee'];
                    $Data['tpv']['total']['net']  = $Data['tpv']['total']['amount']  - $Data['tpv']['total']['fee'];
                    ?>
                    <th><?php echo Text::_('Neto'); ?></th>
                    <td style="text-align:right;"><?php echo \amount_format($Data['tpv']['first']['net'], 2) ?></td>
                    <td style="text-align:right;"><?php echo \amount_format($Data['tpv']['second']['net'], 2) ?></td>
                    <td style="text-align:right;"><?php echo \amount_format($Data['tpv']['total']['net'], 2) ?></td>
                    <td></td>
                </tr>
                <tr>
                    <?php
                    $Data['tpv']['first']['goteo']  = $Data['tpv']['first']['net']  * 0.08;
                    $Data['tpv']['second']['goteo'] = $Data['tpv']['second']['net'] * 0.08;
                    $Data['tpv']['total']['goteo']  = $Data['tpv']['total']['net']  * 0.08;
                    ?>
                    <th><?php echo Text::_('Goteo'); ?></th>
                    <td style="text-align:right;"><?php echo \amount_format($Data['tpv']['first']['goteo'], 2) ?></td>
                    <td style="text-align:right;"><?php echo \amount_format($Data['tpv']['second']['goteo'], 2) ?></td>
                    <td style="text-align:right;"><?php echo \amount_format($Data['tpv']['total']['goteo'], 2) ?></td>
                    <td><?php echo Text::_("8%% del neto"); ?></td>
                </tr>
                <tr>
                    <?php
                    $Data['tpv']['first']['project']  = $Data['tpv']['first']['net']  - $Data['tpv']['first']['goteo'];
                    $Data['tpv']['second']['project'] = $Data['tpv']['second']['net'] - $Data['tpv']['second']['goteo'];
                    $Data['tpv']['total']['project']  = $Data['tpv']['total']['net']  - $Data['tpv']['total']['goteo'];
                    ?>
                    <th><?php echo Text::_("Proyecto"); ?></th>
                    <td style="text-align:right;"><?php echo \amount_format($Data['tpv']['first']['project'], 2) ?></td>
                    <td style="text-align:right;"><?php echo \amount_format($Data['tpv']['second']['project'], 2) ?></td>
                    <td style="text-align:right;"><?php echo \amount_format($Data['tpv']['total']['project'], 2) ?></td>
                    <td><?php echo Text::_("92%% del neto"); ?></td>
                </tr>
            </table>
        <?php endif; ?>

        <?php if (!empty($Data['paypal'])) : ?>
            <h4><?php echo Text::_('PayPal'); ?></h4>
            <table>
                <tr>
                    <th></th>
                    <th><?php echo Text::_("1a Ronda"); ?></th>
                    <th><?php echo Text::_("2a Ronda"); ?></th>
                    <th><?php echo Text::_('Total'); ?></th>
                    <th></th>
                </tr>
                <tr>
                    <th><?php echo Text::_('Nº Usuarios'); ?></th>
                    <td style="text-align:right;"><?php echo count($Data['paypal']['first']['users']) ?></td>
                    <td style="text-align:right;"><?php echo count($Data['paypal']['second']['users']) ?></td>
                    <td style="text-align:right;"><?php echo count($Data['paypal']['total']['users']) ?></td>
                    <td><?php echo Text::_("Sin incidencias"); ?></td>
                </tr>
                <tr>
                    <th><?php echo Text::_('Nº Operaciones'); ?></th>
                    <td style="text-align:right;"><?php echo $Data['paypal']['first']['invests'] ?></td>
                    <td style="text-align:right;"><?php echo $Data['paypal']['second']['invests'] ?></td>
                    <td style="text-align:right;"><?php echo $Data['paypal']['total']['invests'] ?></td>
                    <td><?php echo Text::_("Sin incidencias"); ?></td>
                </tr>
                <tr>
                    <th><?php echo Text::_("Importe Incidencias"); ?></th>
                    <td style="text-align:right;"><?php echo \amount_format($Data['paypal']['first']['fail']) ?></td>
                    <td style="text-align:right;"><?php echo \amount_format($Data['paypal']['second']['fail']) ?></td>
                    <td style="text-align:right;"><?php echo \amount_format($Data['paypal']['total']['fail']) ?></td>
                    <td></td>
                </tr>
                <tr>
                    <?php
                    $Data['paypal']['first']['ok']  = $Data['paypal']['first']['amount']  - $Data['paypal']['first']['fail'];
                    $Data['paypal']['second']['ok'] = $Data['paypal']['second']['amount'] - $Data['paypal']['second']['fail'];
                    $Data['paypal']['total']['ok']  = $Data['paypal']['total']['amount']  - $Data['paypal']['total']['fail'];
                    ?>
                    <th><?php echo Text::_("Importe"); ?></th>
                    <td style="text-align:right;"><?php echo \amount_format($Data['paypal']['first']['ok']) ?></td>
                    <td style="text-align:right;"><?php echo \amount_format($Data['paypal']['second']['ok']) ?></td>
                    <td style="text-align:right;"><?php echo \amount_format($Data['paypal']['total']['ok']) ?></td>
                    <td><?php echo Text::_("Preapprovals ejecutados correctamente"); ?></td>
                </tr>
                <tr>
                    <?php
                    $Data['paypal']['first']['goteo']  = $Data['paypal']['first']['ok'] * 0.08;
                    $Data['paypal']['second']['goteo'] = $Data['paypal']['second']['ok'] * 0.08;
                    $Data['paypal']['total']['goteo']  = $Data['paypal']['total']['ok'] * 0.08;
                    ?>
                    <th><?php echo Text::_('Goteo'); ?></th>
                    <td style="text-align:right;"><?php echo \amount_format($Data['paypal']['first']['goteo'], 2) ?></td>
                    <td style="text-align:right;"><?php echo \amount_format($Data['paypal']['second']['goteo'], 2) ?></td>
                    <td style="text-align:right;"><?php echo \amount_format($Data['paypal']['total']['goteo'], 2) ?></td>
                    <td><?php echo Text::_("8%% de las operaciones correctas"); ?></td>
                </tr>
                <tr>
                    <?php
                    $Data['paypal']['first']['project']  = $Data['paypal']['first']['ok']  - $Data['paypal']['first']['goteo'];
                    $Data['paypal']['second']['project'] = $Data['paypal']['second']['ok'] - $Data['paypal']['second']['goteo'];
                    $Data['paypal']['total']['project']  = $Data['paypal']['total']['ok']  - $Data['paypal']['total']['goteo'];
                    ?>
                    <th><?php echo Text::_("Proyecto"); ?></th>
                    <td style="text-align:right;"><?php echo \amount_format($Data['paypal']['first']['project'], 2) ?></td>
                    <td style="text-align:right;"><?php echo \amount_format($Data['paypal']['second']['project'], 2) ?></td>
                    <td style="text-align:right;"><?php echo \amount_format($Data['paypal']['total']['project'], 2) ?></td>
                    <td><?php echo Text::_("92%% de las operaciones correctas"); ?></td>
                </tr>
                <tr>
                    <?php
                    $Data['paypal']['first']['fee_goteo']  = ($Data['paypal']['first']['invests'] * 0.35) + ($Data['paypal']['first']['goteo'] * 0.034);
                    $Data['paypal']['second']['fee_goteo'] = ($Data['paypal']['second']['invests'] * 0.35) + ($Data['paypal']['second']['goteo'] * 0.034);
                    $Data['paypal']['total']['fee_goteo']  = ($Data['paypal']['total']['invests'] * 0.35) + ($Data['paypal']['total']['goteo'] * 0.034);
                    ?>
                    <th><?php echo Text::_("Fee a Goteo"); ?></th>
                    <td style="text-align:right;"><?php echo \amount_format($Data['paypal']['first']['fee_goteo'], 2) ?></td>
                    <td style="text-align:right;"><?php echo \amount_format($Data['paypal']['second']['fee_goteo'], 2) ?></td>
                    <td style="text-align:right;"><?php echo \amount_format($Data['paypal']['total']['fee_goteo'], 2) ?></td>
                    <td><?php echo Text::_("0,35 por operacion + 3,4%% del importe de goteo (8%% del correcto)"); ?></td>
                </tr>
                <tr>
                    <?php
                    $Data['paypal']['first']['fee_project']  = ($Data['paypal']['first']['invests'] * 0.35) + ($Data['paypal']['first']['project'] * 0.034);
                    $Data['paypal']['second']['fee_project'] = ($Data['paypal']['second']['invests'] * 0.35) + ($Data['paypal']['second']['project'] * 0.034);
                    $Data['paypal']['total']['fee_project']  = ($Data['paypal']['total']['invests'] * 0.35) + ($Data['paypal']['total']['project'] * 0.034);
                    ?>
                    <th><?php echo Text::_("Fee al Promotor"); ?></th>
                    <td style="text-align:right;"><?php echo \amount_format($Data['paypal']['first']['fee_project'], 2) ?></td>
                    <td style="text-align:right;"><?php echo \amount_format($Data['paypal']['second']['fee_project'], 2) ?></td>
                    <td style="text-align:right;"><?php echo \amount_format($Data['paypal']['total']['fee_project'], 2) ?></td>
                    <td><?php echo Text::_("0,35 por operacion + 3,4%% del importe del proyecto (8%% del correcto)"); ?></td>
                </tr>
                <tr>
                    <?php
                    $Data['paypal']['first']['net_goteo']  = $Data['paypal']['first']['goteo']  - $Data['paypal']['first']['fee_goteo'];
                    $Data['paypal']['second']['net_goteo'] = $Data['paypal']['second']['goteo'] - $Data['paypal']['second']['fee_goteo'];
                    $Data['paypal']['total']['net_goteo']  = $Data['paypal']['total']['goteo']  - $Data['paypal']['total']['fee_goteo'];
                    ?>
                    <th><?php echo Text::_("Neto Goteo"); ?></th>
                    <td style="text-align:right;"><?php echo \amount_format($Data['paypal']['first']['net_goteo'], 2) ?></td>
                    <td style="text-align:right;"><?php echo \amount_format($Data['paypal']['second']['net_goteo'], 2) ?></td>
                    <td style="text-align:right;"><?php echo \amount_format($Data['paypal']['total']['net_goteo'], 2) ?></td>
                    <td></td>
                </tr>
                <tr>
                    <?php
                    $Data['paypal']['first']['net_project']  = $Data['paypal']['first']['project']  - $Data['paypal']['first']['fee_project'];
                    $Data['paypal']['second']['net_project'] = $Data['paypal']['second']['project'] - $Data['paypal']['second']['fee_project'];
                    $Data['paypal']['total']['net_project']  = $Data['paypal']['total']['project']  - $Data['paypal']['total']['fee_project'];
                    ?>
                    <th><?php echo Text::_("Neto Proyecto"); ?></th>
                    <td style="text-align:right;"><?php echo \amount_format($Data['paypal']['first']['net_project'], 2) ?></td>
                    <td style="text-align:right;"><?php echo \amount_format($Data['paypal']['second']['net_project'], 2) ?></td>
                    <td style="text-align:right;"><?php echo \amount_format($Data['paypal']['total']['net_project'], 2) ?></td>
                    <td></td>
                </tr>
            </table>
        <?php endif; ?>

    ○
        ※削除

/view/admin/invests/report.html.php 112-113
    ×
            <th><?php echo Text::_('PayPal'); ?></th>
            <th><?php echo Text::_('Tpv'); ?></th>
    ○
        ※削除

/view/admin/invests/report.html.php 118-119
    ×
            <td style="text-align:right;"><?php echo \amount_format($estado[$id]['paypal']) ?></td>
            <td style="text-align:right;"><?php echo \amount_format($estado[$id]['tpv']) ?></td>
    ○
        ※削除

/view/admin/invests/report.html.php 128-129
    ×
            <th><?php echo Text::_('PayPal'); ?></th>
            <th><?php echo Text::_('Tpv'); ?></th>
    ○
        ※削除

/view/admin/invests/report.html.php 134-135
    ×
            <td style="text-align:right;"><?php echo \amount_format($usuario[$user->user]['paypal']) ?></td>
            <td style="text-align:right;"><?php echo \amount_format($usuario[$user->user]['tpv']) ?></td>
    ○
        ※削除

/model/invest.php 37
    ×
            $method, // metodo de pago paypal/tpv
    ○
            $method, // 支払い方法。'cash','axes'。

/model/invest.php 1047-1050
    ×
                //'paypal' => Text::_('Paypal'),
                'axes' => Text::_('AXES'),
                'tpv'    => Text::_('Tarjeta'),
                'cash'   => Text::_('Manual')
    ○
                'axes' => Text::_('AXES'),
                'cash'   => Text::_('Manual')

────────────────────────────────────────────────────────────
2016-03-04 19:55

    解説
        テスト中は [CASH]ボタン が表示されるように改造。

/view/project/widget/invest.html.php
    ×
        <?php if (ACL::check('/admin')) : ?>

    ○
        <?php if (
                    ACL::check('/admin')
                ||  \GOTEO_ENV != 'real' // テスト中は [現金]ボタンを表示
            ) : ?>

────────────────────────────────────────────────────────────
2016-03-04 20:16

    解説
        PayPal、TPV のライブラリを削除。

/library/paypal
    ×
        ※フォルダーごと全部
    ○
        ※削除

/library/tpv
    ×
        ※フォルダーごと全部
    ○
        ※削除

/library/paypal.php
    ○
        ※ファイル削除

/library/tpv.php
    ○
        ※ファイル削除

/controller/cron.php 27-29
    ×
        Goteo\Library\Mail,
        Goteo\Library\Paypal,
        Goteo\Library\Tpv;
    ○
        Goteo\Library\Mail;

/controller/admin/accounts.php 26-27
    ×
        Goteo\Library\Tpv,
        Goteo\Library\Paypal,
    ○
        ※削除

/view/admin/accounts/details.html.php 21-23
    ×
        use Goteo\Library\Text,
            Goteo\Library\Paypal,
            Goteo\Library\Tpv;
    ○
        use Goteo\Library\Text;

/controller/cron.php 769-778
    ×
                if (Paypal::doPay($invest, $errors)) {
                    echo 'Aporte (id: '.$invest->id.') pagado al proyecto. Ver los detalles en la <a href="/admin/accounts/details/'.$invest->id.'">gestion de transacciones</a><br />';
                    $log_text = Text::_("Se ha realizado el pago de %s PayPal al proyecto %s por el aporte de %s (id: %s) del dia %s");
                    Model\Invest::setDetail($invest->id, 'payed', 'Se ha realizado el pago secundario al proyecto. Proceso cron/doPay');

                } else {
                    echo 'Fallo al pagar al proyecto el aporte (id: '.$invest->id.'). Ver los detalles en la <a href="/admin/accounts/details/'.$invest->id.'">gestion de transacciones</a><br />' . implode('<br />', $errors);
                    $log_text = Text::_("Ha fallado al realizar el pago de %s PayPal al proyecto %s por el aporte de %s (id: %s) del dia %s");
                    Model\Invest::setDetail($invest->id, 'pay-failed', 'Fallo al realizar el pago secundario: ' . implode('<br />', $errors) . '. Proceso cron/doPay');
                }

    ○
                echo 'Fallo al pagar al proyecto el aporte (id: '.$invest->id.'). Ver los detalles en la <a href="/admin/accounts/details/'.$invest->id.'">gestion de transacciones</a><br />' . implode('<br />', $errors);
                $log_text = Text::_("Ha fallado al realizar el pago de %s PayPal al proyecto %s por el aporte de %s (id: %s) del dia %s");
                Model\Invest::setDetail($invest->id, 'pay-failed', 'Fallo al realizar el pago secundario: ' . implode('<br />', $errors) . '. Proceso cron/doPay');

/view/admin/accounts/details.html.php 176-199
    ×
        <?php if (isset($_GET['full']) && $_GET['full'] == 'show') : ?>
        <div class="widget">
            <h3><?php echo Text::_("Detalles técnicos de la transaccion"); ?></h3>
            <?php if (!empty($invest->preapproval)) :
                $details = Paypal::preapprovalDetails($invest->preapproval);
                ?>
            <dl>
                <dt><strong><?php echo Text::_("Detalles del preapproval"); ?>:</strong></dt>
                <dd><?php echo \trace($details); ?></dd>
            </dl>
            <?php endif ?>

            <?php if (!empty($invest->payment)) :
                $details = Paypal::paymentDetails($invest->payment);
                ?>
            <dl>
                <dt><strong><?php echo Text::_("Detalles del cargo"); ?>:</strong></dt>
                <dd><?php echo \trace($details); ?></dd>
            </dl>
            <?php endif; ?>
        </div>
        <?php endif; ?>
    ○
        ※削除

/controller/tpv.php
    ○
        ※ファイル削除。

/model/invest.php 1293-1340
    ×
                        // TPV  second
                        $inv_tpv = self::getList(array(
                            'methods' => 'tpv',
                            'projects' => $project,
                            'investStatus' => '1',
                            'date_from' => $passed

                        ));
                        if (!empty($inv_tpv)) {
                            $Data['tpv']['second']['fail'] = 0;
                            foreach ($inv_tpv as $invId => $invest) {
                                $Data['tpv']['second']['users'][$invest->user] = $invest->user;
                                $Data['tpv']['total']['users'][$invest->user] = $invest->user;
                                $Data['tpv']['second']['invests']++;
                                $Data['tpv']['total']['invests']++;
                                $Data['tpv']['second']['amount'] += $invest->amount;
                            }
                            $Data['tpv']['total']['amount'] += $Data['tpv']['second']['amount'];
                        }

                        // PAYPAL second
                        $inv_paypal = self::getList(array(
                            'methods' => 'paypal',
                            'projects' => $project,
                            'date_from' => $passed
                        ));
                        if (!empty($inv_paypal)) {
                            $Data['paypal']['second']['fail'] = 0;
                            foreach ($inv_paypal as $invId => $invest) {
                                if (in_array($invest->investStatus, array('0', '1', '3'))) {
                                    // a ver si cargo pendiente es incidencia...
                                    if ($invest->investStatus == 0 && $p0 === 'all') {
                                        $Data['paypal']['second']['fail'] += $invest->amount;
                                        $Data['paypal']['total']['fail'] += $invest->amount;
                                        $Data['note'][] = "El aporte paypal {$invId} no debería estar en estado '".self::status($invest->investStatus)."'. <a href=\"/admin/invests/details/{$invId}\" target=\"_blank\">Abrir detalles</a>";
                                        continue;
                                    }
                                    $Data['paypal']['second']['users'][$invest->user] = $invest->user;
                                    $Data['paypal']['total']['users'][$invest->user] = $invest->user;
                                    $Data['paypal']['second']['invests']++;
                                    $Data['paypal']['total']['invests']++;
                                    $Data['paypal']['second']['amount'] += $invest->amount;
                                }
                            }
                            $Data['paypal']['total']['amount'] += $Data['paypal']['second']['amount'];
                        }

    ○
        ※削除

/model/invest.php 1106-1120
    ×
                    // A ver si tiene tpv
                    // si estan pendientes, ejecutados o pagados al proyecto es una incidencia
                    $inv_tpv = self::getList(array(
                        'methods' => 'tpv',
                        'projects' => $project
                    ));
                    if (!empty($inv_tpv)) {
//                        $Data['note'][] = "Los aportes de tpv son incidencias si están activos";
                        foreach ($inv_tpv as $invId => $invest) {
                            if ($invest->investStatus == 1) {
                                $Data['tpv']['total']['fail'] += $invest->amount;
                                $Data['note'][] = Text::_("El aporte TPV"). " {$invId} ".Text::_("no debería estar en estado '") . self::status($invest->investStatus) . "'";
                            }
                        }
                    }

    ○
        ※削除

/model/invest.php 1156-1189
    ×
                        // TPV
                        $inv_tpv = self::getList(array(
                            'methods' => 'tpv',
                            'projects' => $project,
                            'investStatus' => '1'
                        ));
                        if (!empty($inv_tpv)) {
                            $Data['tpv']['first']['fail'] = 0;
                            foreach ($inv_tpv as $invId => $invest) {
                                $Data['tpv']['first']['users'][$invest->user] = $invest->user;
                                $Data['tpv']['first']['invests']++;
                                $Data['tpv']['first']['amount'] += $invest->amount;
                            }
                            $Data['tpv']['total'] = $Data['tpv']['first'];
                        }


                        // PAYPAL
                        $inv_paypal = self::getList(array(
                            'methods' => 'paypal',
                            'projects' => $project
                        ));
                        if (!empty($inv_paypal)) {
                            $Data['paypal']['first']['fail'] = 0;
                            foreach ($inv_paypal as $invId => $invest) {
                                if (in_array($invest->investStatus, array('0', '1', '3'))) {
                                    $Data['paypal']['first']['users'][$invest->user] = $invest->user;
                                    $Data['paypal']['first']['invests']++;
                                    $Data['paypal']['first']['amount'] += $invest->amount;
                                }
                            }
                            $Data['paypal']['total'] = $Data['paypal']['first'];
                        }
    ○
        ※削除

/model/invest.php 1179-1220
    ×
                        // TPV first
                        $inv_tpv = self::getList(array(
                            'methods' => 'tpv',
                            'projects' => $project,
                            'investStatus' => '1',
                            'date_until' => $last_day
                        ));
                        if (!empty($inv_tpv)) {
                            $Data['tpv']['first']['fail'] = 0;
                            foreach ($inv_tpv as $invId => $invest) {
                                $Data['tpv']['first']['users'][$invest->user] = $invest->user;
                                $Data['tpv']['first']['invests']++;
                                $Data['tpv']['first']['amount'] += $invest->amount;
                            }
                            $Data['tpv']['total'] = $Data['tpv']['first'];
                        }


                        // PAYPAL first
                        $inv_paypal = self::getList(array(
                            'methods' => 'paypal',
                            'projects' => $project,
                            'date_until' => $last_day
                        ));
                        if (!empty($inv_paypal)) {
                            $Data['paypal']['first']['fail'] = 0;
                            foreach ($inv_paypal as $invId => $invest) {
                                if (in_array($invest->investStatus, array('0', '1', '3'))) {
                                    // a ver si cargo pendiente es incidencia...
                                    if ($invest->investStatus == 0 && ($p0 === 'first' || $p0 === 'all')) {
                                        $Data['paypal']['first']['fail'] += $invest->amount;
                                        $Data['note'][] = "El aporte paypal {$invId} no debería estar en estado '".self::status($invest->investStatus)."'. <a href=\"/admin/invests/details/{$invId}\" target=\"_blank\">Abrir detalles</a>";
                                        continue;
                                    }
                                    $Data['paypal']['first']['users'][$invest->user] = $invest->user;
                                    $Data['paypal']['first']['invests']++;
                                    $Data['paypal']['first']['amount'] += $invest->amount;
                                }
                            }
                            $Data['paypal']['total'] = $Data['paypal']['first'];
                        }

    ○
        ※削除

────────────────────────────────────────────────────────────
2016-03-04 21:02

    解説
        不要になった confing.php、local-settings.php の項目の削除。

/config.php 169-
    ×
        /****************************************************
        Paypal constants (sandbox)
        * Must set cretentials on library/paypal/paypal_config.php as well
        ****************************************************/
        define('PAYPAL_REDIRECT_URL'         , '---Sandbox/Production-url-----https://www.sandbox.paypal.com/webscr&cmd=');
        define('PAYPAL_DEVELOPER_PORTAL'     , '--developper-domain--');
        define('PAYPAL_DEVICE_ID'            , '--domain--');
        define('PAYPAL_APPLICATION_ID'       , '--PayPal-app-Id---');
        define('PAYPAL_BUSINESS_ACCOUNT'     , '--mail-like-paypal-account--');
        define('PAYPAL_IP_ADDRESS'           , '127.0.0.1');

        /****************************************************
        TPV [Bank Name] (depends on your bank)
        ****************************************************/
        define('TPV_MERCHANT_CODE'           , 'xxxxxxxxx');
        define('TPV_REDIRECT_URL'            , '--bank-rest-api-url--');
        define('TPV_ENCRYPT_KEY'             , 'xxxxxxxxx');

    ○
        ※削除

/local-settings.php 97-
    ×
        /****************************************************
        Paypal constants (sandbox)
        * Must set cretentials on library/paypal/paypal_config.php as well
        ****************************************************/
        define('PAYPAL_REDIRECT_URL'         , '---Sandbox/Production-url-----https://www.sandbox.paypal.com/webscr&cmd=');
        define('PAYPAL_DEVELOPER_PORTAL'     , '--developper-domain--');
        define('PAYPAL_DEVICE_ID'            , '--domain--');
        define('PAYPAL_APPLICATION_ID'       , '--PayPal-app-Id---');
        define('PAYPAL_BUSINESS_ACCOUNT'     , '--mail-like-paypal-account--');
        define('PAYPAL_IP_ADDRESS'           , '127.0.0.1');

        /****************************************************
        TPV [Bank Name] (depends on your bank)
        ****************************************************/
        define('TPV_MERCHANT_CODE'           , 'xxxxxxxxx');
        define('TPV_REDIRECT_URL'            , '--bank-rest-api-url--');
        define('TPV_ENCRYPT_KEY'             , 'xxxxxxxxx');

    ○
        ※削除

────────────────────────────────────────────────────────────
2016-03-05 08:15

    解説
        FAQ の機能の削除。

/controller/faq.php
    ○
        ※ファイル削除。

/controller/admin/faq.php
    ○
        ※ファイル削除。

/view/faq.html.php
    ○
        ※ファイル削除。

/db/goteo.sql 280-310
    ×
        -- --------------------------------------------------------

        --
        -- Estructura de tabla para la tabla `faq`
        --

        CREATE TABLE `faq` (
          `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
          `node` varchar(50) NOT NULL,
          `section` varchar(50) NOT NULL DEFAULT 'node',
          `title` tinytext,
          `description` text,
          `order` tinyint(4) NOT NULL DEFAULT '1',
          PRIMARY KEY (`id`),
          UNIQUE KEY `id` (`id`)
        ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COMMENT='Preguntas frecuentes';

        -- --------------------------------------------------------

        --
        -- Estructura de tabla para la tabla `faq_lang`
        --

        CREATE TABLE `faq_lang` (
          `id` bigint(20) unsigned NOT NULL,
          `lang` varchar(2) NOT NULL,
          `title` tinytext,
          `description` text,
          UNIQUE KEY `id_lang` (`id`,`lang`)
        ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

    ○
        ※削除。

//    実行
//        DROP TABLE `faq`;
//        DROP TABLE `faq_lang`;

/db/purpose.sql 255-260
    ×
        INSERT INTO `purpose` (`text`, `purpose`, `html`, `group`) VALUES('faq-ask-question', '¿No has podido resolver tu duda?\r\n Envía un mensaje con tu pregunta.', NULL, 'faq');
        INSERT INTO `purpose` (`text`, `purpose`, `html`, `group`) VALUES('faq-investors-section-header', 'Para cofinanciador@s', NULL, 'faq');
        INSERT INTO `purpose` (`text`, `purpose`, `html`, `group`) VALUES('faq-main-section-header', 'Sobre nosotros', NULL, 'faq');
        INSERT INTO `purpose` (`text`, `purpose`, `html`, `group`) VALUES('faq-nodes-section-header', 'Sobre nodos locales', NULL, 'faq');
        INSERT INTO `purpose` (`text`, `purpose`, `html`, `group`) VALUES('faq-project-section-header', 'Sobre los proyectos', NULL, 'faq');
        INSERT INTO `purpose` (`text`, `purpose`, `html`, `group`) VALUES('faq-sponsor-section-header', 'Para impulsor@s', NULL, 'faq');

    ○
        ※削除。

    実行
//        DELETE FROM `purpose` WHERE `text`='faq-ask-question';
//        DELETE FROM `purpose` WHERE `text`='faq-investors-section-header';
//        DELETE FROM `purpose` WHERE `text`='faq-main-section-header';
//        DELETE FROM `purpose` WHERE `text`='faq-nodes-section-header';
//        DELETE FROM `purpose` WHERE `text`='faq-project-section-header';
//        DELETE FROM `purpose` WHERE `text`='faq-sponsor-section-header';

/db/text(グーグル翻訳化).sql 219-224
    ×
        INSERT INTO text (id, lang, text) VALUES ( 'faq-ask-question', 'ja', 'これはあなたの質問を解決しませんでしたか？私達にメッセージを送信します。' );
        INSERT INTO text (id, lang, text) VALUES ( 'faq-investors-section-header', 'ja', '共同金融について' );
        INSERT INTO text (id, lang, text) VALUES ( 'faq-main-section-header', 'ja', 'アプローチ' );
        INSERT INTO text (id, lang, text) VALUES ( 'faq-nodes-section-header', 'ja', 'ローカル・ノードについて' );
        INSERT INTO text (id, lang, text) VALUES ( 'faq-project-section-header', 'ja', 'プロジェクトについて' );
        INSERT INTO text (id, lang, text) VALUES ( 'faq-sponsor-section-header', 'ja', 'プロモーターについて' );

    ○
        ※削除。

    実行
//        DELETE FROM `text` WHERE `id`='faq-ask-question' and`lang`='ca';
//        DELETE FROM `text` WHERE `id`='faq-ask-question' and`lang`='en';
//        DELETE FROM `text` WHERE `id`='faq-ask-question' and`lang`='eu';
//        DELETE FROM `text` WHERE `id`='faq-ask-question' and`lang`='fr';
//        DELETE FROM `text` WHERE `id`='faq-ask-question' and`lang`='gl';
//        DELETE FROM `text` WHERE `id`='faq-ask-question' and`lang`='it';
//        DELETE FROM `text` WHERE `id`='faq-ask-question' and`lang`='ja';
//        DELETE FROM `text` WHERE `id`='faq-ask-question' and`lang`='nl';
//        DELETE FROM `text` WHERE `id`='faq-ask-question' and`lang`='pl';
//        DELETE FROM `text` WHERE `id`='faq-investors-section-header' and`lang`='ca';
//        DELETE FROM `text` WHERE `id`='faq-investors-section-header' and`lang`='en';
//        DELETE FROM `text` WHERE `id`='faq-investors-section-header' and`lang`='eu';
//        DELETE FROM `text` WHERE `id`='faq-investors-section-header' and`lang`='fr';
//        DELETE FROM `text` WHERE `id`='faq-investors-section-header' and`lang`='gl';
//        DELETE FROM `text` WHERE `id`='faq-investors-section-header' and`lang`='it';
//        DELETE FROM `text` WHERE `id`='faq-investors-section-header' and`lang`='ja';
//        DELETE FROM `text` WHERE `id`='faq-investors-section-header' and`lang`='nl';
//        DELETE FROM `text` WHERE `id`='faq-investors-section-header' and`lang`='pl';
//        DELETE FROM `text` WHERE `id`='faq-main-section-header' and`lang`='ca';
//        DELETE FROM `text` WHERE `id`='faq-main-section-header' and`lang`='en';
//        DELETE FROM `text` WHERE `id`='faq-main-section-header' and`lang`='eu';
//        DELETE FROM `text` WHERE `id`='faq-main-section-header' and`lang`='fr';
//        DELETE FROM `text` WHERE `id`='faq-main-section-header' and`lang`='gl';
//        DELETE FROM `text` WHERE `id`='faq-main-section-header' and`lang`='it';
//        DELETE FROM `text` WHERE `id`='faq-main-section-header' and`lang`='ja';
//        DELETE FROM `text` WHERE `id`='faq-main-section-header' and`lang`='nl';
//        DELETE FROM `text` WHERE `id`='faq-main-section-header' and`lang`='pl';
//        DELETE FROM `text` WHERE `id`='faq-nodes-section-header' and`lang`='ca';
//        DELETE FROM `text` WHERE `id`='faq-nodes-section-header' and`lang`='en';
//        DELETE FROM `text` WHERE `id`='faq-nodes-section-header' and`lang`='eu';
//        DELETE FROM `text` WHERE `id`='faq-nodes-section-header' and`lang`='fr';
//        DELETE FROM `text` WHERE `id`='faq-nodes-section-header' and`lang`='gl';
//        DELETE FROM `text` WHERE `id`='faq-nodes-section-header' and`lang`='it';
//        DELETE FROM `text` WHERE `id`='faq-nodes-section-header' and`lang`='ja';
//        DELETE FROM `text` WHERE `id`='faq-nodes-section-header' and`lang`='nl';
//        DELETE FROM `text` WHERE `id`='faq-nodes-section-header' and`lang`='pl';
//        DELETE FROM `text` WHERE `id`='faq-project-section-header' and`lang`='ca';
//        DELETE FROM `text` WHERE `id`='faq-project-section-header' and`lang`='en';
//        DELETE FROM `text` WHERE `id`='faq-project-section-header' and`lang`='eu';
//        DELETE FROM `text` WHERE `id`='faq-project-section-header' and`lang`='fr';
//        DELETE FROM `text` WHERE `id`='faq-project-section-header' and`lang`='gl';
//        DELETE FROM `text` WHERE `id`='faq-project-section-header' and`lang`='it';
//        DELETE FROM `text` WHERE `id`='faq-project-section-header' and`lang`='ja';
//        DELETE FROM `text` WHERE `id`='faq-project-section-header' and`lang`='nl';
//        DELETE FROM `text` WHERE `id`='faq-project-section-header' and`lang`='pl';
//        DELETE FROM `text` WHERE `id`='faq-sponsor-section-header' and`lang`='ca';
//        DELETE FROM `text` WHERE `id`='faq-sponsor-section-header' and`lang`='en';
//        DELETE FROM `text` WHERE `id`='faq-sponsor-section-header' and`lang`='eu';
//        DELETE FROM `text` WHERE `id`='faq-sponsor-section-header' and`lang`='gl';
//        DELETE FROM `text` WHERE `id`='faq-sponsor-section-header' and`lang`='it';
//        DELETE FROM `text` WHERE `id`='faq-sponsor-section-header' and`lang`='ja';
//        DELETE FROM `text` WHERE `id`='faq-sponsor-section-header' and`lang`='nl';
//        DELETE FROM `text` WHERE `id`='faq-sponsor-section-header' and`lang`='pl';


/db/text(グーグル翻訳化).sql 692
    ×
        INSERT INTO text (id, lang, text) VALUES ( 'regular-header-faq', 'ja', 'よくある質問' );
    ○
        ※削除。

/db/text(グーグル翻訳化).sql 679
    ×
        INSERT INTO text (id, lang, text) VALUES ( 'regular-faq', 'ja', 'よくある質問' );
    ○
        ※削除。
/db/text(グーグル翻訳化).sql 311
    ×
        INSERT INTO text (id, lang, text) VALUES ( 'guide-project-costs', 'ja', '"<strong>このセクションでは、プロジェクトの見積費用に基づいて、短い事業計画を記入する必要があります。</strong><br><br>あなたは、タスク、インフラストラクチャー、または材料によって番号を打破する必要があります。コストについて現実的であることを試してみて、あなたが各1を必要とする理由を簡単に説明します。原則として、プロジェクトの大部分は、プロジェクトを推進し、第三者に委託されていない個人またはチームによって行われなければならないことを、覚えておいてください。計算のために、心の中でも約9％になるサービスのサイト名を提供するため、トランザクションのための手数料を、（持っています<a href=""/faq/sponsor#q98"" target=""new"">+私たちのよくある質問での情報</a>). <br><br><strong>非常に重要な</strong>：サイト名では、我々は必要と補足コスト区別します。後者は第二のキャンペーンの一環として得ることができるが、前者は完全に、資金を得るためにカバーしなければならない、プロジェクトが進行中である一度最適化コスト（プロモーション、デザイン、アウトリーチ、追加の単位など）をカバーするために、これらの補足的な費用は、プロジェクトの総費用の半分以上にすることはできません。"' );
    ○
        INSERT INTO text (id, lang, text) VALUES ( 'guide-project-costs', 'ja', '"<strong>このセクションでは、プロジェクトの見積費用に基づいて、短い事業計画を記入する必要があります。</strong><br><br>あなたは、タスク、インフラストラクチャー、または材料によって番号を打破する必要があります。コストについて現実的であることを試してみて、あなたが各1を必要とする理由を簡単に説明します。原則として、プロジェクトの大部分は、プロジェクトを推進し、第三者に委託されていない個人またはチームによって行われなければならないことを、覚えておいてください。計算のために、心の中でも約9％になるサービスのサイト名を提供するため、トランザクションのための手数料を. <br><br><strong>非常に重要な</strong>：サイト名では、我々は必要と補足コスト区別します。後者は第二のキャンペーンの一環として得ることができるが、前者は完全に、資金を得るためにカバーしなければならない、プロジェクトが進行中である一度最適化コスト（プロモーション、デザイン、アウトリーチ、追加の単位など）をカバーするために、これらの補足的な費用は、プロジェクトの総費用の半分以上にすることはできません。"' );

/db/texts.sql 2088-2134
    ×
        ('faq-ask-question', 'ca', 'No has pogut resoldre el teu dubte? Envia un missatge amb la teva pregunta'),
        ('faq-ask-question', 'en', 'Didn''t this solve your question? Send us a message.'),
        ('faq-ask-question', 'eu', 'Zure zalantza ezin izan duzu argitu? Bidali ezazu mezu bat zure galderarekin.'),
        ('faq-ask-question', 'fr', 'Si vous n''avez pas trouvé la réponse que vous cherchez, envoyez un message.'),
        ('faq-ask-question', 'gl', '¿Non puideches solventar a túa dúbida? Envía unha mensaxe coa túa pregunta.'),
        ('faq-ask-question', 'it', 'Didn''t this solve your question? Send us a message.'),
        ('faq-ask-question', 'nl', 'Heeft dit je vraag niet beantwoordt? Stuur ons een bericht.'),
        ('faq-ask-question', 'pl', 'Didn''t this solve your question? Send us a message.'),
        ('faq-investors-section-header', 'ca', 'Per a cofinançadors/es'),
        ('faq-investors-section-header', 'en', 'For co-financiers'),
        ('faq-investors-section-header', 'eu', 'Finantzakideentzat'),
        ('faq-investors-section-header', 'fr', 'Cofinanceurs'),
        ('faq-investors-section-header', 'gl', 'Para cofinanceir@s'),
        ('faq-investors-section-header', 'it', 'For co-financiers'),
        ('faq-investors-section-header', 'nl', 'Voor co-financiers'),
        ('faq-investors-section-header', 'pl', 'For co-financiers'),
        ('faq-main-section-header', 'ca', 'Una aproximació'),
        ('faq-main-section-header', 'en', 'An approach'),
        ('faq-main-section-header', 'eu', 'Buruz'),
        ('faq-main-section-header', 'fr', 'à propos'),
        ('faq-main-section-header', 'gl', 'Sobre Goteo'),
        ('faq-main-section-header', 'it', 'An approach to Goteo'),
        ('faq-main-section-header', 'nl', 'Een benadering'),
        ('faq-main-section-header', 'pl', 'An approach to Goteo'),
        ('faq-nodes-section-header', 'ca', 'Sobre nodes locals'),
        ('faq-nodes-section-header', 'en', 'About local nodes'),
        ('faq-nodes-section-header', 'eu', 'Bertoko nodoei buruz'),
        ('faq-nodes-section-header', 'fr', 'Les noeuds locaux'),
        ('faq-nodes-section-header', 'gl', 'Sobre nodos locais'),
        ('faq-nodes-section-header', 'it', 'About local nodes'),
        ('faq-nodes-section-header', 'nl', 'Over locale nodes'),
        ('faq-nodes-section-header', 'pl', 'About local nodes'),
        ('faq-project-section-header', 'ca', 'Sobre els projectes'),
        ('faq-project-section-header', 'en', 'About the projects'),
        ('faq-project-section-header', 'eu', 'Proiektuei buruz'),
        ('faq-project-section-header', 'fr', 'A propos des projets'),
        ('faq-project-section-header', 'gl', 'Sobre os proxectos'),
        ('faq-project-section-header', 'it', 'About the projects'),
        ('faq-project-section-header', 'nl', 'Over de projecten'),
        ('faq-project-section-header', 'pl', 'About the projects'),
        ('faq-sponsor-section-header', 'ca', 'Per a impulsors/es'),
        ('faq-sponsor-section-header', 'en', 'For promoters'),
        ('faq-sponsor-section-header', 'eu', 'Bultzatzaileentzat'),
        ('faq-sponsor-section-header', 'gl', 'Para impulsor@s'),
        ('faq-sponsor-section-header', 'it', 'For promoters'),
        ('faq-sponsor-section-header', 'nl', 'Voor promotoren'),
        ('faq-sponsor-section-header', 'pl', 'For promoters'),
    ○
        ※削除。

/db/texts.sql 4989-4997
    ×
        ('regular-header-faq', 'ca', 'FAQ'),
        ('regular-header-faq', 'el', 'FAQ'),
        ('regular-header-faq', 'en', 'FAQ'),
        ('regular-header-faq', 'eu', 'FAQ'),
        ('regular-header-faq', 'fr', 'FAQ'),
        ('regular-header-faq', 'gl', 'FAQ'),
        ('regular-header-faq', 'it', 'FAQ'),
        ('regular-header-faq', 'nl', 'FAQ'),
        ('regular-header-faq', 'pl', 'FAQ'),
    ○
        ※削除。

    実行
//        DELETE FROM `text` WHERE `id`='regular-header-faq' and`lang`='ca';
//        DELETE FROM `text` WHERE `id`='regular-header-faq' and`lang`='el';
//        DELETE FROM `text` WHERE `id`='regular-header-faq' and`lang`='en';
//        DELETE FROM `text` WHERE `id`='regular-header-faq' and`lang`='eu';
//        DELETE FROM `text` WHERE `id`='regular-header-faq' and`lang`='fr';
//        DELETE FROM `text` WHERE `id`='regular-header-faq' and`lang`='gl';
//        DELETE FROM `text` WHERE `id`='regular-header-faq' and`lang`='it';
//        DELETE FROM `text` WHERE `id`='regular-header-faq' and`lang`='ja';
//        DELETE FROM `text` WHERE `id`='regular-header-faq' and`lang`='nl';
//        DELETE FROM `text` WHERE `id`='regular-header-faq' and`lang`='pl';


/db/texts.sql 4865-4873
    ×
('regular-faq', 'ca', 'Preguntes freqüents '),
('regular-faq', 'el', 'Frequently asked questions'),
('regular-faq', 'en', 'Frequently asked questions'),
('regular-faq', 'eu', 'Ohiko galderak'),
('regular-faq', 'fr', 'Questions fréquentes'),
('regular-faq', 'gl', 'Preguntas usuais'),
('regular-faq', 'it', 'Frequently asked questions'),
('regular-faq', 'nl', 'Veel gestelde vragen'),
('regular-faq', 'pl', 'Frequently asked questions'),
    ○
        ※削除。

    実行
//        DELETE FROM `text` WHERE `id`='regular-faq' and`lang`='ca';
//        DELETE FROM `text` WHERE `id`='regular-faq' and`lang`='el';
//        DELETE FROM `text` WHERE `id`='regular-faq' and`lang`='en';
//        DELETE FROM `text` WHERE `id`='regular-faq' and`lang`='eu';
//        DELETE FROM `text` WHERE `id`='regular-faq' and`lang`='fr';
//        DELETE FROM `text` WHERE `id`='regular-faq' and`lang`='gl';
//        DELETE FROM `text` WHERE `id`='regular-faq' and`lang`='it';
//        DELETE FROM `text` WHERE `id`='regular-faq' and`lang`='ja';
//        DELETE FROM `text` WHERE `id`='regular-faq' and`lang`='nl';
//        DELETE FROM `text` WHERE `id`='regular-faq' and`lang`='pl';

/db/texts.sql 2754-2756
    ×
    ('guide-project-costs', 'ca', '<b>En aquesta secció has d''elaborar un petit pressupost basat en els costos que calculis tindrà la realització del projecte.</b><br>\r\n<br>\r\nHas d''especificar segons tasques, infraestructura o materials. Intenta ser realista en els costos i explicar breument per a què necessites cobrir cadascun d''ells. Tingues en compte que per norma general, la major part del projecte haurà de ser realitzat directament per la persona o equip que promou el projecte, i no subcontractat a tercers. Al càlcul també has de tenir en compte les comissions de prestació de serveis de SiteName i de transacció, que sumen al voltant d''un 9% (<a href="/faq/sponsor#q98" target="new">+ info a les nostres FAQ)</a>.<br><br>\r\n<b>Molt important</b>: A SiteName diferenciem entre costos imprescindibles i costos addicionals. Els primers han d''aconseguir-se íntegrament per poder obtenir el finançament, mentre que els segon se sol·liciten i obtenen directament en una campanya posterior, una vegada està en marxa el projecte, per poder poder cobrir costos d''optimització del mateix (difusió, disseny, abast, més unitats, etc). Aquests costos addicionals no poden superar la meitat dels costos totals del projecte.'),
    ('guide-project-costs', 'en', '<strong>In this section, you should fill out a short business plan based on the estimated costs for your project.</strong><br><br>You should break down the numbers by tasks, infrastructure, or materials. Try to be realistic about the costs and briefly explain why you need each one. Keep in mind, that as a general rule, most part of the project will have to be undertaken by the person or team that is promoting the project, and not subcontracted to third parties. For the calculation, have also in mind the commissions for SiteName''s provision of services and for transaction, which add up to around 9% (<a href="/faq/sponsor#q98" target="new">+ info in our FAQ</a>). <br><br><strong>Very important</strong>: On SiteName, we differentiate among necessary and supplemental costs. The former must be totally covered in order to obtain funding, while the latter can be obtained as part of a second campaign, once the project is underway, in order to cover optimization costs (promotion, design, outreach, additional units, etc.) These supplemental costs can not be more than one half of the total cost of the project.'),
    ('guide-project-costs', 'eu', '<strong>Arlo honetan aurrekontu txiki bat prestatu behar duzu, non proiektuaren zure usteko gastuak ipintzen dituzun.</strong><br /><br />Lanak, azpiegiturak edo materialak zehaztuz egin behar duzu. Saiatu zaitez gastuetan errealista izaten, eta laburki azaldu zergatik bete behar duzun gastu bakoitza. Kontutan izan, orokorrean, proiektuaren zatirik handiena proiektua bultzatzen duzuenok landu behar duzuela, eta ez dela beste hirugarren pertsona bat kontratatuko. Kalkulatzerakoan, zenbatu ere SiteName-ko zerbitzu prestakuntza eta transakzioaren komisioak: 9%a gutxi gorabehera (<a href="/faq/sponsor#q98" target="new">info + gure FAQetan</a>).<br /><br /> <strong>Oso garrantzitsua</strong>: SiteName-n funtsezko eta ez funtsezko gastuak bereizten ditugu. Funtsezkoak guztiz bete behar dira finantzaketa lortzeko, eta ez funtsezkoak aldiz eskatu egiten dira bigarren txanda batean, behin proiektua martxan dagoela, eta honen hobekuntza lortzeko (proiektua zabaltzeko, diseinua, irismena, ale gehiago, etabar). Ez funtsezko gastu hauek ezin dute proiektuaren gastu guztien erdia baino gehiago izan.'),
    ○
    ('guide-project-costs', 'ca', '<b>En aquesta secció has d''elaborar un petit pressupost basat en els costos que calculis tindrà la realització del projecte.</b><br>\r\n<br>\r\nHas d''especificar segons tasques, infraestructura o materials. Intenta ser realista en els costos i explicar breument per a què necessites cobrir cadascun d''ells. Tingues en compte que per norma general, la major part del projecte haurà de ser realitzat directament per la persona o equip que promou el projecte, i no subcontractat a tercers. Al càlcul també has de tenir en compte les comissions de prestació de serveis de SiteName i de transacció, que sumen al voltant d''un 9%.<br><br>\r\n<b>Molt important</b>: A SiteName diferenciem entre costos imprescindibles i costos addicionals. Els primers han d''aconseguir-se íntegrament per poder obtenir el finançament, mentre que els segon se sol·liciten i obtenen directament en una campanya posterior, una vegada està en marxa el projecte, per poder poder cobrir costos d''optimització del mateix (difusió, disseny, abast, més unitats, etc). Aquests costos addicionals no poden superar la meitat dels costos totals del projecte.'),
    ('guide-project-costs', 'en', '<strong>In this section, you should fill out a short business plan based on the estimated costs for your project.</strong><br><br>You should break down the numbers by tasks, infrastructure, or materials. Try to be realistic about the costs and briefly explain why you need each one. Keep in mind, that as a general rule, most part of the project will have to be undertaken by the person or team that is promoting the project, and not subcontracted to third parties. For the calculation, have also in mind the commissions for SiteName''s provision of services and for transaction, which add up to around 9%. <br><br><strong>Very important</strong>: On SiteName, we differentiate among necessary and supplemental costs. The former must be totally covered in order to obtain funding, while the latter can be obtained as part of a second campaign, once the project is underway, in order to cover optimization costs (promotion, design, outreach, additional units, etc.) These supplemental costs can not be more than one half of the total cost of the project.'),
    ('guide-project-costs', 'eu', '<strong>Arlo honetan aurrekontu txiki bat prestatu behar duzu, non proiektuaren zure usteko gastuak ipintzen dituzun.</strong><br /><br />Lanak, azpiegiturak edo materialak zehaztuz egin behar duzu. Saiatu zaitez gastuetan errealista izaten, eta laburki azaldu zergatik bete behar duzun gastu bakoitza. Kontutan izan, orokorrean, proiektuaren zatirik handiena proiektua bultzatzen duzuenok landu behar duzuela, eta ez dela beste hirugarren pertsona bat kontratatuko. Kalkulatzerakoan, zenbatu ere SiteName-ko zerbitzu prestakuntza eta transakzioaren komisioak: 9%a gutxi gorabehera.<br /><br /> <strong>Oso garrantzitsua</strong>: SiteName-n funtsezko eta ez funtsezko gastuak bereizten ditugu. Funtsezkoak guztiz bete behar dira finantzaketa lortzeko, eta ez funtsezkoak aldiz eskatu egiten dira bigarren txanda batean, behin proiektua martxan dagoela, eta honen hobekuntza lortzeko (proiektua zabaltzeko, diseinua, irismena, ale gehiago, etabar). Ez funtsezko gastu hauek ezin dute proiektuaren gastu guztien erdia baino gehiago izan.'),

/db/templates.sql 8
    ×
        REPLACE INTO `template` VALUES(8, 'Confirmacion de proyecto enviado', 'general', 'Mensaje al usuario cuando envia un proyecto a revisión desde el preview del formulario', 'El proyecto %PROJECTNAME% ha pasado a fase de valoración', '<p>Hola <span class="message-highlight-red">%USERNAME%</span>,</p>\r\n<p>Hemos recibido la petición de revisar el proyecto <span class="message-highlight-blue">%PROJECTNAME%</span> para valorar su publicación y promoción mediante SiteName.</p>\r\n<p>En breve alguien del equipo se pondrá en contacto contigo al respecto.</p>\r\n<p>Puedes encontrar más información sobre el proceso de revisión de proyectos en nuestras FAQ: <span class="message-highlight-blue"><a href="http://www.example.com/faq#q88">http://www.example.com/faq#q88</a></span></p>\r\n<p>Muchas gracias!</p>\r\n');
    ○
        REPLACE INTO `template` VALUES(8, 'Confirmacion de proyecto enviado', 'general', 'Mensaje al usuario cuando envia un proyecto a revisión desde el preview del formulario', 'El proyecto %PROJECTNAME% ha pasado a fase de valoración', '<p>Hola <span class="message-highlight-red">%USERNAME%</span>,</p>\r\n<p>Hemos recibido la petición de revisar el proyecto <span class="message-highlight-blue">%PROJECTNAME%</span> para valorar su publicación y promoción mediante SiteName.</p>\r\n<p>En breve alguien del equipo se pondrá en contacto contigo al respecto.</p>\r\n<p>Puedes encontrar más información sobre el proceso de revisión de proyectos en nuestras </p>\r\n<p>Muchas gracias!</p>\r\n');

/db/purpose.sql 702
    ×
        INSERT INTO `purpose` (`text`, `purpose`, `html`, `group`) VALUES('regular-header-faq', 'FAQ', NULL, 'general');
    ○
        ※削除。

    実行
//        DELETE FROM `purpose` WHERE `text`='regular-header-faq';

/db/purpose.sql 689
    ×
        INSERT INTO `purpose` (`text`, `purpose`, `html`, `group`) VALUES('regular-faq', 'Preguntas frecuentes', NULL, 'general');
    ○
        ※削除。

    実行
//        DELETE FROM `purpose` WHERE `text`='regular-faq';

/db/purpose.sql 404
    ×
        INSERT INTO `purpose` (`text`, `purpose`, `html`, `group`) VALUES('invest-paypal_disabled', '\r\nEste proyecto tiene desactivada la opción de pago a través de PayPal. <a href="/faq/investors#q2">Más info</a>', 1, 'invest');
    ○
        INSERT INTO `purpose` (`text`, `purpose`, `html`, `group`) VALUES('invest-paypal_disabled', '\r\nEste proyecto tiene desactivada la opción de pago a través de PayPal.', 1, 'invest');

/db/purpose.sql 349
    ×
        INSERT INTO `purpose` (`text`, `purpose`, `html`, `group`) VALUES('guide-project-costs', '<strong>En esta sección debes elaborar un pequeño presupuesto basado en los costes que calcules va a tener la realización del proyecto.</strong><br><br>\r\nDebes especificar según tareas, infraestructura o materiales. Intenta ser realista en los costes y explicar brevemente por qué necesitas cubrir cada uno de ellos. Ten en cuenta que por norma general, la mayor parte del proyecto deberá ser realizado directamente por la persona o equipo que promueve el proyecto, y no subcontratado a terceros. En el cálculo también debes tener en cuenta las comisiones de prestación de servicios de SiteName y de transacción, que suman en torno a un 9% (<a href="/faq/sponsor#q98" target="new">+ info en nuestras FAQ</a>).<br><br>\r\n<strong>Muy importante</strong>: En SiteName diferenciamos entre costes imprescindibles y costes adicionales. Los primeros deben lograrse en su totalidad para poder obtener la financiación, mientras que los segundo se solicitan y obtienen directamente en una campaña posterior, una vez está en marcha el proyecto, para poder poder cubrir costes de optimización del mismo (difusión, diseño, alcance, más unidades, etc). Estos costes adicionales no pueden superar la mitad de los costes totales del proyecto.', NULL, 'general');
    ○
        INSERT INTO `purpose` (`text`, `purpose`, `html`, `group`) VALUES('guide-project-costs', '<strong>En esta sección debes elaborar un pequeño presupuesto basado en los costes que calcules va a tener la realización del proyecto.</strong><br><br>\r\nDebes especificar según tareas, infraestructura o materiales. Intenta ser realista en los costes y explicar brevemente por qué necesitas cubrir cada uno de ellos. Ten en cuenta que por norma general, la mayor parte del proyecto deberá ser realizado directamente por la persona o equipo que promueve el proyecto, y no subcontratado a terceros. En el cálculo también debes tener en cuenta las comisiones de prestación de servicios de SiteName y de transacción, que suman en torno a un 9%.<br><br>\r\n<strong>Muy importante</strong>: En SiteName diferenciamos entre costes imprescindibles y costes adicionales. Los primeros deben lograrse en su totalidad para poder obtener la financiación, mientras que los segundo se solicitan y obtienen directamente en una campaña posterior, una vez está en marcha el proyecto, para poder poder cubrir costes de optimización del mismo (difusión, diseño, alcance, más unidades, etc). Estos costes adicionales no pueden superar la mitad de los costes totales del proyecto.', NULL, 'general');

/db/pages.sql
    ×
        ※★長文につき省略。「faq」について書かれている箇所を削除。

/db/acl.sql 26
    ×
        REPLACE INTO `acl` VALUES(25, '*', '*', '*', '/faq/*', 1, '2011-05-18 20:49:01');
    ○
        ※削除。

/model/faq.php
    ○
        ※ファイル削除。

/view/admin/faq
    ○
        ※フォルダーごと削除。

/view/admin/index.html.php 56-57
    ×
                                //$hide_list = array('blog', 'texts', 'tags', 'translates', 'worth', 'news', 'banners', 'faq');
                                if ($oCode != 'blog' && $oCode != 'texts' && $oCode != 'tags' && $oCode != 'translates' && $oCode != 'worth' && $oCode != 'news' && $oCode != 'banners' && $oCode != 'faq' && !empty($option['label'])):
    ○
                                //$hide_list = array('blog', 'texts', 'tags', 'translates', 'worth', 'news', 'banners');
                                if ($oCode != 'blog' && $oCode != 'texts' && $oCode != 'tags' && $oCode != 'translates' && $oCode != 'worth' && $oCode != 'news' && $oCode != 'banners' && !empty($option['label'])):

/library/text.php 347
    ×
                'faq'  => static::_('Pagina de FAQ'),
    ○
        ※削除。

/library/content.php 86-89
    ×
                'faq' => array (
                    'title' => Text::_('Título'),
                    'description' => Text::_('Descripción')
                ),
    ○
        ※削除。

/library/content.php 42
    ×
                'faq'       => Text::_('Faq'),
    ○
        ※削除。

/controller/ws.php 40-47
    ×
        public function get_faq_order($section) {
            $next = Model\Faq::next($section);

            header ('HTTP/1.1 200 Ok');
            echo $next;
            die;
        }
    ○
        ※削除。

/controller/translate.php 455-461
    ×
                        'faq' => array(
                            'label' => Text::_('FAQs'),
                            'actions' => array(
                                'list' => array('label' => Text::_('Listando'), 'item' => false),
                                'edit' => array('label' => Text::_('Traduciendo Pregunta'), 'item' => true)
                            )
                        ),
    ○
        ※削除。

/controller/admin.php 625
    ×
                                'faq' => $options['faq'],
    ○
        ※削除。

/controller/admin.php 127-136
    ×
                'faq' => array(
                    'label' => Text::_('Admin faq'),
                    'actions' => array(
                        'list' => array('label' => Text::_('Listando'), 'item' => false),
                        'add' => array('label' => Text::_('Nueva Pregunta'), 'item' => false),
                        'edit' => array('label' => Text::_('Editando Pregunta'), 'item' => true),
                        'translate' => array('label' => Text::_('Traduciendo Pregunta'), 'item' => true)
                    ),
                    'filters' => array('section' => 'node')
                ),
    ○
        ※削除。

/controller/admin.php 45
    ×
                    'faq',
    ○
        ※削除。

/controller/about.php 41
    ×
            if ($id == 'faq' || $id == 'contact') {
    ○
            if ($id == 'contact') {

/locale/en.po
    実行
        （１）poedit で開いて保存ボタンを押す。
        （２）３行エラーが出てくる。それぞれ末尾に余計な改行が入っているので消す。
        （３）[カタログ(A)] - [設定…(P)] から [ソースの検索パス] と移動し
                [パス]の[+]ボタンを押して[フォルダーを追加…]をクリック。
                トップフォルダー（サイト全体を入れているフォルダー）を選択して
                [フォルダーの選択]をクリック。[OK]ボタンを押してダイアログボックスを閉じる。
        （４）ツールバーの[更新する]ボタンをクリック。
                カタログの変更は[保存]をクリック。
        （５）保存ボタンを押して閉じる。

/locale/ca/LC_MESSAGES/ca.po
    実行
        （１）poedit で開いて保存ボタンを押す。
        （２）５行エラーが出てくる。それぞれ末尾に余計な改行が入っているので消す。
        （３）[カタログ(A)] - [設定…(P)] から [ソースの検索パス] と移動し
                [パス]の[+]ボタンを押して[フォルダーを追加…]をクリック。
                トップフォルダー（サイト全体を入れているフォルダー）を選択して
                [フォルダーの選択]をクリック。[OK]ボタンを押してダイアログボックスを閉じる。
        （４）ツールバーの[更新する]ボタンをクリック。
                カタログの変更は[保存]をクリック。
        （５）保存ボタンを押して閉じる。

/locale/en_GB/LC_MESSAGES/messages.po
    実行
        （１）保存ボタンを押して閉じる。
        （２）[カタログ(A)] - [設定…(P)] から [ソースの検索パス] と移動し
                [パス]の[+]ボタンを押して[フォルダーを追加…]をクリック。
                トップフォルダー（サイト全体を入れているフォルダー）を選択して
                [フォルダーの選択]をクリック。[OK]ボタンを押してダイアログボックスを閉じる。
        （３）ツールバーの[更新する]ボタンをクリック。
                カタログの変更は[保存]をクリック。
        （４）保存ボタンを押して閉じる。

/locale/eu/LC_MESSAGES/eu.po
    実行
        （１）poedit で開いて保存ボタンを押す。
        （２）３行エラーが出てくる。それぞれ末尾に余計な改行が入っているので消す。
        （３）[カタログ(A)] - [設定…(P)] から [ソースの検索パス] と移動し
                [パス]の[+]ボタンを押して[フォルダーを追加…]をクリック。
                トップフォルダー（サイト全体を入れているフォルダー）を選択して
                [フォルダーの選択]をクリック。[OK]ボタンを押してダイアログボックスを閉じる。
        （４）ツールバーの[更新する]ボタンをクリック。
                カタログの変更は[保存]をクリック。
        （５）保存ボタンを押して閉じる。

/locale/ja_JP/LC_MESSAGES/messages.po
    実行
        （１）ツールバーの[更新する]ボタンをクリック。
        （２）保存ボタンを押して閉じる。

/locale/nl_NL/LC_MESSAGES/messages.po
    実行
        （１）[カタログ(A)] - [設定…(P)] から [ソースの検索パス] と移動し
                [パス]の[+]ボタンを押して[フォルダーを追加…]をクリック。
                トップフォルダー（サイト全体を入れているフォルダー）を選択して
                [フォルダーの選択]をクリック。[OK]ボタンを押してダイアログボックスを閉じる。
        （２）ツールバーの[更新する]ボタンをクリック。
                カタログの変更は[保存]をクリック。
        （３）保存ボタンを押して閉じる。

/locale/pt_BR/LC_MESSAGES/messages.po
        （１）[カタログ(A)] - [設定…(P)] から [ソースの検索パス] と移動し
                [パス]の[+]ボタンを押して[フォルダーを追加…]をクリック。
                トップフォルダー（サイト全体を入れているフォルダー）を選択して
                [フォルダーの選択]をクリック。[OK]ボタンを押してダイアログボックスを閉じる。
        （２）ツールバーの[更新する]ボタンをクリック。
                カタログの変更は[保存]をクリック。
        （３）保存ボタンを押して閉じる。

/view/css/csstidyonline.results.css 12739-12854
    ×
        /*----------------------------------------------------------------------
         faq.css
        ----------------------------------------------------------------------*/
        #faq-content
        {
            float:left;
            margin:0 20px 0 0;
            width:620px;
        }

        #faq-content h2
        {
            background:#FFF url(/view/css/arrowH2-section.gif) no-repeat scroll -5px -2px;
            border-bottom:2px solid #e7e7e7;
            font:bold 16px Helvetica, Arial, Geneva, sans-serif;
            height:30px;
            margin:0;
            padding:15px 0 0 20px;
        }

        #faq-content h3
        {
            font:bold 16px Helvetica, Arial, Geneva, sans-serif;
            margin:5px 0 20px;
        }

        #faq-content h4
        {
            margin:5px 0 0;
        }

        #faq-content ol
        {
            margin-left:20px;
            padding-left:0;
        }

        #faq-content ol li
        {
            margin:0 0 20px;
        }

        #faq-content p
        {
            margin:5px 0;
        }

        #faq-sidebar
        {
            float:right;
            width:300px;
        }

        div.widget.faq-content-module,div.widget.faq-sidebar-module
        {
            background-color:#FFF;
            line-height:16px;
            margin:0 0 20px;
        }

        div.widget.faq-content-module ol li a.up
        {
            margin-bottom:0!important;
            margin-left:-15px!important;
        }

        div.widget.faq-sidebar-module .supertitle
        {
            border-bottom:1px solid #58595b;
            font:normal 14px Helvetica, Arial, Geneva, sans-serif;
            margin:0 0 1em;
            padding:0 2px .4em;
        }

        div.widget.faq-sidebar-module .supertitle.ask
        {
            border-bottom-color:#25a345;
            margin-bottom:12px;
        }

        div.widget.faq-sidebar-module ol
        {
            margin-left:20px;
            padding-left:0;
        }

        div.widget.faq-sidebar-module ol li
        {
            margin:0 0 5px;
        }

        div.widget.faq-sidebar-module ol li a
        {
            text-decoration:none;
        }

        div.widget.faq-sidebar-module ol li a:hover
        {
            text-decoration:underline;
        }

        div.widget.faq-sidebar-module p.ask-content
        {
            border-bottom:1px solid #25a345;
            margin:8px 0 0;
            padding:0 0 12px 24px;
        }

        div.widget.faq-sidebar-module a.btn-ask
        {
            font-size:16px;
            font-weight:700;
            margin:12px 0 0!important;
        }

    ○
        ※削除。

/view/m/css/cssmarge_mobile.css 10455-10537
    ×
        /*----------------------------------------------------------------------
          faq.css
        ----------------------------------------------------------------------*/
        #faq-content {
            width:620px;
            margin: 0 20px 0 0;
            float:left;
        }
        #faq-content h2 {
            padding: 15px 0 0 20px;
            background: white url('arrowH2-section.gif') no-repeat scroll -5px -2px;
            font: bold 16px Helvetica, Arial, Geneva, sans-serif;
            border-bottom: 2px solid #e7e7e7;
            height: 30px;
            margin: 0;
        }
        #faq-content h3 {
            font: bold 16px Helvetica, Arial, Geneva, sans-serif;
            margin: 5px 0 20px;
        }
        #faq-content h4 {
            margin: 5px 0 0 0;
        }
        #faq-content ol{
            margin-left:20px;
            padding-left:0px;
        }
        #faq-content ol li{
            margin: 0 0 20px 0;
        }
        #faq-content p{
            margin: 5px 0;
        }
        #faq-sidebar {
            width:300px;
            float:right;
        }
        div.widget.faq-content-module,
        div.widget.faq-sidebar-module {
            background-color: white;
            line-height: 16px;
            margin: 0 0 20px;
        }
        div.widget.faq-content-module ol li a.up{
            margin-left: -15px !important;
            margin-bottom: 0 !important;
        }
        div.widget.faq-sidebar-module .supertitle {
            border-bottom: 1px solid #58595b;
            font: normal 14px Helvetica, Arial, Geneva, sans-serif;
            padding: 0 2px 0.4em;
            margin: 0 0 1em;
        }
        div.widget.faq-sidebar-module .supertitle.ask {
            border-bottom-color: #25a345;
            margin-bottom: 12px;
        }
        div.widget.faq-sidebar-module ol {
            margin-left: 20px;
            padding-left:0px;
        }
        div.widget.faq-sidebar-module ol li {
            margin:0 0 5px 0;
        }
        div.widget.faq-sidebar-module ol li a {
            text-decoration:none;
        }
        div.widget.faq-sidebar-module ol li a:hover {
            text-decoration:underline;
        }
        div.widget.faq-sidebar-module p.ask-content{
            padding: 0 0 12px 24px;
            margin: 8px 0 0 0;
            border-bottom: 1px solid #25a345;
        }

        div.widget.faq-sidebar-module a.btn-ask{
            margin: 12px 0 0 0 !important;
            font-weight: bold;
            font-size: 16px;
        }

    ○
        ※削除。

────────────────────────────────────────────────────────────
2016-03-06 21:56

    解説
        ブログ機能を削除方針。

/controller/blog.php
    ○
        ※ファイル削除。

/controller/admin/blog.php
    ○
        ※ファイル削除。

/model/blog.php
    ○
        ※ファイル削除。

/model/blog
    ○
        ※フォルダーごと削除。

/view/admin/blog
    ○
        ※フォルダーごと削除。

/view/blog
    ○
        ※フォルダーごと削除。

/view/css/csstidyonline.results.css 12739-13199
    ×
        /*----------------------------------------------------------------------
         blog.css
        ----------------------------------------------------------------------*/
        #blog-content
        {
            float:left;
            margin:0 20px 0 0;
            width:620px;
        }

        #blog-sidebar
        {
            float:right;
            width:300px;
        }

        div.widget.blog-content-module,div.widget.blog-sidebar-module,#blog-content .post
        {
            background-color:#FFF;
            line-height:18px;
            margin:0 0 20px;
        }

        div.widget.blog-content-module h4,#blog-content .post h4
        {
            margin:2px 0;
        }

        div.widget.blog-content-module h4 a,#blog-content .post h4 a
        {
            color:#535353;
            font:normal 20px "Helvetica Neue", Helvetica, Arial, Geneva, sans-serif;
            margin:0 0 5px;
            text-decoration:none;
            text-transform:none;
        }

        div.widget.blog-content-module h4 a:hover,#blog-content .post h4 a:hover
        {
            color:#20B3B2;
        }

        div.widget.blog-content-module .date,#blog-content .post .date
        {
            color:#808285;
            display:block;
            font-size:12px;
            margin:10px 0 0;
        }

        div.widget.blog-content-module .categories,#blog-content .post .categories
        {
            display:block;
            margin:0 0 8px;
        }

        div.widget.blog-content-module .categories a,#blog-content .post .categories a
        {
            color:#808285;
            font-size:12px;
            text-decoration:none;
        }

        div.widget.blog-content-module .categories a:hover,#blog-content .post .categories a:hover
        {
            color:#20B3B2;
        }

        div.widget.blog-content-module blockquote,#blog-content .post blockquote
        {
            border-bottom:1px solid #CABCBF;
            color:#58595B;
            font-size:12px;
            line-height:18px;
            margin:8px 0 16px;
            padding:0 0 8px;
        }

        div.widget.blog-content-module .embed,#blog-content .post .embed
        {
            height:285px;
            margin:18px 18px 10px 0;
            width:500px;
        }

        div.widget.blog-content-module .embed-legend,#blog-content .post .embed-legend
        {
            border-left:2px solid silver;
            color:#9B9B9D;
            font-size:.9em;
            font-style:oblique;
            margin-bottom:18px;
            margin-left:0;
            padding-left:10px;
            width:495px;
        }

        div.post-gallery
        {
            margin-bottom:30px;
        }

        div.post-gallery-container
        {
            display:none;
            height:300px;
            width:580px;
        }

        div.post-gallery-container .gallery-image
        {
            display:block;
            height:300px;
            text-align:left;
            width:580px;
        }

        div.gallery-image img
        {
            margin:8px 18px 8px 0;
        }

        div.post-gallery ul.slderpag
        {
            float:left;
            height:auto;
            list-style:none;
            margin:8px 0 0;
            padding:0;
        }

        div.post-gallery ul.slderpag li
        {
            cursor:pointer;
            display:block;
            float:left;
            margin:0 4px 5px;
            overflow:hidden;
        }

        div.post-gallery ul.slderpag li a
        {
            background-color:#cdcdce;
            color:#cdcdce;
            display:block;
            height:12px;
            margin-top:2px;
            width:12px;
        }

        div.post-gallery ul.slderpag li a:hover
        {
            background-color:#20b3b2;
            color:#20b3b2;
        }

        div.post-gallery ul.slderpag li.current a
        {
            background-color:#808184!important;
            color:#808184!important;
        }

        div.post-gallery a.next,div.post-gallery a.prev,#blog-content .post div.post-gallery a.prev
        {
            cursor:pointer;
            float:left;
            height:16px;
            line-height:2000px;
            margin:8px 0 0;
            overflow:hidden;
            width:16px;
        }

        div.post-gallery a.prev
        {
            background:url(/view/css/small_arrowslider-sprt.png) scroll no-repeat 0 0;
        }

        div.post-gallery a.prev:hover
        {
            background:url(/view/css/small_arrowslider-sprt.png) scroll no-repeat 0 -32px;
        }

        div.post-gallery a.next
        {
            background:url(/view/css/small_arrowslider-sprt.png) scroll no-repeat 0 -16px;
        }

        div.post-gallery a.next:hover
        {
            background:url(/view/css/small_arrowslider-sprt.png) scroll no-repeat 0 -48px;
        }

        div.widget.blog-content-module .comments-num,#blog-content .post .comments-num
        {
            background:transparent url(/view/css/ico-blogcomment.png) scroll no-repeat 0 0;
            float:left;
            height:24px;
            line-height:24px;
            margin:0;
            padding:0 0 0 26px;
        }

        div.widget.blog-content-module .comments-num a,#blog-content .post .comments-num a
        {
            color:#00ad4e;
            text-decoration:none;
        }

        div.post-comments div.message
        {
            background:#e7e7e7 url(/view/css/message/beak/1.png) no-repeat left top;
            margin-left:60px;
            overflow:visible;
            padding:.5em 1em .5em 1.5em;
            position:relative;
        }

        div.post-comments div.owner
        {
            background:#e9f4ea url(/view/css/message/beak/2.png) no-repeat left top!important;
        }

        div.post-comments div.message + div.message
        {
            margin-top:20px;
        }

        div.post-comments div.message .avatar
        {
            display:block;
            height:50px;
            left:-60px;
            position:absolute;
            top:0;
            width:50px;
        }

        div.post-comments div.message .user
        {
            float:left;
            font-size:14px;
            font-weight:700;
            margin:0 0 1em;
            text-transform:none;
        }

        div.post-comments div.message h3.user a
        {
            text-decoration:none;
        }

        div.post-comments div.message h3.user a:hover
        {
            color:#20B3B2;
        }

        div.post-comments div.message .date
        {
            color:gray;
            float:right;
            font-size:12px;
        }

        div.post-comments div.message blockquote
        {
            clear:both;
            margin:0;
            padding:0;
        }

        div.widget.blog-content-module ul.share-goteo,#blog-content .post ul.share-goteo
        {
            float:right;
            list-style:none;
            margin:0;
            padding:0;
        }

        div.widget.blog-content-module ul.share-goteo li,#blog-content .post ul.share-goteo li
        {
            display:inline;
            float:left;
            margin:0 0 0 10px;
        }

        div.widget.blog-content-module ul.share-goteo li.twitter a,div.widget.blog-content-module ul.share-goteo li.facebook a,div.widget.blog-content-module ul.share-goteo li.rss a,#blog-content .post ul.share-goteo li.twitter a,#blog-content .post ul.share-goteo li.facebook a,#blog-content .post ul.share-goteo li.rss a
        {
            float:left;
            font-size:12px;
            height:20px;
            line-height:20px;
            padding:0 0 0 25px;
        }

        div.widget.blog-content-module ul.share-goteo li.sharetext,#blog-content .post ul.share-goteo li.sharetext
        {
            color:#808285;
            float:left;
            font-size:12px;
            height:20px;
        }

        div.widget.blog-content-module ul.share-goteo li.twitter a,#blog-content .post ul.share-goteo li.twitter a
        {
            background:transparent url(/view/css/twitter.png) scroll no-repeat 0 0;
            color:#13c2ec;
            text-decoration:none;
        }

        div.widget.blog-content-module ul.share-goteo li.twitter a:hover,#blog-content .post ul.share-goteo li.twitter a:hover
        {
            background:transparent url(/view/css/twitter.png) scroll no-repeat 0 0;
            color:#808285;
            opacity:0.6;
            text-decoration:none;
        }

        div.widget.blog-content-module ul.share-goteo li.facebook a,#blog-content .post ul.share-goteo li.facebook a
        {
            background:transparent url(/view/css/facebook.png) scroll no-repeat 0 0;
            color:#4a6393;
            text-decoration:none;
        }

        div.widget.blog-content-module ul.share-goteo li.facebook a:hover,#blog-content .post ul.share-goteo li.facebook a:hover
        {
            background:transparent url(/view/css/facebook.png) scroll no-repeat 0 0;
            color:#808285;
            opacity:0.6;
            text-decoration:none;
        }

        #blog-content div.widget.blog-comment
        {
            margin:20px 0 0;
        }

        #blog-content div.widget.blog-comment h5
        {
            margin:0 0 5px;
        }

        #blog-content div.widget.blog-comment textarea
        {
            background-color:#DCEEDF;
            border:1px solid #2EAB58;
            clear:right;
            display:block;
            float:right;
            height:50px;
            margin:-1px;
            padding:.3em 0;
            resize:none;
            width:525px;
        }

        #blog-content div.widget.blog-comment button
        {
            float:right;
            font-weight:700;
            margin:35px 0 0;
            padding:5px 20px;
        }

        #blog-content div.widget.blog-comment a.preview
        {
            color:#2EAB58;
            font-weight:700;
            left:52px;
            position:relative;
            text-decoration:none;
            text-transform:uppercase;
            top:10px;
        }

        div.widget.blog-sidebar-module h3.title
        {
            border-bottom:1px solid #20b3b2;
            color:#000;
            font:normal 15px "Helvetica Neue", Helvetica, Arial, Geneva, sans-serif;
            margin:0 0 1em;
            padding:0 2px .2em;
        }

        div.widget.blog-sidebar-module ul#blog-side-posts
        {
            margin:0 0 25px 16px;
            padding:0;
        }

        div.widget.blog-sidebar-module ul#blog-side-posts li
        {
            list-style-position:outside;
            margin:0 0 10px;
        }

        div.widget.blog-sidebar-module ul#blog-side-posts li a
        {
            color:#58595B;
            font-size:12px;
            text-decoration:none;
        }

        div.widget.blog-sidebar-module ul#blog-side-posts li a:hover
        {
            text-decoration:underline;
        }

        div.widget.blog-sidebar-module ul#blog-side-tags,div.widget.blog-sidebar-module ul#blog-side-comments
        {
            list-style:none;
            margin:0 10px 25px 0;
            padding:0;
        }

        div.widget.blog-sidebar-module ul#blog-side-tags li
        {
            margin:0 0 5px;
        }

        div.widget.blog-sidebar-module ul#blog-side-tags li a
        {
            color:#20B3B2;
            text-decoration:none;
        }

        div.widget.blog-sidebar-module ul#blog-side-tags li a:hover
        {
            text-decoration:underline;
        }

        div.widget.blog-sidebar-module ul#blog-side-comments li .date
        {
            color:#cabcbf;
            margin:10px 0;
        }

        div.widget.blog-sidebar-module ul#blog-side-comments li
        {
            margin:0 0 20px;
        }

        div.widget.blog-sidebar-module ul#blog-side-comments li div div.high-comment
        {
            display:block;
            margin:6px 0 0 -9px;
            padding:4px 8px;
        }

        div.widget.blog-sidebar-module ul#blog-side-comments li div div.high-comment:hover
        {
            background:#F3F3F3;
        }

        div.widget.blog-sidebar-module ul#blog-side-comments li p
        {
            margin:0;
        }

    ○
        ※削除。

/view/css/csstidyonline.results.css 392-404
    ×
        div.widget.blog-comment{position:relative;}
        div.widget.blog-comment button.green{float:right;
            margin-top: 25px;
            margin-bottom: 5px;
        }
        div.widget.blog-comment div#bocadillo{
            background:url('/view/css/bocadillo.jpg') no-repeat;
            position:absolute;
            width: 50px;
            height: 50px;
            margin-top: 8px;
        }

    ○
        ※削除。

/view/css/csstidyonline.results.css 8313-8337
    ×
        .project-updates div.widget.blog-comment input.green
        {
            float:right;
            font-weight:700;
            margin:35px 0 0;
            padding:5px 20px;
        }

        .project-updates div.widget.blog-comment a.preview
        {
            color:#2EAB58;
            font-style:normal;
            font-weight:400;
            left:52px;
            position:relative;
            text-decoration:none;
            text-transform:uppercase;
            top:-42px;
        }

        .project-updates div.widget.blog-comment form
        {
            overflow:hidden;
        }

    ○
        ※削除。

/view/css/csstidyonline.results.css 8273-8302
    ×
        .project-updates div.widget.blog-comment
        {
            margin:20px 0 0;
        }

        .project-updates div.widget.blog-comment h5
        {
            margin:0 0 5px;
        }

        .project-updates div.widget.blog-comment textarea
        {
            background-color:#DCEEDF;
            border:1px solid #2EAB58;
            clear:right;
            display:block;
            float:left;
            height:50px;
            margin:10px -1px -1px 52px;
            padding:.3em 0;
            resize:none;
            width:525px;
        }

        .project-updates div.widget.blog-comment input.button
        {
            float:right;
            margin:20px 0 0;
        }

    ○
        ※削除。

/view/css/csstidyonline.results.css 8211-8220
    ×
        .project-updates .post .comments-num
        {
            background:transparent url(/view/css/ico-blogcomment.png) scroll no-repeat 0 0;
            float:left;
            height:24px;
            line-height:24px;
            margin:0;
            padding:0 0 0 26px;
        }

    ○
        ※削除。

/view/m/css/cssmarge_mobile.css 10455-10849
    ×
        /*----------------------------------------------------------------------
          blog.css
        ----------------------------------------------------------------------*/
        #blog-content {
            width:620px;
            margin: 0 20px 0 0;
            float:left;
        }
        #blog-sidebar {
            width:300px;
            float:right;
        }
        div.widget.blog-content-module,
        div.widget.blog-sidebar-module,
        #blog-content .post{
            background-color: white;
            line-height: 18px;
            margin: 0 0 20px;
        }
        div.widget.blog-content-module h4,
        #blog-content .post h4 {
            margin: 2px 0;
        }
        div.widget.blog-content-module h4 a,
        #blog-content .post h4 a {
            font: normal 20px "Helvetica Neue", Helvetica, Arial, Geneva, sans-serif;
            margin: 0 0 5px 0;
            text-transform:none;
            color:#535353;
            text-decoration:none;
        }
        div.widget.blog-content-module h4 a:hover,
        #blog-content .post h4 a:hover {
            color:#20B3B2;
        }
        div.widget.blog-content-module .date,
        #blog-content .post  .date{
            display:block;
            color: #808285;
            margin: 10px 0 0;
            font-size: 12px;
        }
        div.widget.blog-content-module .categories,
        #blog-content .post .categories{
            display:block;
            margin: 0 0 8px;
        }
        div.widget.blog-content-module .categories a,
        #blog-content .post .categories a {
            color:#808285;
            text-decoration: none;
            font-size: 12px;
        }
        div.widget.blog-content-module .categories a:hover,
        #blog-content .post .categories a:hover {
            color:#20B3B2
        }
        div.widget.blog-content-module  blockquote,
        #blog-content .post blockquote{
            color: #58595B;
            padding: 0 0 8px;
            border-bottom: 1px solid #CABCBF;
            margin: 8px 0 16px;
            font-size: 12px;
            line-height: 18px;
        }
        div.widget.blog-content-module  .embed,
        #blog-content .post .embed{
            width: 500px;
            height: 285px;
            margin: 18px 18px 10px 0;
        }

        div.widget.blog-content-module  .embed-legend,
        #blog-content .post .embed-legend{
            border-left: 2px solid silver;
            color: #9B9B9D;
            font-size: 0.9em;
            margin-left: 0;
            width: 495px;
            padding-left: 10px;
            margin-bottom: 18px;
            font-style:oblique
        }
        /* Estilos galeria */
        div.post-gallery{
            margin-bottom:30px;
        }
        div.post-gallery-container{
            width:580px;
            height:300px;
            display:none;
        }

        body.project-show div.widget.project-summary .gallery-image{
            text-align:center;
            width:312px;
            max-width: 312px;
            max-height: 240px;
            display:block;
            margin: 0 auto 20px;
        }

        div.gallery-image img {
            display: block;
            width: auto;
            width: 100%;
            max-height: auto;
            margin: 0 auto;
        }

        div.post-gallery  ul.slderpag {
            margin: 8px 0 0 0;
            list-style:none;
            padding:0px;
            float:left;
            height:auto;
        }

        div.post-gallery  ul.slderpag li{
            cursor:pointer;
            display: block;
            float: left;
            overflow: hidden;
            margin: 0 4px 5px 4px;
        }

        div.post-gallery  ul.slderpag li a{
            width: 12px;
            height: 12px;
            margin-top: 2px;
            background-color: #cdcdce;
            color: #cdcdce;
            display:block;
        }

        div.post-gallery  ul.slderpag li a:hover{
            background-color: #20b3b2;
            color: #20b3b2;
        }

        div.post-gallery  ul.slderpag li.current a{
            background-color: #808184 !important;
            color: #808184 !important;
        }

        div.post-gallery  a.next,
        div.post-gallery  a.prev,
        #blog-content .post div.post-gallery  a.prev{
            width: 16px;
            height: 16px;
            line-height: 2000px;
            overflow: hidden;
            float:left;
            margin: 8px 0 0 0;
            cursor:pointer;
        }

        div.post-gallery  a.prev{
            background: url('/view/css/small_arrowslider-sprt.png') scroll no-repeat 0 0;
        }

        div.post-gallery  a.prev:hover {
            background: url('/view/css/small_arrowslider-sprt.png') scroll no-repeat 0 -32px;
        }

        div.post-gallery  a.next{
            background: url('/view/css/small_arrowslider-sprt.png') scroll no-repeat 0 -16px;
        }

        div.post-gallery  a.next:hover{
            background: url('/view/css/small_arrowslider-sprt.png') scroll no-repeat 0 -48px;
        }
        /* Fin galeria */
        div.widget.blog-content-module .comments-num,
        #blog-content .post .comments-num{
            float:left;
            background: transparent url('/view/css/ico-blogcomment.png') scroll no-repeat  0 0;
            padding: 0 0 0 26px;
            height:24px;
            margin: 0;
            line-height: 24px;
        }
        div.widget.blog-content-module .comments-num a,
        #blog-content .post .comments-num a {
            color:#00ad4e;
            text-decoration:none;
        }
        /** Comments like messages **/
        div.post-comments div.message {
            background: #e7e7e7 url('/view/css/message/beak/1.png') no-repeat left top;
            margin-left: 60px;
            padding: .5em 1em .5em 1.5em;
            overflow: visible;
            position: relative;
        }

        div.post-comments div.owner {
            background: #e9f4ea url('/view/css/message/beak/2.png') no-repeat left top !important;
        }

        div.post-comments div.message + div.message {
            margin-top: 20px;
        }

        div.post-comments div.message .avatar {
            position: absolute;
            left: -60px;
            top: 0;
            display: block;
            width: 50px;
            height: 50px;
        }

        div.post-comments div.message .user {
            text-transform: none;
            font-size: 14px;
            font-weight: bold;
            margin: 0 0 1em;
            float: left;
        }

        div.post-comments div.message h3.user a{text-decoration:none;}
        div.post-comments div.message h3.user a:hover{color:#20B3B2;}

        div.post-comments div.message .date {
            float: right;
            color: #808080;
            font-size: 12px;
        }

        div.post-comments div.message blockquote {
            margin: 0;
            padding: 0;
            clear: both;
        }
        /** end Comments like messages**/
        /** share goteo **/
        div.widget.blog-content-module ul.share-goteo,
        #blog-content .post ul.share-goteo {
            margin: 0;
            padding:0;
            list-style:none;
            float:right;
        }
        div.widget.blog-content-module ul.share-goteo li,
        #blog-content .post ul.share-goteo li{
            display:inline;
            float:left;
            margin: 0 0 0 10px;
        }
        div.widget.blog-content-module ul.share-goteo li.twitter a,
        div.widget.blog-content-module ul.share-goteo li.facebook a,
        div.widget.blog-content-module ul.share-goteo li.rss a,
        #blog-content .post  ul.share-goteo li.twitter a,
        #blog-content .post  ul.share-goteo li.facebook a,
        #blog-content .post  ul.share-goteo li.rss a{
            height:20px;
            float:left;
            padding: 0 0 0 25px;
            font-size: 12px;
            line-height: 20px;
        }
        div.widget.blog-content-module ul.share-goteo li.sharetext,
        #blog-content .post ul.share-goteo li.sharetext{
            height:20px;
            float:left;
            color: #808285;
            font-size: 12px;
        }
        div.widget.blog-content-module ul.share-goteo li.twitter a,
        #blog-content .post ul.share-goteo li.twitter a{
            background: transparent url('twitter.png') scroll no-repeat  0 0;
            color:#13c2ec;
            text-decoration:none;
        }
        div.widget.blog-content-module ul.share-goteo li.twitter a:hover,
        #blog-content .post ul.share-goteo li.twitter a:hover{
            background: transparent url('twitter.png') scroll no-repeat  0 0;
            opacity:0.6;
            color:#808285;
            text-decoration:none;
        }
        div.widget.blog-content-module ul.share-goteo li.facebook a,
        #blog-content .post ul.share-goteo li.facebook a{
            background: transparent url('facebook.png') scroll no-repeat  0 0;
            color:#4a6393;
            text-decoration:none;
        }
        div.widget.blog-content-module ul.share-goteo li.facebook a:hover,
        #blog-content .post ul.share-goteo li.facebook a:hover{
            background: transparent url('facebook.png') scroll no-repeat  0 0;
            color:#808285;
            opacity:0.6;
            text-decoration:none;
        }

        /* send Comment */
        #blog-content div.widget.blog-comment {
            margin: 20px 0 0 0;
        }
        #blog-content div.widget.blog-comment h5 {
            margin: 0 0 5px 0;
        }
        #blog-content div.widget.blog-comment textarea {
            background-color: #DCEEDF;
            border: 1px solid #2EAB58;
            clear: right;
            display: block;
            float: right;
            height: 50px;
            margin: -1px;
            padding: 0.3em 0;
            resize: none;
            width: 525px;
        }

        #blog-content div.widget.blog-comment button {
            margin: 20px 0 0 0;
            float:right;
            font-weight: bold;
            margin-top: 35px;
            padding: 5px 20px;
        }

        #blog-content div.widget.blog-comment a.preview{
            color: #2EAB58;
            font-weight: bold;
            left: 52px;
            position: relative;
            text-decoration: none;
            text-transform: uppercase;
            top: 10px;
        }

        /* Sidebar styles */
        div.widget.blog-sidebar-module h3.title {
            border-bottom: 1px solid #20b3b2;
            color: #000000;
            font: normal 15px "Helvetica Neue", Helvetica, Arial, Geneva, sans-serif;
            margin: 0 0 1em;
            padding: 0 2px 0.2em;
        }
        div.widget.blog-sidebar-module ul#blog-side-posts{
            margin: 0 0 25px 16px;
            padding: 0;
        }
        div.widget.blog-sidebar-module ul#blog-side-posts li{
            margin:0 0 10px 0;
            list-style-position: outside;
        }
        div.widget.blog-sidebar-module ul#blog-side-posts li a{
            text-decoration:none;
            color: #58595B;
            font-size: 12px;
        }
        div.widget.blog-sidebar-module ul#blog-side-posts li a:hover{
            text-decoration:underline;
        }
        div.widget.blog-sidebar-module ul#blog-side-tags,
        div.widget.blog-sidebar-module ul#blog-side-comments{
            margin: 0 10px 25px 0;
            padding: 0;
            list-style:none;
        }
        div.widget.blog-sidebar-module ul#blog-side-tags li{
            margin:0 0 5px 0;
        }
        div.widget.blog-sidebar-module ul#blog-side-tags li a{
            text-decoration:none;
            color:#20B3B2;
        }
        div.widget.blog-sidebar-module ul#blog-side-tags li a:hover{
            text-decoration:underline;
        }
        div.widget.blog-sidebar-module ul#blog-side-comments li .date{
            color:#cabcbf;
            margin: 10px 0;
        }
        div.widget.blog-sidebar-module ul#blog-side-comments li{
            margin:0 0 20px 0;
        }
        div.widget.blog-sidebar-module ul#blog-side-comments li div div.high-comment{
            margin:6px 0 0 -9px;
            display:block;
            padding:4px 8px;
        }
        div.widget.blog-sidebar-module ul#blog-side-comments li div div.high-comment:hover{
            background:#F3F3F3;
        }
        div.widget.blog-sidebar-module ul#blog-side-comments li p{
            margin: 0;
        }

    ○
        ※削除。

/view/m/css/cssmarge_mobile.css 7647-7660
    ×
        body.project-show div#main .project-updates div.widget.blog-comment a.preview{
            color: #2EAB58;
            font-weight: normal;
            left: 60px;
            position: absolute;
            text-decoration: none;
            text-transform: uppercase;
            top: 194px;
            font-style: normal;
            display: block;
            width: 60px;
            font-size: 12px;
        }

    ○
        ※削除。

/view/m/css/cssmarge_mobile.css 7609-7636
    ×
        body.project-show div#main .project-updates div.widget.blog-comment div#bocadillo {
            background: url('/view/css/bocadillo.jpg') no-repeat;
            float: left;
            width: 50px;
            height: 50px;
            margin: 10px 0 0 10px;
        }

        body.project-show div#main .project-updates div.widget.blog-comment textarea {
            clear: right;
            display: block;
            float: right;
            width: 250px;
            height: 50px;
            margin: 10px 10px 20px 0;
            padding: 0.3em 0;
            resize: none;
            background-color: #DCEEDF;
            border: 1px solid #2EAB58;
        }

        body.project-show div#main .project-updates div.widget.blog-comment button.green {
            float: right;
            margin: 0 10px 10px 10px;
            text-align: center;
            display: block;
        }

    ○
        ※削除。

/view/m/css/cssmarge_mobile.css 7594-7600
    ×
        body.project-show div#main .project-updates div.widget.blog-comment {
            padding: 10px 0;
            margin: 0;
            overflow: hidden;
            border-bottom: 1px dashed #c0c0c0;
        }

    ○
        ※削除。

/view/m/css/cssmarge_mobile.css 7567-7578
    ×
        body.project-show .project-updates .post .comments-num {
            float: none;
            background: transparent url('/view/css/ico-blogcomment.png') scroll no-repeat 10px 0;
            background-color: #fff;
            padding: 0 0 0 40px;
            height: 40px;
            width: auto;
            margin: 0;
            line-height: 24px;
            color: both;
        }

    ○
        ※削除。

/view/m/css/cssmarge_mobile.css 7453-7486
    ×
        /* escribe tu comentario */
        .project-updates div.widget.blog-comment textarea {
            background-color: #DCEEDF;
            border: 1px solid #2EAB58;
            clear: right;
            display: block;
            float: right;
            height: 50px;
            margin: 10px -1px -1px;
            padding: 0.3em 0;
            resize: none;
            width: 525px;
        }

        .project-updates div.widget.blog-comment input.green {
            margin: 20px 0 0 0;
            float:right;
            font-weight: bold;
            margin-top: 35px;
            padding: 5px 20px;
        }

        .project-updates div.widget.blog-comment a.preview{
            color: #2EAB58;
            font-weight: normal;
            left: 52px;
            position: relative;
            text-decoration: none;
            text-transform: uppercase;
            top: 10px;
            font-style: normal;
        }
        /* end send comment */

    ○
        ※削除。

/view/m/css/cssmarge_mobile.css 7434-7448
    ×
        .project-updates div.widget.blog-comment {
            margin: 20px 0 0 0;
        }
        .project-updates div.widget.blog-comment h5 {
            margin: 0 0 5px 0;
        }
        .project-updates div.widget.blog-comment textarea {
            display:block;
            width:530px;
        }
        .project-updates div.widget.blog-comment input.button {
            margin: 20px 0 0 0;
            float:right;
        }

    ○
        ※削除。

/view/m/css/cssmarge_mobile.css 7339-7346
    ×
        .project-updates .post .comments-num{
            float:left;
            background: transparent url('/view/css/ico-blogcomment.png') scroll no-repeat  0 0;
            padding: 0 0 0 26px;
            height:24px;
            margin: 0;
            line-height: 24px;
        }

    ○
        ※削除。

/view/m/css/cssmarge_mobile.css 390-400
    ×
        /* = caja de comentarios
        *************************/
        div.widget.blog-comment{position:relative;}
        div.widget.blog-comment button.green{float:right;
            margin-top: 25px;
            margin-bottom: 5px;
        }
        div.widget.blog-comment div#bocadillo{background:url('/view/css/bocadillo.jpg') no-repeat;position:absolute;width: 50px;    height: 50px;
            margin-top: 8px;
        }

    ○
        ※削除。

/controller/admin.php 656
    ×
                                'blog' => $options['blog'],
    ○
        ※削除。

/controller/admin.php 612
    ×
                                'blog' => $options['blog'],
    ○
        ※削除。

/controller/admin.php 599
    ×
                                'blog' => $options['blog'], // entradas de blog (en la gestion de blog)
    ○
        ※削除。

/controller/admin.php 572
    ×
                                'blog' => $options['blog'], // entradas del blog
    ○
        ※削除。

/controller/admin.php 267-275
    ×
                'tags' => array(
                    'label' => Text::_('Tags de blog'),
                    'actions' => array(
                        'list' => array('label' => Text::_('Listando'), 'item' => false),
                        'add' => array('label' => Text::_('Nuevo Tag'), 'item' => false),
                        'edit' => array('label' => Text::_('Editando Tag'), 'item' => true),
                        'translate' => array('label' => Text::_('Traduciendo Tag'), 'item' => true)
                    )
                ),
    ○
        ※削除。

/controller/admin.php 84-95
    ×
                'blog' => array(
                    'label' => Text::_('Blog'),
                    'actions' => array(
                        'list' => array('label' => Text::_('Listando'), 'item' => false),
                        'add' => array('label' => Text::_('Nueva Entrada'), 'item' => false),
                        'edit' => array('label' => Text::_('Editando Entrada'), 'item' => true),
                        'translate' => array('label' => Text::_('Traduciendo Entrada'), 'item' => true),
                        'reorder' => array('label' => Text::_('Ordenando las entradas en Portada'), 'item' => false),
                        'footer' => array('label' => Text::_('Ordenando las entradas en el Footer'), 'item' => false)
                    ),
                    'filters' => array('show' => 'owned', 'blog' => '')
                ),
    ○
        ※削除。

/controller/dashboard.php 607-621
    ×
                        // publicar actualizaciones
                        case 'updates':
                            $viewData['blog'] = $blog;

                            if ($action == 'edit') {
                                $post = Model\Blog\Post::get($id, $_SESSION['translate_lang']);
                                $viewData['post'] = $post;
                            } else {
                                $posts = array();
                                foreach ($blog->posts as $post) {
                                    $posts[] = Model\Blog\Post::get($post->id, $_SESSION['translate_lang']);
                                }
                                $viewData['posts'] = $posts;
                            }
                            break;
    ○
        ※削除。

/controller/dashboard.php 548-563
    ×
                            case 'updates':
                                if (empty($_POST['blog']) || empty($_POST['id'])) {
                                    break;
                                }

                                $post = Model\Blog\Post::get($_POST['id']);

                                $post->title_lang = $_POST['title'];
                                $post->text_lang = $_POST['text'];
                                $post->media_lang = $_POST['media'];
                                $post->legend_lang = $_POST['legend'];
                                $post->lang = $_SESSION['translate_lang'];
                                $post->saveLang($errors);

                                $action = 'edit';
                                break;
    ○
        ※削除。

/controller/dashboard.php 453
    ×
                        $blog = Model\Blog::get($project->id);
    ○
        ※削除。

/controller/dashboard.php 350-363
    ×
                // publicar actualizaciones
                case 'updates':
                    $viewData['blog'] = $blog;
                    $viewData['posts'] = $posts;
                    $viewData['post'] = $post;
                    if ($jump_switch){
                        $_url = explode('/',$_SERVER['REQUEST_URI']);
                        $_postid = $_url[ max(array_keys($_url)) ];
                        if (!is_numeric($_postid)){
                            $_postid = "";
                        }
                        throw new Redirection("/project/{$project->id}/updates/{$_postid}");
                    }
                    break;
    ○
        ※削除。

/controller/dashboard.php 276-283
    ×
            // SubControlador para add, edit, delete y list  
            // devuelve $post en las acciones add y edit y $posts en delete y list
            // maneja por referencia $action, $posts y $errors
            if ($option == 'updates') {
                list($post, $posts) = Dashboard\Projects::prepare_updates($action, $id, $blog->id);
            }
    ○
        ※削除。

/controller/dashboard.php 258-272
    ×
                    case 'updates':
                        // verificación: si no llega blog correcto no lo procesamos
                        if (empty($_POST['blog']) || $_POST['blog'] != $blog->id) throw new Redirection('/dashboard/projects/summary');
                        if ($action === 'edit' || $action === 'add'){
                            $jump_switch = true;
                        }

                        list($action, $id) = Dashboard\Projects::process_updates($action, $project, $errors);
                        if (($action === 'list') && ((bool)$_POST['publish']) && $jump_switch){
                            $jump_switch = true;
                        } else {
                            $jump_switch = false;
                        }

                        break;
    ○
        ※削除。

/controller/dashboard.php 216-218
    ×
            // teniendo proyecto de trabajo, comprobar si el proyecto esta en estado de tener blog
            if ($option == 'updates') $blog = Dashboard\Projects::verifyBlog($project);
    ○
        ※削除。

/controller/dashboard.php 192
    ×
         *      'actualizaciones' blog del proyecto (ahora son como mensajes),
    ○
        ※削除。

/controller/index.php 53-58
    ×
            // entradas de blog
            if (isset($order['posts'])) {
                // entradas en portada
                $posts     = Post::getAll();
            }
    ○
        ※削除。

/controller/message.php 329-424
    ×
        /*
         * Metodo para publicar un comentario en un post
         */
        public function post ($post, $project = null) {

            if ($_SERVER['REQUEST_METHOD'] == 'POST' && !empty($_POST['message'])) {
                $comment = new Model\Blog\Post\Comment(array(
                    'user' => $_SESSION['user']->id,
                    'post' => $post,
                    'date' => date('Y-m-d H:i:s'),
                    'text' => $_POST['message']
                ));

                if ($comment->save($errors)) {
                    // a ver los datos del post
                    $postData = Model\Blog\Post::get($post);

                    // Evento Feed
                    $log = new Feed();
                    if (!empty($project)) {
                        $projectData = Model\Project::getMini($project);
                        $log->setTarget($projectData->id);
                        $log_html = \vsprintf('%s ha escrito un %s en la entrada "%s" en las %s del proyecto %s', array(
                            Feed::item('user', $_SESSION['user']->name, $_SESSION['user']->id),
                            Feed::item('message', 'Comentario'),
                            Feed::item('update-comment', $postData->title, $projectData->id.'/updates/'.$postData->id.'#comment'.$comment->id),
                            Feed::item('update-comment', 'Novedades', $projectData->id.'/updates/'),
                            Feed::item('project', $projectData->name, $projectData->id)
                        ));
                    } else {
                        $log->setTarget('goteo', 'blog');
                        $log_html = \vsprintf('%s ha escrito un %s en la entrada "%s" del blog de %s', array(
                            Feed::item('user', $_SESSION['user']->name, $_SESSION['user']->id),
                            Feed::item('message', 'Comentario'),
                            Feed::item('blog', $postData->title, $postData->id.'#comment'.$comment->id),
                            Feed::item('blog', 'Goteo', '/')
                        ));
                    }
                    $log->populate('usuario escribe comentario en blog/novedades', '/admin/projects', $log_html);
                    $log->doAdmin('user');

                    // Evento público
                    if (!empty($project)) {
                        $projectData = Model\Project::getMini($project);
                        $log_html = Text::html('feed-updates-comment',
                                            Feed::item('update-comment', $postData->title, $projectData->id.'/updates/'.$postData->id.'#comment'.$comment->id),
                                            Feed::item('update-comment', 'Novedades', $projectData->id.'/updates/'),
                                            Feed::item('project', $projectData->name, $projectData->id)
                                            );
                    } else {
                        $log_html = Text::html('feed-blog-comment',
                                            Feed::item('blog', $postData->title, $postData->id.'#comment'.$comment->id),
                                            Feed::item('blog', 'Goteo', '/')
                                            );
                    }
                    $log->populate($_SESSION['user']->name, '/user/profile/'.$_SESSION['user']->id, $log_html, $_SESSION['user']->avatar->id);
                    $log->doPublic('community');
                    unset($log);

                    //Notificación al autor del proyecto
                    // Obtenemos la plantilla para asunto y contenido
                    $template = Template::get(31);

                    // Sustituimos los datos
                    $subject = str_replace('%PROJECTNAME%', $projectData->name, $template->title);

                    $response_url = SITE_URL . '/user/profile/' . $_SESSION['user']->id . '/message';
                    $project_url = SITE_URL . '/project/' . $projectData->id . '/updates/'.$postData->id.'#comment'.$comment->id;

                    $search  = array('%MESSAGE%', '%OWNERNAME%', '%USERNAME%', '%PROJECTNAME%', '%PROJECTURL%', '%RESPONSEURL%');
                    $replace = array($_POST['message'], $projectData->user->name, $_SESSION['user']->name, $projectData->name, $project_url, $response_url);
                    $content = \str_replace($search, $replace, $template->text);

                    $mailHandler = new Mail();

                    $mailHandler->to = $projectData->user->email;
                    $mailHandler->toName = $projectData->user->name;
                    $mailHandler->subject = $subject;
                    $mailHandler->content = $content;
                    $mailHandler->html = true;
                    $mailHandler->template = $template->id;
                    $mailHandler->send($errors);

                    unset($mailHandler);

                } else {
                    // error
                }
            }

            if (!empty($project)) {
                throw new Redirection("/project/{$project}/updates/{$post}#comment".$comment->id, Redirection::TEMPORARY);
            } else {
                throw new Redirection("/blog/{$post}#comment".$comment->id, Redirection::TEMPORARY);
            }
        }

    ○
        ※削除。

/controller/project.php 491-499
    ×
                // sus entradas de novedades
                $blog = Model\Blog::get($project->id);
                // si está en modo preview, ponemos  todas las entradas, incluso las no publicadas
                if (isset($_GET['preview']) && $_GET['preview'] == $_SESSION['user']->id) {
                    $blog->posts = Model\Blog\Post::getAll($blog->id, null, false);
                }

                $viewData['blog'] = $blog;

    ○
        ※削除。

/controller/rss.php 30-56
    ×
            // sacamos su blog
            $blog = Model\Blog::get(\GOTEO_NODE, 'node');

            $tags = Model\Blog\Post\Tag::getAll();

            /*
            echo '<pre>'.print_r($tags, 1).'</pre>';
            echo '<pre>'.print_r($blog->posts, 1).'</pre>';
            die;
             * 
             */

            // al ser xml no usaremos vista
            // usaremos FeedWriter

            // configuracion
            $config = array(
                'title' => 'Goteo Rss',
                'description' => 'Blog Goteo.org rss',
                'link' => SITE_URL,
                'indent' => 6
            );

            $data = array(
                'tags' => $tags,
                'posts' => $blog->posts
            );
    ○
            // configuracion
            $config = array(
                'title' => 'Goteo Rss',
                'description' => '旧ブログ Goteo.org rss',
                'link' => SITE_URL,
                'indent' => 6
            );

            $data = array();

/controller/translate.php 570-576
    ×
                        'post' => array(
                            'label' => Text::_('Blog'),
                            'actions' => array(
                                'list' => array('label' => Text::_('Listando'), 'item' => false),
                                'edit' => array('label' => Text::_('Traduciendo entrada'), 'item' => true)
                            )
                        ),
    ○
        ※削除

/controller/translate.php 483-489
    ×
                        'tag' => array(
                            'label' => Text::_('Tags de blog'),
                            'actions' => array(
                                'list' => array('label' => Text::_('Listando'), 'item' => false),
                                'edit' => array('label' => Text::_('Traduciendo Tag'), 'item' => true)
                            )
                        ),
    ○
        ※削除

/controller/translate.php 441-447
    ×
                        'post' => array(
                            'label' => Text::_('Blog'),
                            'actions' => array(
                                'list' => array('label' => Text::_('Listando'), 'item' => false),
                                'edit' => array('label' => Text::_('Traduciendo Entrada'), 'item' => true)
                            )
                        ),
    ○
        ※削除

/controller/translate.php 370-371
    ×
                                Feed::item('blog', $id),
                                Feed::item('blog', $table),
    ○
        ※削除

/controller/translate.php 340-354
    ×
                            // Evento Feed
                            /*
                            $log = new Feed();
                            $log->populate('contenido traducido (traductor)', '/translate/'.$table,
                                \vsprintf('El traductor %s ha %s el contenido del registro %s de la tabla %s al %s', array(
                                Feed::item('user', $_SESSION['user']->name, $_SESSION['user']->id),
                                Feed::item('relevant', 'Traducido'),
                                Feed::item('blog', $id),
                                Feed::item('blog', $table),
                                Feed::item('relevant', Lang::get($_SESSION['translate_lang'])->name)
                            )));
                            $log->doAdmin('admin');
                            unset($log);
                            */
    ○
        ※削除

/controller/translate.php 290-291
    ×
                                Feed::item('blog', $id),
                                Feed::item('blog', $_POST['node']),
    ○
        ※削除

/controller/translate.php 138
    ×
                                    Feed::item('blog', $id),
    ○
        ※削除

/controller/translate.php 113-126
    ×
                            // Evento Feed
                            /*
                            $log = new Feed();
                            $log->populate('texto traducido (traductor)', '/translate/texts',
                                \vsprintf('El traductor %s ha %s el texto %s al %s', array(
                                    Feed::item('user', $_SESSION['user']->name, $_SESSION['user']->id),
                                    Feed::item('relevant', 'Traducido'),
                                    Feed::item('blog', $id),
                                    Feed::item('relevant', Lang::get($_POST['lang'])->name)
                            )));
                            $log->doAdmin('admin');
                            unset($log);
                            */
    ○
        ※削除

/controller/admin.php 188-189
    ×
                                Feed::item('relevant', 'Quitado'),
                                Feed::item('blog', $tempData->title)
    ○
                                Feed::item('relevant', 'Quitado')

/controller/admin/tags.php
    ○
        ※ファイル削除。

/controller/cron/daily.php 235-290
    ×
                // Avisos periodicos 
                // si lleva más de 15 días: si no se han publicado novedades en la última semana 
                // Ojo! que si no a enviado ninguna no lanza este sino la de cada 6 días
                if (!$avisado && $project->days > 15) {
                    if ($debug) echo "ya lleva una quincena de campaña, verificamos novedades<br />";
                    
                    // veamos si ya le avisamos hace una semana
                    // Si ya se mandó esta plantilla (al llegar a los 20 por primera vez) no se envía de nuevo
                    $now_local = \Goteo\Core\Model::localNow();
                    $sql = "
                        SELECT
                            id,
                            DATE_FORMAT(
                                from_unixtime(unix_timestamp('${now_local}') - unix_timestamp(date))
                                , '%j'
                            ) as days
                        FROM mail
                        WHERE mail.email = :email
                        AND mail.template = 23
                        ORDER BY mail.date DESC
                        LIMIT 1";
                    $query = Model\Project::query($sql, array(':email' => $project->user->email));
                    $lastsend = $query->fetchObject();
                    if (!$lastsend->id || $lastsend->days > 7) {
                        // veamos cuanto hace de la última novedad
                        $sql = "
                            SELECT
                                DATE_FORMAT(
                                    from_unixtime(unix_timestamp('${now_local}') - unix_timestamp(date))
                                    , '%j'
                                ) as days
                            FROM post
                            INNER JOIN blog
                                ON  post.blog = blog.id
                                AND blog.type = 'project'
                                AND blog.owner = :project
                            WHERE post.publish = 1
                            ORDER BY post.date DESC
                            LIMIT 1";
                        $query = Model\Project::query($sql, array(':project' => $project->id));
                        $lastUpdate = $query->fetchColumn(0);
                        if ($lastUpdate > 7) {
                            if ($debug) echo "Ultima novedad es de hace más de una semana<br />";
                            Send::toOwner('no_updates', $project);
                        } elseif (is_numeric($lastUpdate)) {
                            if ($debug) echo "Publicó novedad hace menos de una semana<br />";
                        } else {
                            if ($debug) echo "No se ha publicado nada, recibirá el de cada 6 días<br />";
                        }
                    } else {
                        if ($debug) echo "Se le avisó por novedades hace menos de una semana<br />";
                    }
                    
                    
                }
                
    ○
        ※削除。

/controller/cron/daily.php 104-110
    ×
                        if (Model\Blog::hasUpdates($project->id)) {
                            if ($debug) echo "Ya ha publicado novedades<br />";
                        } else {
                            if ($debug) echo "Envío aviso de que no ha publicado novedades<br />";
                            Send::toOwner('any_update', $project);
                            $avisado = true;
                        }
    ○
        ※削除。

/view/news.html.php 21-40
    ×
         use Goteo\Library\Text,
            Goteo\Model\Blog\Post,
            Goteo\Core\View;

        $bodyClass = 'news';

        $read_more = Text::get('regular-read_more');

        // noticias
        $news = $this['news'];

        // últimas entradas del blog goteo
        $list = array();

        $title = Text::get('blog-side-last_posts');
        $items = Post::getAll(1, 7);
        // enlace a la entrada
        foreach ($items as $item) {
            $list[] = '<a href="/blog/'.$item->id.'"> '.Text::recorta($item->title, 100).'</a>';
        }

    ○
         use Goteo\Library\Text,
            Goteo\Core\View;

        $bodyClass = 'news';

        $read_more = Text::get('regular-read_more');

        // noticias
        $news = $this['news'];

/view/news.html.php 60-69
    ×
        <div id="news-sidebar">
            <div class="widget news-sidebar-module">
                <h3 class="supertitle"><?php echo $title; ?></h3>
                <ul id="news-side-posts">
                    <?php foreach ($list as $item) : ?>
                    <li><?php echo $item; ?></li>
                    <?php endforeach; ?>
                </ul>
            </div>
        </div>
    ○
        ※削除。

/model/post.php
    ○
        ※ファイル削除。

/view/translate/contents/list.html.php 96-98
    ×
                <?php if ($table == 'post') : ?>
                <td><a href="/blog/<?php echo $item->id; ?>?preview=<?php echo $_SESSION['user']->id ?>" target="_blank">[Ver]</a></td>
                <?php endif; ?>
    ○
        ※削除。

/view/project/view.html.php 260-264
    ×
                    case 'updates':
                        echo
                            new View('view/project/widget/updates.html.php', array('project' => $project, 'blog' => $blog, 'post' => $post));
                        break;
                    
    ○
        ※削除。

/view/m/project/view.html.php 192
    ×
                            new View('view/m/project/widget/summary.h_ttl.html.php', array('project' => $project)),
                            new View('view/m/project/widget/updates.html.php', array('project' => $project, 'blog' => $blog, 'post' => $post));
    ○
                            new View('view/m/project/widget/summary.h_ttl.html.php', array('project' => $project));

/view/project/widget/updates.html.php
    ○
        ※ファイル削除。

/model/home.php 73
    ×
                     'posts' => '/admin/blog',
    ○
        ※削除。

/model/home.php 43
    ×
                     'posts' => Text::_('Entradas de blog'),
    ○
        ※削除。

/model/image.php 358-385
    ×
        /*
         *  画像をblog幅に合わせて出力 - 2015.11.30
         */
        public function getLinkEx(){
            $imgpath = $this->dir_originals . $this->name;

            $info = getimagesize($imgpath);

            // default width
            $new_width = 580;

            // 初期値
            $n_w = 500;
            $n_h = 285;

            $ratio = 0;

            if ($info[0] > $new_width){
                $ratio = $new_width / $info[0];
                $n_w = $new_width;
                $n_h = round($ratio * $info[1]);
            } else {
                $n_w = $info[0];
                $n_h = $info[1];
            }
            return $this->getLink($n_w, $n_h);
        }
    ○
        ※削除。

/model/project.php 1702
    ×
                            self::query("UPDATE blog SET owner = :newid WHERE owner = :id AND type='project'", array(':newid'=>$newid, ':id'=>$this->id));
    ○
        ※削除。

/controller/dashboard/projects.php 496-600
    ×
        /**
         * Graba un registro de novedad con lo recibido por POST
         * 
         * @param array  $action (add o edit) y $id del post
         * @param object $project Instancia de proyecto de trabajo
         * @param array $errors (por referncia)
         * @return array $action por si se queda editando o sale a la lista y $id por si es un add y se queda editando
         */
        public static function process_updates ($action, $project, &$errors = array()) {
            

            $editing = false;

            if (!empty($_POST['id'])) {
                $post = Model\Blog\Post::get($_POST['id']);
            } else {
                $post = new Model\Blog\Post();
            }
            // campos que actualizamos
            $fields = array(
                'id',
                'blog',
                'title',
                'text',
                'image',
                'media',
                'legend',
                'date',
                'publish',
                'allow'
            );

            foreach ($fields as $field) {
                $post->$field = $_POST[$field];
            }

            // tratar la imagen y ponerla en la propiedad image
            if (!empty($_FILES['image_upload']['name'])) {
                $post->image = $_FILES['image_upload'];
                $editing = true;
            }

            // tratar las imagenes que quitan
            foreach ($post->gallery as $key => $image) {
                if (!empty($_POST["gallery-{$image->id}-remove"])) {
                    $image->remove('post');
                    unset($post->gallery[$key]);
                    if ($post->image == $image->id) {
                        $post->image = '';
                    }
                    $editing = true;
                }
            }

            if (!empty($post->media)) {
                $post->media = new Model\Project\Media($post->media);
            }

            // el blog de proyecto no tiene tags?Â¿?
            // $post->tags = $_POST['tags'];
            /// este es el único save que se lanza desde un metodo process_
            if ($post->save($errors)) {
                $id = $post->id;
                if ($action == 'edit') {
                    Message::Info(Text::get('dashboard-project-updates-saved'));
                } else {
                    Message::Info(Text::get('dashboard-project-updates-inserted'));
                }
                $action = $editing ? 'edit' : 'list';

                // si ha marcado publish, grabamos evento de nueva novedad en proyecto
                if ((bool) $post->publish) {
                    // Evento Feed
                    $log = new Feed();
                    $log->setTarget($project->id);
                    $log->populate('usuario publica una novedad en su proyecto (dashboard)', '/project/' . $project->id . '/updates/' . $post->id, 
                            \vsprintf('%s ha publicado un nuevo post en %s sobre el proyecto %s, con el título "%s"', array(
                                Feed::item('user', $_SESSION['user']->name, $_SESSION['user']->id),
                                Feed::item('blog', Text::get('project-menu-updates')),
                                Feed::item('project', $project->name, $project->id),
                                Feed::item('update', $post->title, $project->id . '/updates/' . $post->id)
                            )));
                    $log->unique = true;
                    $log->doAdmin('user');

                    // evento público
                    $log->populate($post->title, '/project/' . $project->id . '/updates/' . $post->id, Text::html('feed-new_update', Feed::item('user', $_SESSION['user']->name, $_SESSION['user']->id), Feed::item('blog', Text::get('project-menu-updates')), Feed::item('project', $project->name, $project->id)
                            ), $post->gallery[0]->id);
                    $log->doPublic('projects');

                    // si no ha encontrado otro, lanzamos la notificación a cofinanciadores
                    if (!$log->unique_issue) {
                        \Goteo\Controller\Cron\Send::toInvestors('update', $project, $post);
                    }

                    unset($log);
                }
            } else {
                $errors[] = Text::get('dashboard-project-updates-fail');
            }

            return array($action, $id);
            
        }
        
    ○
        ※削除。

/controller/dashboard/projects.php 147-212
    ×
        /**
         * Gestiona las acciones de gestión de updates
         * 
         * @param type $action (por referencia)
         * @param type $id del post a gestionar
         * @param type $blog id del blog del proyecto
         * @param type $errors (por referencia)
         * @return instancia de Post para las acciones add y edit , array de Posts para las acciones delete y list
         */
        public static function prepare_updates (&$action, $id, $blog) {
            // segun la accion
            switch ($action) {
                case 'none' :
                    $posts = array();
                    break;
                case 'add':
                    $post = new Model\Blog\Post(
                                    array(
                                        'blog' => $blog,
                                        'date' => date('Y-m-d'),
                                        'publish' => false,
                                        'allow' => true
                                    )
                    );
                    return array($post, null);
                    
                    break;
                case 'edit':
                    if (empty($id)) {
                        Message::Error(Text::get('dashboard-project-updates-nopost'));
                        $action = 'list';
                        break;
                    } else {
                        $post = Model\Blog\Post::get($id);

                        if (!$post instanceof Model\Blog\Post) {
                            Message::Error(Text::get('dashboard-project-updates-postcorrupt'));
                            $action = 'list';
                            break;
                        }
                        return array($post, null);
                    }

                    break;
                case 'delete':
                    $post = Model\Blog\Post::get($id);
                    if ($post->delete($id)) {
                        Message::Info(Text::get('dashboard-project-updates-deleted'));
                    } else {
                        Message::Error(Text::get('dashboard-project-updates-delete_fail'));
                    }
                    $posts = Model\Blog\Post::getAll($blog, null, false);
                    $action = 'list';
                    return array(null, $posts);

                    break;
                default:
                    $posts = Model\Blog\Post::getAll($blog, null, false);
                    $action = 'list';
                    return array(null, $posts);

                    break;
            }
        }
        
    ○
        ※削除。

/controller/dashboard/projects.php 102-146
    ×
        /**
         * Verifica que todo está correcto para publicar novedades
         * 
         * @param type $project Instancia de proyecto de trabajo
         * @return \Goteo\Controller\Dashboard\Blog
         * @throws Redirection a Mis Proyectos si hay algo mal
         */
        public static function verifyBlog($project) {
            
            $errors = array();
            
            // tenemos proyecto de trabajo, comprobar si el proyecto esta en estado de tener blog
            if ($project->status < 3 || $project->status == 6) {
                Message::Error(Text::get('dashboard-project-blog-wrongstatus'));
                throw new Redirection('/dashboard/projects/summary');
            }
            
            // si no tiene registro de blog se lo creamos
            $blog = Model\Blog::get($project->id);
            if (!$blog instanceof Model\Blog) {
                $blog = new Model\Blog(
                                array(
                                    'id' => '',
                                    'type' => 'project',
                                    'owner' => $project->id,
                                    'active' => true,
                                    'project' => $project->id,
                                    'posts' => array()
                                )
                );
                if (!$blog->save($errors)) {
                    Message::Error(Text::get('dashboard-project-blog-fail'));
                    Message::Error(implode('<br />', $errors));
                    throw new Redirection('/dashboard/projects/summary');
                }
            } elseif (!$blog->active) {
                Message::Error(Text::get('dashboard-project-blog-inactive'));
                throw new Redirection('/dashboard/projects/summary');
            }

            return $blog;
        }

    ○
        ※削除。

/view/prologue.html.php 135
    ×
        <meta property="og:description" content="<?php echo htmlspecialchars(strip_tags(mb_substr($blog_post->posts[$blog_key]->text, 0, 100).'...'), ENT_QUOTES, 'UTF-8'); ?>" />
    ○
        ※削除。

/view/prologue.html.php 132
    ×
        <meta property="og:title" content="<?php echo htmlspecialchars($blog_post->posts[$blog_key]->title . ' / ' . $ogmeta['title'], ENT_QUOTES, 'UTF-8'); ?>" />
    ○
        ※削除。

/view/prologue.html.php 130
    ×
        endif;
    ○
        ※削除。

/view/prologue.html.php 112-119
    ×
        <? $_blog = Post::get($this['post'], LANG);
        $blog_post = $this['blog'];
        $blog_key = key($this['blog']->posts);
        if($_blog->image):
            ?>
            <meta property="og:image" content="<?php echo $_blog->image->getLink(500, 285) ?>" />
            <?
        else:

    ○
        <? 

/view/prologue.html.php 23-24
    ×
        Goteo\Library\Text,
        Goteo\Model\Blog\Post;
    ×
        Goteo\Library\Text;

/library/feed.php 24
    ×
        Goteo\Model\Blog\Post,
    ○
        ※削除。

/view/dashboard/projects/updates.html.php
    ○
        ※ファイル削除。

/view/dashboard/translates/updates.html.php
    ○
        ※ファイル削除。

/view/m/dashboard/projects/updates.html.php
    ○
        ※ファイル削除。

/view/m/dashboard/translates/updates.html.php
    ○
        ※ファイル削除。

/view/m/project/widget/updates.html.php
    ○
        ※ファイル削除。

/view/project/widget/evaluation.html.php 22-23
    ×
        Goteo\Core\View,
        Goteo\Model\Blog\Post;
    ○
        Goteo\Core\View;

/view/project/widget/project.html.php 150-173
    ×
        <?php
        /*
         * quitamos los botones
         *
        if ($this['dashboard'] === true) : // si estamos en el dashboard no hay (apoyar y el ver se abre en una ventana nueva) ?>
        <div class="buttons">
            <?php if ($this['own'] === true) : // si es propio puede ir a editarlo ?>
            <a class="button red suportit" href="<?php echo SITE_URL ?>/project/edit/<?php echo $project->id ?>"><?php echo Text::get('regular-edit'); ?></a>
            <?php endif; ?>
            <a class="button view" href="<?php echo SITE_URL ?>/project/<?php echo $project->id ?>" target="_blank"><?php echo Text::get('regular-view_project'); ?></a>
        </div>
        <?php else : // normal ?>
        <div class="buttons">
            <?php if ($project->status == 3) : // si esta en campa�a se puede aportar ?>
            <a class="button violet supportit" href="<?php echo SITE_URL ?>/project/<?php echo $project->id ?>/invest"<?php echo $blank; ?>><?php echo Text::get('regular-invest_it'); ?></a>
            <?php else : ?>
            <a class="button view" href="<?php echo SITE_URL ?>/project/<?php echo $project->id ?>/updates"<?php echo $blank; ?>><?php echo Text::get('regular-see_blog'); ?></a>
            <?php endif; ?>
            <a class="button view" href="<?php echo SITE_URL ?>/project/<?php echo $project->id ?>"<?php echo $blank; ?>><?php echo Text::get('regular-view_project'); ?></a>
        </div>
        <?php endif;
         *
         */
        ?>

    ○
        ※削除。

/view/m/project/view.html.php 55-59
    ×
        if (!empty($blog->posts)) {
            $updates = ' (' . count($blog->posts) . ')';
        } else {
            $updates = '';
        }

    ○
        ※削除。

/view/m/project/view.html.php 34
    ×
        $blog    = $this['blog'];
    ○
        ※削除。

/view/m/project/view.html.php 27
    ×
        Goteo\Model\Blog,
    ○
        ※削除。

/view/project/widget/support.html.php 61-65
    ×
            <?/*php if ($project->status == 3) : // boton apoyar solo si esta en campaña ?>
            <a class="button violet supportit" href="/project/<?php echo $project->id; ?>/invest"><?php echo Text::get('regular-invest_it'); ?></a>
            <?php else : ?>
            <a class="button view" href="/project/<?php echo $project->id ?>/updates"><?php echo Text::get('regular-see_blog'); ?></a>
            <?php endif; */?>

    ○
        ※削除。

/view/project/view.html.php 56-60
    ×
        if (!empty($blog->posts)) {
            $updates = ' (' . count($blog->posts) . ')';
        } else {
            $updates = '';
        }
    ○
        $updates = '';

/view/project/view.html.php 34
    ×
        $blog    = $this['blog'];
    ○
        ※削除

/view/project/view.html.php 27
    ×
        Goteo\Model\Blog,
    ○
        ※削除

/view/m/project/widget/support.html.php 62
    ×
            <?php /* else : ?>
            <a class="button view" href="/project/<?php echo $project->id ?>/updates"><?php echo Text::get('regular-see_blog'); ?></a>
            <?php */ endif; ?>
    ○
            <?php endif; ?>

/view/m/home/posts.html.php 57-58
    ×

                <div class="read_more"><a href="<?php echo ($post->owner_type == 'project') ? '/project/'.$post->owner_id.'/updates/'.$post->id : '/blog/'.$post->id; ?>"><?php echo Text::get('regular-read_more') ?></a></div>

    ○
        ※削除。

/view/m/home/posts.html.php 51-52
    ×
                <h3><?php if ($post->owner_type == 'project') { echo '<a href="/project/'.$post->owner_id.'/updates/'.$post->id.'">'.Text::get('project-menu-home').' '.$post->owner_name.'</a>: ' . $post->title; } 
                else { echo '<a href="/blog/'.$post->id.'">'.$post->title.'</a>'; } ?></h3>
    ○
                <h3><?php if ($post->owner_type == 'project') { echo '<a href="/project/'.$post->owner_id.'/updates/'.$post->id.'">'.Text::get('project-menu-home').' '.$post->owner_name.'</a>: ' . $post->title; } ?></h3>

/view/home/posts.html.php 57-58
    ×

                <div class="read_more"><a href="<?php echo ($post->owner_type == 'project') ? '/project/'.$post->owner_id.'/updates/'.$post->id : '/blog/'.$post->id; ?>"><?php echo Text::get('regular-read_more') ?></a></div>
    ○
        ※削除。

/view/home/posts.html.php 51-52
    ×
                <h3><?php if ($post->owner_type == 'project') { echo '<a href="/project/'.$post->owner_id.'/updates/'.$post->id.'">'.Text::get('project-menu-home').' '.$post->owner_name.'</a>: ' . $post->title; } 
                else { echo '<a href="/blog/'.$post->id.'">'.$post->title.'</a>'; } ?></h3>
    ○
                <h3><?php if ($post->owner_type == 'project') { echo '<a href="/project/'.$post->owner_id.'/updates/'.$post->id.'">'.Text::get('project-menu-home').' '.$post->owner_name.'</a>: ' . $post->title; } ?></h3>

/view/admin/index.html.php 56-57
    ×
                                //$hide_list = array('blog', 'texts', 'tags', 'translates', 'worth', 'news', 'banners');
                                if ($oCode != 'blog' && $oCode != 'texts' && $oCode != 'tags' && $oCode != 'translates' && $oCode != 'worth' && $oCode != 'news' && $oCode != 'banners' && !empty($option['label'])):
    ○
                                if ($oCode != 'texts' && $oCode != 'tags' && $oCode != 'translates' && $oCode != 'worth' && $oCode != 'news' && $oCode != 'banners' && !empty($option['label'])):

/library/text.php 346
    ×
                'blog'  => static::_('Blog/Actualizaciones'),
    ○
        ※削除。

/library/content.php 42
    ×
                'post'      => Text::_('Blog'),
    ○
        ※削除。

/library/feed.php 108
    ×
                'comment' => '/blog/',
    ○
        ※削除。

/library/feed.php 105
    ×
                'blog' => '/blog/',
    ○
        ※削除。

/library/feed.php 86
    ×
                'blog' => 'grey',
    ○
        ※削除。

────────────────────────────────────────────────────────────
2016-03-07 14:59

    解説
        blog昨日削除時の、GitHubにアップロードし忘れと思われるもの。

/controller/admin/news.php 188-189
    ×
                                Feed::item('relevant', 'Quitado'),
                                Feed::item('blog', $tempData->title)
    ○
                                Feed::item('relevant', 'Quitado')

    解説
        メモ書き追加。改修リストなど。

/#TODO.txt
    ○
        ※ファイル追加。

────────────────────────────────────────────────────────────
2016-03-07 17:59

    解説
        レビュー機能の削除。
        （プレビューや、レビュー申請中を間違えて消さないこと）

/controller/review.php
    ○
        ※ファイル削除。

/controller/admin/reviews.php
    ○
        ※ファイル削除。

/model/review.php
    ○
        ※ファイル削除。

/model/user/review.php
    ○
        ※ファイル削除。

/view/admin/reviews
    ○
        ※フォルダーごと削除。

/view/review
    ○
        ※フォルダーごと削除。

//2016-03-07 21:31 この更新はバグの原因だった。
// /view/project/edit/preview.html.php 48-65
//    ×
//        // si es enviable ponemos el boton
//        if ($project->finishable) {
//            $buttons['finish'] = array(
//                'type'  => 'submit',
//                'name'  => 'finish',
//                'label' => Text::get('form-send_review-button'),
//                'class' => 'confirm red'
//            );
//        } else {
//            $buttons['nofinish'] = array(
//                'type'  => 'submit',
//                'name'  => 'nofinish',
//                'label' => Text::get('form-send_review-button'),
//                'class' => 'confirm disabled',
//                'disabled' => 'disabled'
//            );
//        }
//    ○
//        ※削除。

//2016-03-07 21:31 この更新はバグの原因だった。
// /view/project/edit/preview.html.php 38-47
//    ×
//        // boton de revisar que no sirve para mucho
//        $buttons = array(
//            'review' => array(
//                'type'  => 'submit',
//                'name'  => $goto,
//                'label' => Text::get('form-self_review-button'),
//                'class' => 'retry'
//            )
//        );
//    ○
//        ※削除。

//2016-03-07 21:31 この更新はバグの原因だった。
// /view/m/project/edit/preview.html.php 39-66
//    ×
//        // boton de revisar que no sirve para mucho
//        $buttons = array(
//            'review' => array(
//                'type'  => 'submit',
//                'name'  => $goto,
//                'label' => Text::get('form-self_review-button'),
//                'class' => 'retry'
//            )
//        );
//
//        // si es enviable ponemos el boton
//        if ($project->finishable) {
//            $buttons['finish'] = array(
//                'type'  => 'submit',
//                'name'  => 'finish',
//                'label' => Text::get('form-send_review-button'),
//                'class' => 'confirm red'
//            );
//        } else {
//            $buttons['nofinish'] = array(
//                'type'  => 'submit',
//                'name'  => 'nofinish',
//                'label' => Text::get('form-send_review-button'),
//                'class' => 'confirm disabled',
//                'disabled' => 'disabled'
//            );
//        }
//    ○
//        ※削除。

/view/header/menu.html.php 71-73
    ×
                        <?php if (ACL::check('/review')) : ?>
                            <li><a href="/review"><span><?php echo Text::get('regular-review_board'); ?></span></a></li>
                        <?php endif; ?>
    ○
        ※削除。

/view/admin/projects/list.html.php 197-198
    ×
                    <?php if ($project->status == 1) : ?><a href="<?php echo "/admin/reviews/add/{$project->id}"; ?>" onclick="return confirm('<?php echo Text::_("Se va a iniciar revisión de un proyecto en estado Edición, ok?"); ?>');">[<?php echo Text::_("Iniciar revisión"); ?>]</a><?php endif; ?>
                    <?php if ($project->status == 2) : ?><a href="<?php echo "/admin/reviews/?project=".urlencode($project->id); ?>">[<?php echo Text::_("Ir a la revisión"); ?>]</a><?php endif; ?>
    ○
        ※削除。

/view/admin/projects/list.html.php 186
    ×
                    <?php if ($project->status < 2) : ?><a href="<?php echo "/admin/projects/review/{$project->id}"; ?>" onclick="return confirm('<?php echo Text::_("El creador no podrá editarlo más, ok?"); ?>');">[<?php echo Text::_("A revisión"); ?>]</a><?php endif; ?>
    ○
        ※削除。

/view/admin/accounts/list.html.php 43-45
    ×
        'review' => array (
            'label' => Text::_("Para revisión"),
            'first' => Text::_("Todos")),
    ○
        ※削除。

/model/user/translate.php 267
    ×
                //Text::get('review-set_ready-fail');
    ○
        ※削除。

/controller/admin/projects.php 192-200
    ×
                case 'review':
                    // pasar un proyecto a revision
                    if ($project->ready($errors)) {
                        $redir = '/admin/reviews/add/'.$project->id;
                        $log_text = Text::_('El admin %s ha pasado el proyecto %s al estado <span class="red">Revision</span>');
                    } else {
                        $log_text = Text::_('Al admin %s le ha fallado al pasar el proyecto %s al estado <span class="red">Revision</span>');
                    }
                    break;
    ○
        ※削除。

/controller/ws.php 94-132
    ×
        public function set_review_comment($user, $review) {
            // comprobar que tiene asignada esta revision
            if (Model\User\Review::is_legal($user, $review)) {

                $comment = new Model\User\Review (array (
                                'user'   => $user,
                                'id' => $review
                ));
                
                $parts = explode('-', $_POST['campo']);
                if (in_array($parts[0], array('project', 'owner', 'reward')) &&
                    in_array($parts[1], array('evaluation', 'recommendation'))) {
                    $section = $parts[0];
                    $field   = $parts[1];

                    $text = $_POST['valor'];

                    if ($comment->setComment($section, $field, $text)) {
                        $result = 'Grabado';
                    } else {
                        $result = 'Error';
                    }

                    header ('HTTP/1.1 200 Ok');
                    echo $result;
                    die;

                } else {
                    header ('HTTP/1.1 400 Bad request');
                    die;
                }

            } else {
                header ('HTTP/1.1 403 Forbidden');
                die;
            }
        }
    ○
        ※削除。

/controller/ws.php 80
    ×
                echo "Revision: $review<br />";
    ○
        ※削除。

/controller/ws.php 48-92
    ×
        public function set_review_criteria($user, $review) {
            // comprobar que tiene asignada esta revision
            if (Model\User\Review::is_legal($user, $review)) {

                $score = new Model\User\Review (array (
                                'user'   => $user,
                                'id' => $review
                ));

                $parts = explode('-', $_POST['campo']);
                if ($parts[0] == 'criteria') {
                    $criteria = $parts[1];
                } else {
                    header ('HTTP/1.1 400 Bad request');
                    die;
                }
                $value = $_POST['valor'];

                // puntuamos
                if ($score->setScore($criteria, $value)) {
                    $result = 'Ok';
                } else {
                    $result = 'fail';
                }

                // recalculamos
                $new_score = $score->recount();

                header ('HTTP/1.1 200 Ok');
                echo $new_score->score.'/'.$new_score->max;
                /*
                echo "Usuario: $user<br />";
                echo "Criterio: {$criteria}<br />";
                echo "Valor: {$value}<br />";
                echo "Resulta: $result<br />";
                echo "<pre>".print_r($new_score, 1)."</pre>";
                 *
                 */
                die;
            } else {
                header ('HTTP/1.1 403 Forbidden');
                die;
            }
        }
    ○
        ※削除。

/controller/project.php 480-481
    ×
            elseif (isset($_SESSION['user']->roles['checker']) && Model\User\Review::is_assigned($_SESSION['user']->id, $project->id)) // es un revisor y lo tiene asignado
                $grant = true;
    ○
        ※削除。

/controller/project.php 85
    ×
                && (isset($_SESSION['user']->roles['checker']) && !Model\User\Review::is_assigned($_SESSION['user']->id, $project->id)) // no lo tiene asignado
    ○
        ※削除。

/controller/dashboard.php 649-652
    ×
            // si tiene permiso para ir a las revisiones
            if (ACL::check('/review')) 
                $menu['activity']['options']['review'] = Text::get('dashboard-menu-review_board');
    ○
        ※削除。

/controller/dashboard.php 71
    ×
            if (in_array($option, array('admin', 'review', 'translate'))) {
    ○
            if (in_array($option, array('admin', 'translate'))) {

/controller/admin.php 606
    ×
                                'reviews' => $options['reviews'],
    ○
        ※削除。

/controller/admin.php 558
    ×
                                'reviews' => $options['reviews'], // revisiones de proyectos del nodo
    ○
        ※削除。

/controller/admin.php 222-231
    ×
                'reviews' => array(
                    'label' => Text::_('Revisiones'),
                    'actions' => array(
                        'list' => array('label' => Text::_('Listando'), 'item' => false),
                        'add' => array('label' => Text::_('Iniciando briefing'), 'item' => false),
                        'edit' => array('label' => Text::_('Editando briefing'), 'item' => true),
                        'report' => array('label' => Text::_('Informe'), 'item' => true)
                    ),
                    'filters' => array('project' => '', 'status' => 'open', 'checker' => '')
                ),
    ○
        ※削除。

/controller/admin.php 73
    ×
                    'filters' => array('id' => '', 'methods' => '', 'investStatus' => 'all', 'projects' => '', 'name' => '', 'calls' => '', 'review' => '', 'types' => '', 'date_from' => '', 'date_until' => '', 'issue' => 'all', 'procStatus' => 'all', 'amount' => '')
    ○
                    'filters' => array('id' => '', 'methods' => '', 'investStatus' => 'all', 'projects' => '', 'name' => '', 'calls' => '', 'types' => '', 'date_from' => '', 'date_until' => '', 'issue' => 'all', 'procStatus' => 'all', 'amount' => '')

────────────────────────────────────────────────────────────
2016-03-07 19:21

    解説
        『text2(追加データ).sql』 を作成。

/db/text2(追加データ).sql

    実行
        ★『text2(追加データ).sql』を実行。

────────────────────────────────────────────────────────────
2016-03-07 21:26

    解説
        プロジェクトの作成画面７　プレビュー　でバグったので原因調べ。

/view/project/edit/preview.html.php 38-65

    復元
        // boton de revisar que no sirve para mucho
        $buttons = array(
            'review' => array(
                'type'  => 'submit',
                'name'  => $goto,
                'label' => Text::get('form-self_review-button'),
                'class' => 'retry'
            )
        );

        // si es enviable ponemos el boton
        if ($project->finishable) {
            $buttons['finish'] = array(
                'type'  => 'submit',
                'name'  => 'finish',
                'label' => Text::get('form-send_review-button'),
                'class' => 'confirm red'
            );
        } else {
            $buttons['nofinish'] = array(
                'type'  => 'submit',
                'name'  => 'nofinish',
                'label' => Text::get('form-send_review-button'),
                'class' => 'confirm disabled',
                'disabled' => 'disabled'
            );
        }

/view/m/project/edit/preview.html.php 39-66

    復元
        // boton de revisar que no sirve para mucho
        $buttons = array(
            'review' => array(
                'type'  => 'submit',
                'name'  => $goto,
                'label' => Text::get('form-self_review-button'),
                'class' => 'retry'
            )
        );

        // si es enviable ponemos el boton
        if ($project->finishable) {
            $buttons['finish'] = array(
                'type'  => 'submit',
                'name'  => 'finish',
                'label' => Text::get('form-send_review-button'),
                'class' => 'confirm red'
            );
        } else {
            $buttons['nofinish'] = array(
                'type'  => 'submit',
                'name'  => 'nofinish',
                'label' => Text::get('form-send_review-button'),
                'class' => 'confirm disabled',
                'disabled' => 'disabled'
            );
        }

────────────────────────────────────────────────────────────
2016-03-07 22:20

    解説
        ニュース機能（updates）も削除。

/view/project/view/menu.html.php 28
    ×
        'updates'     => Text::get('project-menu-updates').' <span class="digits">'.$this['updates'].'</span>',
    ○
        ※削除。

/view/project/view.html.php 144
    ×
                                'updates' => $updates,
    ○
        ※削除。

/view/project/view.html.php 54
    ×
        $updates = '';
    ○
        ※削除。

/view/m/project/view.html.php 31
    ×
            'updates'     => Text::get('project-menu-updates').' <span class="digits">'.$this['updates'].'</span>',
    ○
        ※削除。

/view/m/project/view.html.php 182-186
    ×
                    case 'updates':
                        echo
                            new View('view/m/project/widget/summary.h_ttl.html.php', array('project' => $project));
                        break;
    ○
        ※削除。

/view/m/project/view.html.php 95-96
    ×
                                'messages' => $messages,
                                'updates' => $updates
    ○
                                'messages' => $messages

/view/m/home/posts.html.php
    ○
        ※ファイル削除。（ブログ関係？）

/view/m/dashboard/profile/preferences.html.php 61-69
    ×
        'updates' => array(
            'title'     => Text::get('user-preferences-updates'),
            'type'      => 'slider',
            'options'   => $allow,
            'class'     => 'currently cols_' . count($allow),
//            'hint'      => Text::get('tooltip-preferences-updates'),
            'errors'    => array(),
            'value'     => (int) $preferences->updates
        ),
    ○
        ※削除。

/view/dashboard/profile/preferences.html.php 61-69
    ×
        'updates' => array(
            'title'     => Text::get('user-preferences-updates'),
            'type'      => 'slider',
            'options'   => $allow,
            'class'     => 'currently cols_' . count($allow),
            'hint'      => Text::get('tooltip-preferences-updates'),
            'errors'    => array(),
            'value'     => (int) $preferences->updates
        ),
    ○
        ※削除。

/library/wallfriends.php 259
    ×
                $info .= '<a href="'.$URL.'/project/'.$this->project->id.'/updates"'.$target.'>'.Text::get('wof-follow').'</a>';
    ○
        ※削除。

/controller/dashboard.php 621-644
    ×
            // segun lo que este traduciendo
/*            if ($_SESSION['translate_type'] == 'project') {
                // si esta traduciendo un proyecto
                $menu['translates'] = array(
                    'label' => Text::get('dashboard-menu-translates'),
                    'options' => array(
                        'profile' => Text::get('step-1'),
                        'overview' => Text::get('step-3'),
                        'costs' => Text::get('step-4'),
                        'rewards' => Text::get('step-5'),
                        'supports' => Text::get('step-6'),
                        'updates' => Text::get('project-menu-updates')
                    )
                );
            } else {
                // si está traduciendo su perfil
                $menu['translates'] = array(
                    'label' => Text::get('dashboard-menu-translates'),
                    'options' => array(
                        'profile' => Text::get('step-1')
                    )
                );
            }*/
    ○
        ※削除。

/controller/dashboard.php 611
    ×
                        'updates' => Text::get('dashboard-menu-projects-updates'),
    ○
        ※削除。

────────────────────────────────────────────────────────────
2016-03-07 22:57

    解説
        用語集（glossary）は削除。

/controller/admin.php 587
    ×
                                'glossary' => $options['glossary'],
    ○
        ※削除。

/controller/admin.php 120-127
    ×
                'glossary' => array(
                    'label' => Text::_('Glosario'),
                    'actions' => array(
                        'list' => array('label' => Text::_('Listando'), 'item' => false),
                        'edit' => array('label' => Text::_('Editando Término'), 'item' => true),
                        'translate' => array('label' => Text::_('Traduciendo Término'), 'item' => true)
                    )
                ),
    ○
        ※削除。

/controller/admin.php 50-51
    ×
                    'templates',
                    'glossary'
    ○
                    'templates'

/controller/glossary.php
    ○
        ※ファイル削除。

/controller/translate.php 456-462
    ×
                        'glossary' => array(
                            'label' => Text::_('Glosario'),
                            'actions' => array(
                                'list' => array('label' => Text::_('Listando'), 'item' => false),
                                'edit' => array('label' => Text::_('Traduciendo Término'), 'item' => true)
                            )
                        ),
    ○
        ※ファイル削除。

/controller/admin/glossary.php
    ○
        ※ファイル削除。

/library/content.php 47
    ×
                'glossary'  => Text::_('Glosario de términos'),
    ○
        ※削除。

/library/content.php 101-105
    ×
                'glossary' => array (
                    'title' => Text::_('Título'),
                    'text' => Text::_('Contenido'),
                    'legend' => Text::_('Leyenda media')
                ),
    ○
        ※削除。

/model/glossary.php
    ○
        ※ファイル削除。

/model/image.php 38
    ×
        public static $types = array('user','project', 'post', 'glossary', 'info');
    ○
        public static $types = array('user','project', 'post', 'info');

/view/admin/glossary
    ○
        ※フォルダーごと削除。

/view/glossary
    ○
        ※フォルダーごと削除。

/db/goteo.sql 304-346
    ×
        -- --------------------------------------------------------

        --
        -- Estructura de tabla para la tabla `glossary`
        --

        CREATE TABLE `glossary` (
          `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
          `title` tinytext,
          `text` longtext COMMENT 'texto de la entrada',
          `media` tinytext,
          `legend` text,
          PRIMARY KEY (`id`),
          UNIQUE KEY `id` (`id`)
        ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COMMENT='Entradas para el glosario';

        -- --------------------------------------------------------

        --
        -- Estructura de tabla para la tabla `glossary_image`
        --

        CREATE TABLE `glossary_image` (
          `glossary` bigint(20) NOT NULL,
          `image` int(10) unsigned NOT NULL,
          PRIMARY KEY (`glossary`,`image`)
        ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

        -- --------------------------------------------------------

        --
        -- Estructura de tabla para la tabla `glossary_lang`
        --

        CREATE TABLE `glossary_lang` (
          `id` bigint(20) unsigned NOT NULL,
          `lang` varchar(2) NOT NULL,
          `title` tinytext,
          `text` longtext,
          `legend` text,
          UNIQUE KEY `id_lang` (`id`,`lang`)
        ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

    ○
        ※削除。

/db/texts.sql 4980-4987
    ×
        ('regular-header-glossary', 'ca', 'Principis per a una economia oberta'),
        ('regular-header-glossary', 'el', 'Glossary of terms used in SiteName'),
        ('regular-header-glossary', 'en', 'Glossary of terms used in SiteName'),
        ('regular-header-glossary', 'eu', 'Ekonomia irekirako oinarriak'),
        ('regular-header-glossary', 'fr', 'Piliers pour une économie ouverte'),
        ('regular-header-glossary', 'gl', 'Principios para unha economía aberta'),
        ('regular-header-glossary', 'it', 'Glossary of terms used in SiteName'),
        ('regular-header-glossary', 'pl', 'Glossary of terms used in SiteName'),
    ○
        ※削除。

/db/texts.sql 2364-2368
    ×
        ('footer-resources-glossary', 'ca', 'Glossari '),
        ('footer-resources-glossary', 'de', 'Glossar'),
        ('footer-resources-glossary', 'en', 'Glossary'),
        ('footer-resources-glossary', 'eu', 'Glosarioa'),
        ('footer-resources-glossary', 'nl', 'Overzicht'),
    ○
        ※削除。

/db/acl.sql 51
    ×
        REPLACE INTO `acl` VALUES(51, '*', '*', '*', '/glossary/*', 1, '2011-08-25 13:37:45');
    ○
        ※削除。

/db/pages.sql
    ○
        ★長文なので省略。「マイクロファイナンスに関する用語集」（glossary） に関するリンクを削除。

/db/purpose.sql 701
    ×
        INSERT INTO `purpose` (`text`, `purpose`, `html`, `group`) VALUES('regular-header-glossary', 'Principios para una economía abierta', NULL, 'general');
    ○
        ※削除。

/db/purpose.sql 291
    ×
        INSERT INTO `purpose` (`text`, `purpose`, `html`, `group`) VALUES('footer-resources-glossary', 'Glosario', NULL, 'footer');
    ○
        ※削除。

/db/text(グーグル翻訳化).sql 691
    ×
        INSERT INTO text (id, lang, text) VALUES ( 'regular-header-glossary', 'ja', '用語集はサイト名で使用されます' );
    ○
        ※削除。

/db/text(グーグル翻訳化).sql 255
    ×
        INSERT INTO text (id, lang, text) VALUES ( 'footer-resources-glossary', 'ja', '用語集' );
    ○
        ※削除。

/db/texts2(追加データ).sql
    ○
        ★長文なので省略。「マイクロファイナンスに関する用語集」（glossary） に関するリンクを削除。

/view/css/csstidyonline.results.css 12532-12659
    ×
        /*----------------------------------------------------------------------
         glossary.css
        ----------------------------------------------------------------------*/
        #glossary-content
        {
            float:left;
            margin:0 20px 0 0;
            width:620px;
        }

        #glossary-content h3.title
        {
            background:#FFF url(/view/css/arrowH2-section.gif) no-repeat scroll -5px -2px;
            font-size:16px;
            font-weight:700;
            margin:0 0 20px;
            padding:15px 0 10px 30px;
        }

        #glossary-content div.glossary-page
        {
            background-color:#FFF;
            margin-bottom:20px;
            margin-top:-20px;
            padding:10px 0 1px;
        }

        #glossary-content h4.supertitle
        {
            border-bottom:1px solid #000;
            font-size:16px;
            font-weight:700;
            margin:0 30px;
            padding-bottom:5px;
        }

        #glossary-content h5.aqua
        {
            color:#20B3B2;
            font-size:14px;
            margin:10px 0;
            text-transform:none!important;
        }

        #glossary-content .post
        {
            line-height:16px;
            margin:0 30px;
        }

        #glossary-content .post p
        {
            margin-top:10px;
        }

        #glossary-content .post .embed
        {
            height:285px;
            margin:10px 18px;
            width:500px;
        }

        #glossary-content .post .embed-legend
        {
            border-left:2px solid #58595B;
            color:#9B9B9D;
            font-size:.9em;
            font-style:oblique;
            margin-bottom:10px;
            margin-left:16px;
            padding-left:10px;
            width:495px;
        }

        #glossary-sidebar
        {
            float:right;
            width:300px;
        }

        div.widget.glossary-content-module,div.widget.glossary-sidebar-module
        {
            background-color:#FFF;
            line-height:18px;
            margin:0 0 20px;
        }

        div.widget.glossary-content-module ol li a.up:hover
        {
            color:#20b3b2;
        }

        div.widget.glossary-sidebar-module .supertitle
        {
            border-bottom:1px solid #58595b;
            font:bold 14px Helvetica, Arial, Geneva, sans-serif;
            margin:0 0 3px;
            padding:5px;
        }

        div.widget.glossary-sidebar-module .supertitle.active
        {
            background-color:#f3f3f3;
        }

        div.widget.glossary-sidebar-module ul
        {
            list-style:none;
            margin-bottom:20px;
            padding-left:0;
        }

        div.widget.glossary-sidebar-module ul li
        {
            margin:0 0 5px;
        }

        div.widget.glossary-sidebar-module ul li a
        {
            color:#20b3b2;
            text-decoration:none;
        }

        div.widget.glossary-sidebar-module ul li a:hover
        {
            text-decoration:underline;
        }

    ○
        ※削除。

/view/m/css/cssmarge_mobile.css 10231-10326
    ×
        /*----------------------------------------------------------------------
          glossary.css
        ----------------------------------------------------------------------*/
        #glossary-content {
            width:620px;
            margin: 0 20px 0 0;
            float:left;
        }
        #glossary-content h3.title {
            margin: 0 0 20px;
            padding: 15px 0 10px 30px;
            background: white url('arrowH2-section.gif') no-repeat scroll -5px -2px;
            font-size: 16px;
            font-weight: bold;
        }
        #glossary-content div.glossary-page {
            background-color: white;
            margin-bottom: 20px;
            margin-top: -20px;
            padding: 10px 0 1px;
        }
        #glossary-content h4.supertitle {
            font-size: 16px;
            margin: 0 30px;
            border-bottom: 1px solid black;
            font-weight: bold;
            padding-bottom: 5px;
        }
        #glossary-content h5.aqua {
            font-size: 14px;
            margin: 10px 0;
            color: #20B3B2;
            text-transform: none !important;
        }
        #glossary-content .post {
            margin: 0 30px 0;
            line-height: 16px;
        }
        #glossary-content .post p{
            margin-top: 10px;
        }
        #glossary-content .post .embed{
            width: 500px;
            height: 285px;
            margin: 10px 18px;
        }
        #glossary-content .post .embed-legend{
            border-left: 2px solid #58595B;
            color: #9B9B9D;
            font-size: 0.9em;
            margin-left: 16px;
            width: 495px;
            padding-left: 10px;
            margin-bottom:10px;
            font-style:oblique
        }

        #glossary-sidebar {
            width:300px;
            float:right;
        }
        div.widget.glossary-content-module,
        div.widget.glossary-sidebar-module {
            background-color: white;
            line-height: 18px;
            margin: 0 0 20px;
        }
        div.widget.glossary-content-module ol li a.up:hover{
            color:#20b3b2;
        }
        div.widget.glossary-sidebar-module .supertitle {
            border-bottom: 1px solid #58595b;
            font: bold 14px Helvetica, Arial, Geneva, sans-serif;
            margin: 0 0 3px;
            padding: 5px;
        }
        div.widget.glossary-sidebar-module .supertitle.active {
            background-color: #f3f3f3;
        }
        div.widget.glossary-sidebar-module ul {
            padding-left:0px;
            list-style: none;
            margin-bottom: 20px;
        }
        div.widget.glossary-sidebar-module ul li {
            margin:0 0 5px 0;
        }
        div.widget.glossary-sidebar-module ul li a {
            color: #20b3b2;
            text-decoration:none;
        }
        div.widget.glossary-sidebar-module ul li a:hover {
            text-decoration:underline;
        }

    ○
        ※削除。

/local/en.po
    実行
        （１）カタログの設定から、
            文字符号化法：UTF-8
            ソースコードの文字符号化法：UTF-8
            に変更。
        （２）poedit で更新、保存。
            ↓
            エラーで翻訳文が全部消えた。

/local/en_GB/LC_MESSAGES/messages.po
    実行
        poedit で更新、保存。

/local/ja_JP/LC_MESSAGES/messages.po
    実行
        poedit で更新、保存。

/local/nl_NL/LC_MESSAGES/messages.po
    実行
        poedit で更新、保存。

/local/pt_BR/LC_MESSAGES/messages.po
    実行
        poedit で更新、保存。

────────────────────────────────────────────────────────────
2016-03-08 00:07

	解説
		コミュニケーション（mailing）機能の削除。

/cron-sender.sh
	○
		※ファイル削除。

/cli-sender.php
	○
		※ファイル削除。

/cli-sendmail.php
	○
		※ファイル削除。

/controller/admin.php 147-156
	×
                'mailing' => array(
                    'label' => Text::_('Comunicaciones'),
                    'actions' => array(
                        'list' => array('label' => Text::_('Seleccionando destinatarios'), 'item' => false),
                        'edit' => array('label' => Text::_('Escribiendo contenido'), 'item' => false),
                        'send' => array('label' => Text::_('Comunicación enviada'), 'item' => false)
                    ),
                    'filters' => array('project' => '', 'type' => '', 'status' => '-1', 'method' => '', 'interest' => '', 'role' => '', 'name' => '', 'donant' => '',
                    )
                ),
	○
		※ファイル削除。

/controller/admin.php 590
	×
                                'mailing' => $options['mailing'],
	○
		※削除。

/controller/admin.php 537
	×
                                'mailing' => $options['mailing'], // comunicaciones del nodoc on sus usuarios / promotores
	○
		※削除。

/controller/admin/mailing.php
	×
		※ファイルを削除。

/controller/dashboard/profile.php 227
	×
                'mailing',
	○
		※削除。

/db/purpose.sql 940
	×
		INSERT INTO `purpose` (`text`, `purpose`, `html`, `group`) VALUES('user-preferences-mailing', 'Bloquear el envio de newsletter', NULL, 'dashboard');
	○
		※削除。

/db/text(グーグル翻訳化).sql 900
	×
		INSERT INTO text (id, lang, text) VALUES ( 'user-preferences-mailing', 'ja', '無効にニュースレターの購読' );
	○
		※削除。

/db/texts.sql 6993-7001
	×
		('user-preferences-mailing', 'ca', 'Bloquejar l''enviament del newsletter'),
		('user-preferences-mailing', 'el', 'Disable newsletter subscription'),
		('user-preferences-mailing', 'en', 'Disable newsletter subscription'),
		('user-preferences-mailing', 'eu', 'Newsletter-raren bidalketa blokeatu'),
		('user-preferences-mailing', 'fr', 'Bloquer l''envoi de la newsletter'),
		('user-preferences-mailing', 'gl', 'Bloquear o envio de newsletter'),
		('user-preferences-mailing', 'it', 'Disable newsletter subscription'),
		('user-preferences-mailing', 'nl', 'Zet nieuwsbrief uit'),
		('user-preferences-mailing', 'pl', 'Disable newsletter subscription'),
	○
		※削除。

/view/admin/mailing/edit.html.php 65-114
	×
		<div class="widget">
		    <p><?php echo Text::_("Vamos a comunicarnos con ") . $_SESSION['mailing']['filters_txt']; ?></p>
		    <form action="/admin/mailing/send" method="post">
		    <!--
		    <dl>
		        <dt><?php echo Text::_("Seleccionar plantilla:"); ?></dt>
		        <dd>
		            <select id="template" name="template" >
		                <option value="0"><?php echo Text::_("Sin plantilla"); ?></option>
		            <?php foreach ($templates as $templateId=>$templateName) : ?>
		                <option value="<?php echo $templateId; ?>"><?php echo $templateName; ?></option>
		            <?php endforeach; ?>
		            </select>
		            <input type="button" id="template_load" value="<?php echo Text::_("Cargar"); ?>" />
		        </dd>
		    </dl>-->
		    <dl>
		        <dt><?php echo Text::_("Asunto:"); ?></dt>
		        <dd>
		            <input id="mail_subject" name="subject" value="<?php echo $_SESSION['mailing']['subject']?>" style="width:500px;"/>
		        </dd>
		    </dl>
		    <dl>
		        <dt><?php echo Text::_("Contenido: (en c&oacute;digo html; los saltos de linea deben ser con &lt;br /&gt;)"); ?></dt>
		        <dd>
		            <textarea id="mail_content" name="content" cols="100" rows="10"></textarea>
		        </dd>
		    </dl>
		    <dl>
		        <dt><?php echo Text::_("Lista destinatarios:"); ?></dt>
		        <dd>
		            <ul>
		                <?php foreach ($_SESSION['mailing']['receivers'] as $usrid=>$usr) : ?>
		                <li>
		                    <input type="checkbox"
		                           name="receiver_<?php echo $usr->id; ?>"
		                           id="receiver_<?php echo $usr->id; ?>"
		                           value="1"
		                           checked="checked" />
		                    <label for="receiver_<?php echo $usr->id; ?>"><?php echo $usr->name.' ['.$usr->email.']'; if (!empty($usr->project)) echo Text::_("Proyecto") . ': <strong>'.$usr->project.'</strong>'; ?></label>
		                </li>
		                <?php endforeach; ?>
		            </ul>
		        </dd>
		    </dl>

		    <input type="submit" name="send" value="Enviar"  onclick="return confirm(<?php echo Text::_("Has revisado el contenido y comprobado los destinatarios?")?>);"/>

		    </form>
		</div>

	○
		※削除。

/view/admin/mailing
	○
		※フォルダーごと削除。

/view/admin/newsletter/list.html.php
	×
        <?php echo Text::_('Para contenido personalizado hay que usar la funcionalidad'); ?> <a href="/admin/mailing" ><?php echo Text::_('Comunicaciones'); ?></a>.</p>
	○
        <?php echo Text::_('Para contenido personalizado hay que usar la funcionalidad'); ?> .</p>

/view/css/csstidyonline.results.css 4463-4470
	×
		body.admin div.admin-right.mailing form dd {
		    margin-left: 0;
		}
		body.admin div.admin-right.mailing form #mail_content {
		    width: 740px;
		    padding: 4px;
		}

	○
		※削除。

/view/dashboard/profile/preferences.html.php 78-87
	×
        ),
        'mailing' => array(
            'title'     => Text::get('user-preferences-mailing'),
            'type'      => 'slider',
            'options'   => $allow,
            'class'     => 'currently cols_' . count($allow),
            'hint'      => Text::get('tooltip-preferences-mailing'),
            'errors'    => array(),
            'value'     => (int) $preferences->mailing
        )
	○
        )

/view/m/dashboard/profile/preferences.html.php 78-87
	×
        ),
        'mailing' => array(
            'title'     => Text::get('user-preferences-mailing'),
            'type'      => 'slider',
            'options'   => $allow,
            'class'     => 'currently cols_' . count($allow),
//            'hint'      => Text::get('tooltip-preferences-mailing'),
            'errors'    => array(),
            'value'     => (int) $preferences->mailing
        )
	○
        )

/locale/en_GB/LC_MESSAGES/messages.po
	実行
		更新して保存して終了。

/locale/en.po
	実行
		更新して保存して終了。

/locale/ja_JP/LC_MESSAGES/messages.po
	実行
		更新して保存して終了。

/locale/nl_NL/LC_MESSAGES/messages.po
	実行
		更新して保存して終了。

/locale/pt_BR/LC_MESSAGES/messages.po
	実行
		更新して保存して終了。

/model/user.php 1502-1524
	×
        /**
         * Metodo para saber si el usuario ha bloqueado este envio de mailing
         *
         * @param string $userId
         * @param string $mailingCode Tipo de envio de mailing. Default: newsletter
         * @return bool
         */
        public static function mailBlock($userId, $mailingCode = 'mailing') {

            $values = array(':user' => $userId);

            $sql = "SELECT user_prefer.{$mailingCode} as blocked FROM user_prefer WHERE user_prefer.user = :user";

            $query = self::query($sql, $values);
            $block = $query->fetchColumn();
            if ($block == 1) {
                return true;
            } else {
                return false;
            }

        }

	○
		※削除。

/view/admin/index.html.php 75-77
	×
                            <?/*<li><a href="/admin/texts"><?php echo Text::_("Textos"); ?></a></li>
                            <li><a href="/admin/tasks"><?php echo Text::_("Tareas"); ?></a></li>
                            <li><a href="/admin/newsletter"><?php echo Text::_("Mailings"); ?></a></li>*/?>
	○
		※削除。

────────────────────────────────────────────────────────────
